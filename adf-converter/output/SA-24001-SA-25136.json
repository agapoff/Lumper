[
    {
        "key": "SA-24160",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I see this when I start the client locally. ![](image.png)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Here is the full text "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "WARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 9, column 2 of file:///C:/Users/natan.abolafya/Code/stratus-client-shared/src/empower/ui/app/assets/styles/mixins/_truncate.scss:9:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n9 |   overflow: hidden;\n\n\napp\\assets\\styles\\mixins\\_truncate.scss 10:3    truncate()\napp\\components\\common\\button\\_button.scss 67:3  @forward\napp\\assets\\styles\\components\\_index.scss 5:1    @use\napp\\assets\\styles\\manifest.scss 7:1             root stylesheet\nWARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 10, column 2 of file:///C:/Users/natan.abolafya/Code/stratus-client-shared/src/empower/ui/app/assets/styles/mixins/_truncate.scss:10:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n10 |   width: $width;\n\n\napp\\assets\\styles\\mixins\\_truncate.scss 11:3    truncate()\napp\\components\\common\\button\\_button.scss 67:3  @forward\napp\\assets\\styles\\components\\_index.scss 5:1    @use\napp\\assets\\styles\\manifest.scss 7:1             root stylesheet\nWARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 21, column 2 of file:///C:/Users/natan.abolafya/Code/stratus-client-shared/src/empower/ui/app/components/common/app-launcher/_app-shortcut.scss:21:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n21 |   max-width: 100%;\n\n\napp\\components\\common\\app-launcher\\_app-shortcut.scss 22:3  @forward\napp\\assets\\styles\\components\\_index.scss 3:1                @use\napp\\assets\\styles\\manifest.scss 7:1                         root stylesheet\nWARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 22, column 2 of file:///C:/Users/natan.abolafya/Code/stratus-client-shared/src/empower/ui/app/components/common/app-launcher/_app-shortcut.scss:22:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n22 |   transition: background-color .2s ease-in, color .2s ease-in, border .2s ease-in;\n\n\napp\\components\\common\\app-launcher\\_app-shortcut.scss 23:3  @forward\napp\\assets\\styles\\components\\_index.scss 3:1                @use\napp\\assets\\styles\\manifest.scss 7:1                         root stylesheet\nWARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 23, column 2 of file:///C:/Users/natan.abolafya/Code/stratus-client-shared/src/empower/ui/app/components/common/app-launcher/_app-shortcut.scss:23:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n23 |   margin: 0;\n\n\napp\\components\\common\\app-launcher\\_app-shortcut.scss 24:3  @forward\napp\\assets\\styles\\components\\_index.scss 3:1                @use\napp\\assets\\styles\\manifest.scss 7:1                         root stylesheet\nWARNING in ./assets/styles/manifest.scss (../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./assets/styles/manifest.scss)\nModule Warning (from ../../node_modules/sass-loader/dist/cjs.js):\n66 repetitive deprecation warnings omitted."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The use of declarations after nested rules is currently deprecated in Sass",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " From "
                                },
                                {
                                    "type": "text",
                                    "text": "https://sass-lang.com/documentation/breaking-changes/mixed-decls/#deprecating-the-old-way",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://sass-lang.com/documentation/breaking-changes/mixed-decls/#deprecating-the-old-way"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It seems to be ok in the frontend"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1721227526948
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "h\u00e9, my bad, I guess I didn't install the latest packages, we have the same issue in the admin UI It seem that the "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "include",
                                        "text": "@include",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " m.dark-theme {",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " are triggering the error as well The admin UI task: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://got-youtrack.agi.appgate.com/issue/SA-24167/Go-through-CSS-deprecation-warnings",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://got-youtrack.agi.appgate.com/issue/SA-24167/Go-through-CSS-deprecation-warnings"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1721378439463
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I couldn't figure out how to see the warnings, but this is how I think these issues are solved. Currently, the dark theme SCSS is added like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n @include m.dark-theme {\n   --color: black;\n }\n \n color: var(--color);\u00a0\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "There seems to be two options to fix it. As it is just code structure, the developers should agree on the best option and update every file accordingly."
                                }
                            ]
                        },
                        {
                            "type": "heading",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "1. Move dark-theme"
                                }
                            ],
                            "attrs": {
                                "level": 2
                            }
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Put it after any top-level property. Like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n color: var(--color);\u00a0// Property placed above the @include\n \n @include m.dark-theme { // Mixin places below the properties\n   --color: black;\n }\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Pros with this approach: No extra characters. More in line with how CSS is supposed to be written."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Cons with this approach: The light and dark color are separated by other properties."
                                }
                            ]
                        },
                        {
                            "type": "heading",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2. Wrap properties with a &"
                                }
                            ],
                            "attrs": {
                                "level": 2
                            }
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Wrap the \"base\" properties like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n @include m.dark-theme { // This stays as it is\n   --color: black;\n }\n \n & { // This & wraps all properties that are not wrapped by anything else\n   color: var(--color);\u00a0\n }\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Pros with this approach: Dark color overrides are close to the light colors"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Cons with this approach: The & is added in lots of places. The "
                                },
                                {
                                    "type": "text",
                                    "text": ".selector",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " will probably be added twice in the generated CSS."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "carina.olsson",
                "created": 1721637965484
            }
        ]
    },
    {
        "key": "SA-24460",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This can happen due to a crash or sudden network interruption."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We have seen it on purple10: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Sep 17 07:59:56 purple10.appgate.com cz-dbd@current[3265]: [INFO] Running now in node: purple10.appgate.com\nSep 17 07:59:56 purple10.appgate.com postgresql@current[3271]: [6-1] 2024-09-17 07:59:56.582 GMT   LOG:  checkpointer process (PID 10) was terminated by signal 39: Real-time signal 5\nSep 17 07:59:56 purple10.appgate.com postgresql@current[3271]: [7-1] 2024-09-17 07:59:56.582 GMT   LOG:  terminating any other active server processes\nSep 17 07:59:56 purple10.appgate.com postgresql@current[3271]: [8-1] 2024-09-17 07:59:56.598 GMT   LOG:  all server processes terminated; reinitializing\nSep 17 07:59:56 purple10.appgate.com postgresql@current[3379]: [9-1] 2024-09-17 07:59:56.649 GMT   LOG:  database system was interrupted; last known up at 2024-09-17 07:59:54 GMT\nSep 17 07:59:56 purple10.appgate.com postgresql@current[3380]: [9-1] 2024-09-17 07:59:56.649 GMT postgres controller FATAL:  the database system is in recovery mode\nSep 17 07:59:56 purple10.appgate.com cz-dbd@current[3265]: [ERROR] [run-on-all-nodes] Error running query SELECT bdr.wait_slot_confirm_lsn(NULL, NULL) on node purple10_appgate_com_1443000\n                                                           Traceback (most recent call last):\n                                                             File \"/usr/share/cz-dbd/dbd/bdr.py\", line 398, in run_on_all_nodes\n                                                               async with aiopg.connect(dsn) as conn:\n                                                             File \"/usr/lib/python3/dist-packages/aiopg/utils.py\", line 82, in __aenter__\n                                                               self._obj = await self._coro\n                                                             File \"/usr/lib/python3/dist-packages/aiopg/connection.py\", line 1225, in _connect\n                                                               await self._poll(self._waiter, self._timeout)  # type: ignore\n                                                             File \"/usr/lib/python3/dist-packages/aiopg/connection.py\", line 881, in _poll\n                                                               await asyncio.wait_for(self._waiter, timeout)\n                                                             File \"/usr/lib/python3.10/asyncio/tasks.py\", line 445, in wait_for\n                                                               return fut.result()\n                                                             File \"/usr/lib/python3/dist-packages/aiopg/connection.py\", line 788, in _ready\n                                                               state = self._conn.poll()\n                                                           psycopg2.OperationalError: FATAL:  the database system is in recovery mode"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We should wait for the database to exit recovery mode in startup so we don't continue issuing commands too soon. In the best case this will cause an error and retry. In the worst case we have seen some SQL commands hang."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Slack thread, including purple10 log bundle "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/GUGM5LV62/p1726560044495549",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/GUGM5LV62/p1726560044495549"
                                    }
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It is possible to check if the database is in recovery mode using the following command: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "root@purple10:/home/cz# cz-dbs pg cli\nRunning: /usr/bin/sudo --preserve-env=HOME,TERM -u postgres pgcli -p 443 -h /run/cz-dbd/dbd-current controller\nServer: PostgreSQL 14.13 (Ubuntu 14.13-0ubuntu0.22.04.2)\nVersion: 3.3.1\nHome: "
                                },
                                {
                                    "type": "text",
                                    "text": "http://pgcli.com"
                                },
                                {
                                    "type": "text",
                                    "text": "\ncontroller> select pg_is_in_recovery();\n+-------------------+\n| pg_is_in_recovery |\n|-------------------|\n| False             |\n+-------------------+\nSELECT 1\nTime: 0.015s\ncontroller>                                                                                                                                                                              \nGoodbye!"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "See "
                                },
                                {
                                    "type": "text",
                                    "text": "https://www.postgresql.org/docs/14/functions-admin.html#FUNCTIONS-RECOVERY-CONTROL",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://www.postgresql.org/docs/14/functions-admin.html#FUNCTIONS-RECOVERY-CONTROL"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1726561422091
            }
        ]
    },
    {
        "key": "SA-24085",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "One windows proxy test has been failing consistently for some time due to shim not liking some certificate."
                        }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "[ca"
                                },
                                {
                                    "type": "text",
                                    "text": "renewal\\\\ca",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "renewal"
                                },
                                {
                                    "type": "text",
                                    "text": "2fa",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "on"
                                },
                                {
                                    "type": "text",
                                    "text": "boarding] [client-service/stdout] [2024-07-02T05{{COLON",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "NUM"
                                },
                                {
                                    "type": "text",
                                    "text": "34}}32.666Z] Info : 'VPN Proxy Site': Connection to envy-10-98-131-3.devops (10.98.131.3) failed: DecodeError - Failed to decode PKCS12",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Seems to be happening since the morning of June 21."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "aitorbot test get -t proxy_windows -d 5\naitorbot ['proxy_windows'] | 2024-06-20 05:00:07\n        id:   224c144b-59b5-40a7-9987-9bbd3b71ce7d\n        url:  "
                        },
                        {
                            "type": "text",
                            "text": "https://got-testrail.agi.appgate.com/index.php?/plans/view/1324592"
                        },
                        {
                            "type": "text",
                            "text": "\n        passed: 22/22\naitorbot ['proxy_windows'] | 2024-06-21 05:00:07\n        id:   e85fcc2f-5c9c-4e70-844c-08b105f872f1\n        url:  "
                        },
                        {
                            "type": "text",
                            "text": "https://got-testrail.agi.appgate.com/index.php?/plans/view/1325051"
                        },
                        {
                            "type": "text",
                            "text": "\n        passed: 21/22\naitorbot ['proxy_windows'] | 2024-06-22 05:00:07\n        id:   a1edb0aa-a3e7-4b9e-a56d-83ab66274f0c\n        url:  "
                        },
                        {
                            "type": "text",
                            "text": "https://got-testrail.agi.appgate.com/index.php?/plans/view/1325450"
                        },
                        {
                            "type": "text",
                            "text": "\n        passed: 21/22\naitorbot ['proxy_windows'] | 2024-06-23 05:00:08\n        id:   3bc3e558-4407-491c-ba4e-4b42e77b56c0\n        url:  "
                        },
                        {
                            "type": "text",
                            "text": "https://got-testrail.agi.appgate.com/index.php?/plans/view/1325839"
                        },
                        {
                            "type": "text",
                            "text": "\n        passed: 21/22\naitorbot ['proxy_windows'] | 2024-06-24 05:00:07\n        id:   b9e8d058-78aa-4964-86be-f26177b4ea4b\n        url:  "
                        },
                        {
                            "type": "text",
                            "text": "https://got-testrail.agi.appgate.com/index.php?/plans/view/1326228"
                        },
                        {
                            "type": "text",
                            "text": "\n        passed: 21/22"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Started happening after wolfSSL 5.7.0 update - shim/ipt use same code here, so it's strange that we don't see this problem with the normal client."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.allansson",
                "created": 1719932262346
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "But proxy tests seem unstable for other reason? Or well nightly passed, maybe I just start a bad test suite in my own tests - at least the decoding errors were gone from my runs anyhow."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.allansson",
                "created": 1720502554117
            }
        ]
    },
    {
        "key": "SA-24305",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "When it actually has."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "e.g."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "15:41:37 \n      2024-08-22T15:41:37,350397Z [INFO] [upgrade/appliance_sdpctl_upgrade] Preparing upgrade with image_url="
                        },
                        {
                            "type": "text",
                            "text": "https://got02-helvetest.agi.appgate.com:443/testsd/project/666/StratusImage_Build/release-6.4/artifact/appgate-6.4.0-38258-beta.img.zip?is-build-type-id"
                        },
                        {
                            "type": "text",
                            "text": "\n\n15:41:37 \n      2024-08-22T15:41:37,351059Z [INFO] [upgrade/appliance_sdpctl_upgrade] Running sdpctl command: /home/devops/buildAgent/temp/buildTmp/sdpctl_test_config_n0bv130y/sdpctl appliance upgrade prepare --image "
                        },
                        {
                            "type": "text",
                            "text": "https://got02-helvetest.agi.appgate.com:443/testsd/project/666/StratusImage_Build/release-6.4/artifact/appgate-6.4.0-38258-beta.img.zip?is-build-type-id"
                        },
                        {
                            "type": "text",
                            "text": " --force --dev-keyring --no-interactive --ci-mode\n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=info COMMAND=\"sdpctl appliance upgrade prepare\" SDPCTL_VERSION=2024.08.16\n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"version check disabled\"\n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"found docker registry address\" URL=\""
                        },
                        {
                            "type": "text",
                            "text": "https://got02-nexus01.agi.appgate.com:5001"
                        },
                        {
                            "type": "text",
                            "text": "\n\n15:41:37 \n  sdpctl_version: 2024.08.16\n\n15:41:37 \n  commit: eaa3a0c5a5795c5994802ad8a84c7cfff51ee1f7\n\n15:41:37 \n  build date: 2024-08-16T08:41:36Z\n\n15:41:37 \n  \n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"primary controller\" appliance=controller-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1\n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"upgrade version information\" primary-controller=controller-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1 target-version=6.4.0-beta+38258 version=6.3.3-beta+38257\n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"upgrade information\" current_version=6.3.3-beta+38257 skipping= target_version=6.4.0-beta+38258 upgrading=\"controller-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1, controller2-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1, gateway-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1\"\n\n15:41:37 \n  \n\n15:41:37 \n  PREPARE SUMMARY\n\n15:41:37 \n  \n\n15:41:37 \n  1. Bundle and upload LogServer docker image\n\n15:41:37 \n  2. Upload upgrade image appgate-6.4.0-38258-beta.img.zip to Controller\n\n15:41:37 \n  3. Prepare upgrade on the following appliances:\n\n15:41:37 \n  \n\n15:41:37 \n    Appliance                                                 Online    Current version     Prepare version\n\n15:41:37 \n    ---------                                                 ------    ---------------     ---------------\n\n15:41:37 \n    controller-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1     \u2713         6.3.3-beta+38257    6.4.0-beta+38258\n\n15:41:37 \n    controller2-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1    \u2713         6.3.3-beta+38257    6.4.0-beta+38258\n\n15:41:37 \n    gateway-c9934ce3-f44e-4187-9128-c8f46b10ed74-site1        \u2713         6.3.3-beta+38257    6.4.0-beta+38258\n\n15:41:37 \n  \n\n15:41:37 \n  \n\n15:41:37 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layers for logserver-latest.zip\"\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"wrote layer\" path=cz-opensearch/latest.json size=948\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"wrote layer\" path=cz-opensearchdashboards/latest.json size=948\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"wrote layer\" path=cz-opensearchdashboards/07a08a2ab691a8983e91d2410ce9aec24420212d4aa9611202a0a5b18bdc3762.json size=6334\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layer\" layer=4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layer\" layer=e4fff0779e6ddd22366469f08626c3ab1884b5cbe1719b26da238c95f247b305\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layer\" layer=714926751fa783e638d2bf4d3880083b246acae60d08341a5f1a333babffb292\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"wrote layer\" path=cz-opensearchdashboards/image.json size=77\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=debug msg=\"wrote layer\" path=cz-opensearch/01d8c16f03054d452569e7d785818edf7fff02625f6377d14850b697c49b7110.json size=6365\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layer\" layer=4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1\n\n15:41:38 \n  time=\"2024-08-22T17:41:37+02:00\" level=info msg=\"downloading image layer\" layer=e4fff0779e6ddd22366469f08626c3ab1884b5cbe1719b26da238c95f247b305"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "SA-24605",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This might be multiple issues. Feel free to split."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Actions and Preconditions"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "User is blacklisted using the admin API to a (non existing?) IDP \"/All Customers/MTN/Cameroon\""
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "They then tried to manually remove the blacklisting using the admin UI"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Observation (with screenshots if applicable)"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Blacklisting successful"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Not possible to remove blacklisting (even though the frontend escapes the request correctly)"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Expected"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Not possible to blacklist user without an existing IDP"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Probably it should be possible to remove the blacklisted user (but I'm not sure)"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Logs and/or testrail/slack links"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/CU926BAP8/p1728567054482219",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/CU926BAP8/p1728567054482219"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Repeatability:"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Always"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Related: SA-22172, though not very helpful."
                                }
                            ]
                        },
                        {
                            "type": "blockquote",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Not possible to blacklist user without an existing IDP"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I don't think we should add extra checks for this. Doesn't provide much value."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1730384942908
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The idea behind that was to mitigate the risk is that the admin thinks that the user is blacklisted even though it won't be. It's better to error out and give feedback instead."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I don't have a strong opinion on that. As long as it's possible to remove the user once it's added I think that is fine."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1730442239122
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Nov 14 09:19:42 envy-10-98-149-2.devops nginx_admin[247246]: 10.98.0.19 - - [14/Nov/2024:09:19:42 +0000] \"DELETE /admin/blacklist/CN%3Dasdad%2COU%3Dasda%2Fasd HTTP/2.0\" 404 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "https://envy-10-98-149-2.devops:8443/ui/usage/blacklisted-users\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:131.0) Gecko/20100101 Firefox/131.0\"\nNov 14 09:19:42 envy-10-98-149-2.devops cz-controllerd[250650]: 10.98.0.19 - - \"DELETE /admin/blacklist/CN=asdad,OU=asda/asd HTTP/1.0\" 404 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "https://envy-10-98-149-2.devops:8443/ui/usage/blacklisted-users\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:131.0) Gecko/20100101 Firefox/131.0\" 3"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": " looks like the escaped slashes get unescaped either between nginx and dropwizard; or dropwizard itself."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1731576045808
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Seems to be an nginx behavior "
                                },
                                {
                                    "type": "text",
                                    "text": "http://nginx.org/r/proxy",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "http://nginx.org/r/proxy"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "pass ![](image.png)",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1731577239803
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "nginx needs an adjustment to handle this: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://stackoverflow.com/questions/28684300/nginx-pass-proxy-subdirectory-without-url-decoding/37584637#37584637",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://stackoverflow.com/questions/28684300/nginx-pass-proxy-subdirectory-without-url-decoding/37584637#37584637"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "since it affects all the admin calls, in case of unexpected behavior, I'll move this to 6.5."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1731577612966
            }
        ]
    },
    {
        "key": "SA-24933",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "For example the request looks like this"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "`GET\n\t"
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/admin/on-boarded-devices?range=0-30&username=abc&providerName=AppGate"
                        },
                        {
                            "type": "text",
                            "text": " Azure AD SAML Admin&hostname=def&deviceId=abc"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "and the response looks like this"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "It's better to keep the order. But it's tricky because the underlying framework uses some sort of hashmap implementation."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Checked the regular query list, there the order is kept at least."
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "SA-24461",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Ty reported a crash in lieu of the up\u011drade screen ![](image.png)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I saw it on my machine while being connected to purple UI"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Error: Minified React error #31; visit "
                        },
                        {
                            "type": "text",
                            "text": "https://reactjs.org/docs/error-decoder.html?invariant=31&args[]=object%20with%20keys%20%7Bdata%2C%20status%2C%20statusText%2C%20headers%2C%20config%2C%20request%7D"
                        },
                        {
                            "type": "text",
                            "text": " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\n    va "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    e "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    ko "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    xi "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    bs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    vs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    gs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    as "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    ls "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    O "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/9057.7660ff088aecbf0bd512.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    x "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/9057.7660ff088aecbf0bd512.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n2551.f4c84be5625bdf72ee4f.js:2:71408\nReact Router caught the following error during render Error: Minified React error #31; visit "
                        },
                        {
                            "type": "text",
                            "text": "https://reactjs.org/docs/error-decoder.html?invariant=31&args[]=object%20with%20keys%20%7Bdata%2C%20status%2C%20statusText%2C%20headers%2C%20config%2C%20request%7D"
                        },
                        {
                            "type": "text",
                            "text": " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\n    va "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    e "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    ko "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    xi "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    bs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    vs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    gs "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    as "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    ls "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/2551.f4c84be5625bdf72ee4f.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    O "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/9057.7660ff088aecbf0bd512.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n    x "
                        },
                        {
                            "type": "text",
                            "text": "https://purple10.agi.appgate.com:8443/ui/9057.7660ff088aecbf0bd512.js:2"
                        },
                        {
                            "type": "text",
                            "text": "\n "
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": " Slack thread: "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/GTWMVPUSV/p1726559145315619",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/GTWMVPUSV/p1726559145315619"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "To Reproduce"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I have not tried but his step is:"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Upgrade a collective"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "DoD"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The upgrade screen is shown as expceted"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "this can be reproduced by just stopping controller on the appliance."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1727096696546
            }
        ]
    },
    {
        "key": "SA-24172",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "A lot of Fedora nighlies are failing due to crash. This has been the case for a while but it was one or two failures and we could not reproduce out of e2e. Now that I've upgraded the test agent to Fedora 40, ~15 tests are failing due to crashes. We should probably investigate that."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "After trying again and again, I got this on the agent: ![](image.png)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "And the full-on journalctl: ![](image1.png)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I get a very similar crash once in a while in the actual test device too but on that device it never generates a UI log. Just says \"Fatal process out of memory: Failed to reserve virtual memory for CodeRange)\" on stderr. This is quite strange."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "But I think this is a legit issue."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1721839417972
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Possibly related: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://discussion.fedoraproject.org/t/selinux-execheap-denials/120638/56",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://discussion.fedoraproject.org/t/selinux-execheap-denials/120638/56"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1721839767097
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://issues.chromium.org/issues/350117526",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://issues.chromium.org/issues/350117526"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.allansson",
                "created": 1722253788891
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Seems like a potential kernel bug: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://bugzilla.redhat.com/show",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://bugzilla.redhat.com/show"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "bug.cgi?id=2254434",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1723621292284
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reisner.marc                                                           2024-08-16 02{{COLON"
                                },
                                {
                                    "type": "text",
                                    "text": "NUM",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "44}}02 UTC"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The fix was merged into the mainline kernel.\n\n"
                                },
                                {
                                    "type": "text",
                                    "text": "https://lore.kernel.org/all/30fc5b38165e4eda57d640eca76b7df1@paul-moore.com/"
                                },
                                {
                                    "type": "text",
                                    "text": "\n\nIt just needs to be merged into the next stable kernel and released by Fedora. I'm guessing that will be next week.\n"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Comment 174",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://bugzilla.redhat.com/show_bug.cgi?id=2254434#c174"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Steve                                                           2024-08-17 14{{COLON"
                                },
                                {
                                    "type": "text",
                                    "text": "NUM",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "27}}45 UTC"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "(In reply to reisner.marc from comment #173)\n> The fix was merged into the mainline kernel.\n\nThanks for pointing that out.\n\nMainline kernels are usually released on Sundays:\n\n"
                                },
                                {
                                    "type": "text",
                                    "text": "https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/refs/"
                                },
                                {
                                    "type": "text",
                                    "text": "\n\nLinux v6.11-rc4 should have this merge commit, which includes the fix:\n\n"
                                },
                                {
                                    "type": "text",
                                    "text": "https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=9d5906799f7d89c9e12f6d2e0fccb00713c945ab"
                                },
                                {
                                    "type": "text",
                                    "text": "\n\nI'm not sure about the release schedule for stable kernels, but Fedora users can look for kernel updates here:\n\n"
                                },
                                {
                                    "type": "text",
                                    "text": "https://bodhi.fedoraproject.org/updates/?packages=kernel"
                                },
                                {
                                    "type": "text",
                                    "text": "\n"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1724076159927
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Kernel kernel-6.10.6-200.fc40 is hopefully the one solving this issue. It's was sent to Fedora testing repository last night."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1724160624195
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Verified that issue is solved in Fedora kernel kernel-6.10.6-200.fc40. Closing bug. Should we mention this in some release notes or something?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1724664299835
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I will inform Brian O'Donnell about it."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1724664766099
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I am updating the Fedora test agent also."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1724666162878
            }
        ]
    },
    {
        "key": "SA-25047",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Sessiond sends a dictionary of DNS names (I think?):"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n\"google.com\": [1.1.1.1, 2.3.4.5],\n\"aftonbladet.se\": [\"7.4.2.3\", \"6.5.6.5\"]\n}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "it gets proxied to controller with the websocket request method "
                        },
                        {
                            "type": "text",
                            "text": "\"rdns_map\"",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " . SA-24993"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "per.leino",
                                        "text": "@per.leino",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " does sessiond already send the data to configd? What are the call details?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1737478233373
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "there is configuration to set on the sessiond on where it should send stuff.. its called : "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/stratus-gateway/commit/a6a59c822689672f4256fe3d5d8a4d5a7032d7fc#diff-0946d7373c48cf1585a42f20f2b1d4aca168decd1dd0dc4f3d06bfa22ea36070R596",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/stratus-gateway/commit/a6a59c822689672f4256fe3d5d8a4d5a7032d7fc#diff-0946d7373c48cf1585a42f20f2b1d4aca168decd1dd0dc4f3d06bfa22ea36070R596"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " So by setting that to configd.. simliar as we did for revocationList for example.. then that should get the data."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1737480407794
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Is it a POST?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1737533261759
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Going with this in configd controller proxy terms: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "@define\nclass RdnsMap:\n    names: dict[str, list[str]]\n\n\n_PROXY_MAPPING = [\n    # ...\n    ProxyRoute(\"POST\", \"/rdns-map\", \"rdns_map\", RdnsMap)\n]"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1737533506282
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "per.leino",
                                        "text": "@per.leino",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Ok so from what you wrote here configd needs to write something like this to the sessiond config: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "ZTPLogpusherURL: \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://127.0.0.1:9230/rdns-map\""
                                },
                                {
                                    "type": "text",
                                    "text": "\nZTPLogpusherToken: \"\""
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Note that the token is useless in the proxying via controller case and also configd is already passing the configd port to sessiond like this: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "configdPort: 9230"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "natan.abolafya",
                                        "text": "@natan.abolafya",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Is there something in the config sent by the controller that should trigger adding this to sessiond config?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1737534442639
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "yep that should be ok"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1737534931188
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "thomas.cellerier",
                                        "text": "@thomas.cellerier",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " that depends on SA-24754."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1737535586429
            }
        ]
    },
    {
        "key": "SA-24167",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The update of sass triggers warnings in the console"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "ex: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[webpack-dev-server] WARNING in ./app/navigation/navigation/navigation.scss (./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./app/navigation/navigation/navigation.scss)\nModule Warning (from ./node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 26, column 2 of file:///home/hadrien/git/stratus-frontend/react/app/navigation/navigation/navigation.scss:26:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n26 |   display: flex;\n\n\napp/navigation/navigation/navigation.scss 27:3  root stylesheet\nindex.js:489\n[webpack-dev-server] WARNING in ./app/navigation/navigation/navigation.scss (./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./app/navigation/navigation/navigation.scss)\nModule Warning (from ./node_modules/sass-loader/dist/cjs.js):\nDeprecation Warning on line 27, column 2 of file:///home/hadrien/git/stratus-frontend/react/app/navigation/navigation/navigation.scss:27:2:\nSass's behavior for declarations that appear after nested\nrules will be changing to match the behavior specified by CSS in an upcoming\nversion. To keep the existing behavior, move the declaration above the nested\nrule. To opt into the new behavior, wrap the declaration in `& {}`.\n\nMore info: "
                        },
                        {
                            "type": "text",
                            "text": "https://sass-lang.com/d/mixed-decls"
                        },
                        {
                            "type": "text",
                            "text": "\n\n27 |   font-size: .875rem;\n\n\napp/navigation/navigation/navigation.scss 28:3  root stylesheet"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "See the client issue "
                        },
                        {
                            "type": "text",
                            "text": "https://got-youtrack.agi.appgate.com/issue/SA-24160/Go-through-CSS-deprecation-warnings",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://got-youtrack.agi.appgate.com/issue/SA-24160/Go-through-CSS-deprecation-warnings"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "it seems that the "
                        },
                        {
                            "type": "mention",
                            "attrs": {
                                "id": "include",
                                "text": "@include",
                                "accessLevel": ""
                            }
                        },
                        {
                            "type": "text",
                            "text": " m.dark-theme {",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " trigger the issue :("
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of Done"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "No more warnings"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Where are these errors displayed? What should I run to see them?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "carina.olsson",
                "created": 1721629573740
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "carina.olsson",
                                        "text": "@carina.olsson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " I get them in the terminal when running yarn watch"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "viola.sorgato",
                "created": 1721633946751
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I couldn't figure out how to see the warnings, but this is how I think these issues are solved. Currently, the dark theme SCSS is added like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n @include m.dark-theme {\n   --color: black;\n }\n \n color: var(--color);\u00a0\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "There seems to be two options to fix it. As it is just code structure, the developers should agree on the best option and update every file accordingly."
                                }
                            ]
                        },
                        {
                            "type": "heading",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "1. Move dark-theme"
                                }
                            ],
                            "attrs": {
                                "level": 2
                            }
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Put it after any top-level property. Like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n color: var(--color);\u00a0// Property placed above the @include\n \n @include m.dark-theme { // Mixin places below the properties\n   --color: black;\n }\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Pros with this approach: No extra characters. More in line with how CSS is supposed to be written."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Cons with this approach: The light and dark color are separated by other properties."
                                }
                            ]
                        },
                        {
                            "type": "heading",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2. Wrap properties with a &"
                                }
                            ],
                            "attrs": {
                                "level": 2
                            }
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Wrap the \"base\" properties like this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".selector {\n -\u2014color: white;\n \n @include m.dark-theme { // This stays as it is\n   --color: black;\n }\n \n & { // This & wraps all properties that are not wrapped by anything else\n   color: var(--color);\u00a0\n }\n \n &--other {\n ..."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Pros with this approach: Dark color overrides are close to the light colors"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Cons with this approach: The & is added in lots of places. The "
                                },
                                {
                                    "type": "text",
                                    "text": ".selector",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " will probably be added twice in the generated CSS."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "carina.olsson",
                "created": 1721637935794
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I would go for the first suggestion, it feels like it's less intrusive & requires less changes. "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "viola.sorgato",
                                        "text": "@viola.sorgato",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " what do you think ?"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "carina.olsson",
                                        "text": "@carina.olsson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " do you have a preference ?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1721638779745
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Yes, let's go for that. That is what Natan did for the client also."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "carina.olsson",
                "created": 1721650953682
            }
        ]
    },
    {
        "key": "SA-24624",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Right now we get a slightly obscure error instead."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "sdpctl appliance upgrade prepare --image="
                        },
                        {
                            "type": "text",
                            "text": "https://username:password@https://bin.appgate-sdp.com/6.1/appliance/Appgate-SDP-6.1.6.img.zip"
                        },
                        {
                            "type": "text",
                            "text": " --no-verify\n...\n[2024-10-15T10:21:56+02:00] Preparing appliances\n [ERROR] LXC-Gateway03: failed - Cannot connect to host https:443 ssl:default [Name or service not known\n1 error occurred:\n        * prepare failed on LXC-Gateway03 failed Cannot connect to host https:443 ssl:default [Name or service not known]"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "SA-24235",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Relevant discussion "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/CU6C3DVA8/p1723455876675569",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/CU6C3DVA8/p1723455876675569"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Right now we are getting rate limited."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "$ curl -I "
                        },
                        {
                            "type": "text",
                            "text": "https://api.github.com/meta",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://api.github.com/meta"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " HTTP/2 200 date: Mon, 12 Aug 2024 09{{COLON"
                        },
                        {
                            "type": "text",
                            "text": "NUM",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "54}}24 GMT content-type: application/json; charset=utf-8 cache-control: public, max-age=60, s-maxage=60 vary: Accept,Accept-Encoding, Accept, X-Requested-With etag: W/\"442c480b4cd89be2014144c0585cf510497ed6fbc8b795660ae26a2a61960f7a\" x-github-media-type: github.v3; format=json x-github-api-version-selected: 2022-11-28 access-control-expose-headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset access-control-allow-origin: "
                        },
                        {
                            "type": "text",
                            "text": " strict-transport-security: max-age=31536000; includeSubdomains; preload x-frame-options: deny x-content-type-options: nosniff x-xss-protection: 0 referrer-policy: origin-when-cross-origin, strict-origin-when-cross-origin content-security-policy: default-src 'none' server: github.com x-ratelimit-limit: 60 x-ratelimit-remaining: 46 x-ratelimit-reset: 1723459655 x-ratelimit-resource: core x-ratelimit-used: 14 accept-ranges: bytes x-github-request-id: CE82:09C3:1605EA2",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "emoji",
                            "attrs": {
                                "shortName": "1751B0F"
                            }
                        },
                        {
                            "type": "text",
                            "text": "66B9DBCF"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Query every X minutes (e.g. 10) under rate limit and cache result. Public endpoint returns the cached value. Done."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1723456799866
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "will use Policy Engine caching instead. "
                                },
                                {
                                    "type": "text",
                                    "text": "https://sdphelp.appgate.com/adminguide/v6.3/external-calls.html?q=cache",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://sdphelp.appgate.com/adminguide/v6.3/external-calls.html?q=cache"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1723460228419
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The entitlement script for reference: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "var fields = [\"hooks\", \"web\", \"api\", \"git\", \"pages\", \"importer\"];\n\nfunction fetchGithubHosts() {\n  var response = httpGet(\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://api.github.com/meta\")"
                                },
                                {
                                    "type": "text",
                                    "text": ";"
                                },
                                {
                                    "type": "text",
                                    "text": "\n  if (response.statusCode != 200) {\n    console.log(\"Failed to query github.com hosts\");\n    return [];\n  }\n\n  var meta = JSON.parse(response.data);\n  var hosts = [];\n\n  for(var i in fields) { \n    hosts = hosts.concat(meta[fields[i]]);\n  }\n  return hosts;\n}\n\n// Cache github.com hosts for 30 minutes. Github rate limits this API to about\n// 60 calls per hour when used without a token and all gateways share the same public IP.\nreturn cache.get(\n  \"github.com hosts\",\n  () => fetchGithubHosts(),\n  30 * 60 // 30 minutes\n);"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1723463039745
            }
        ]
    },
    {
        "key": "SA-24513",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Since the learning mode is based on a license and without the license, the config generated would not have the log pushing settings. So when a controller is restarted (reboot/upgrade), an appliance websocket immediately connects and asks for a config and then it gets a wrong config."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "i.e. "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Sep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] Diff for /etc/cz-logd/config.json:\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] ---\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] +++\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] @@ -34,18 +34,5 @@\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service]          \"user\": \"czd-priv\",\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service]          \"websocket\": true\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service]      },\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -    \"role\": \"server\",\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -    \"ztp\": [\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -        {\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -            \"eventTypes\": [\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -                \"authentication_succeeded\",\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -                ******\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -                \"ip_access\"\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -            ],\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -            \"extraHeaders\": {\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -                ******\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -            },\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -            \"remoteURL\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://logpusher.usw2.ztp.donottrust.dev.appgate.com/logs\""
                        },
                        {
                            "type": "text",
                            "text": "\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -        }\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] -    ]\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service] +    \"role\": \"server\"\nSep 26 15:58:15 envy-10-98-140-2.devops cz-configd[553]: INFO [service]  }"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We can't do license loading asynchronously anymore. It needs to be loaded from the beginning."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is actually not that easy to trigger. Not sure what happened at the time really. Because configd does not pull config when controller connection is recovered."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1727439473150
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "looks like it was a config push not a pull"
                                }
                            ]
                        },
                        {
                            "type": "blockquote",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Sep 26 15{{COLON"
                                        },
                                        {
                                            "type": "text",
                                            "text": "NUM",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "58}}14 envy-10-98-140-2.devops cz-controllerd[29971]: INFO [ApplianceManager] Pushing configuration with change ID 'a69fc555-73af-40dc-b41a-13e54629a38b' to Appliance 'controller-006e5a12-821b-4414-b9c5-79408783d54d-site1'. Sep 26 15{{COLON"
                                        },
                                        {
                                            "type": "text",
                                            "text": "NUM",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "58}}14 envy-10-98-140-2.devops cz-controllerd[29971]: WARN [BYOLLicenseHandler] The license is not validated by the public key. Will try test license."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "not entirely clear why. Maybe a bug with license loading actually which triggers a push."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1727442709538
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The thing that triggered a push was the ZTP service load on startup. So it loads the services from ZTP, sees that there is log pusher service when there was none before (because we keep that info in memory), then checks the license which is not initialized yet, it assumes it doesn't have any license and goes ahead with disabled feature."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1727687979386
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Still a problem after an upgrade where configd calls "
                                },
                                {
                                    "type": "text",
                                    "text": "configuration",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " and at the time the license is not loaded yet."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1731599435432
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Also need to consider the ZTP connectivity. I think we'll have to cache the ZTP services in database."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1731674615050
            }
        ]
    },
    {
        "key": "SA-24293",
        "description": {
            "version": 1,
            "type": "doc",
            "content": [
                {
                "type": "paragraph",
                "content": [
                    {
                    "type": "text",
                    "text": "A possible upgrade sequence would look like this:"
                    }
                ]
                },
                {
                "type": "bulletList",
                "content": [
                    {
                    "type": "listItem",
                    "content": [
                        {
                        "type": "paragraph",
                        "content": [
                            {
                            "type": "text",
                            "text": "Set "
                            },
                            {
                            "type": "text",
                            "text": "all",
                            "marks": [
                                {
                                "type": "strong"
                                }
                            ]
                            },
                            {
                            "type": "text",
                            "text": " controllers in maintenance mode. NOTE: This means the upgrade API needs to keep working in maintenance mode!"
                            }
                        ]
                        }
                    ]
                    },
                    {
                    "type": "listItem",
                    "content": [
                        {
                        "type": "paragraph",
                        "content": [
                            {
                            "type": "text",
                            "text": "Upgrade one controller at a time by doing \"the dance\" (create join new version node, wait for replication, part old version node)."
                            }
                        ]
                        }
                    ]
                    },
                    {
                    "type": "listItem",
                    "content": [
                        {
                        "type": "paragraph",
                        "content": [
                            {
                            "type": "text",
                            "text": "Perform database schema migration, wait for replication."
                            }
                        ]
                        }
                    ]
                    },
                    {
                    "type": "listItem",
                    "content": [
                        {
                        "type": "paragraph",
                        "content": [
                            {
                            "type": "text",
                            "text": "Disable maintenance mode on "
                            },
                            {
                            "type": "text",
                            "text": "all",
                            "marks": [
                                {
                                "type": "strong"
                                }
                            ]
                            },
                            {
                            "type": "text",
                            "text": " controllers."
                            }
                        ]
                        }
                    ]
                    }
                ]
                },
                {
                "type": "paragraph",
                "content": [
                    {
                    "type": "text",
                    "text": "As suggested by EDB support:"
                    }
                ]
                },
                {
                "type": "blockquote",
                "content": [
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "Hi Thomas,"
                        }
                    ]
                    },
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "Thanks for detailing the process. Please note that two different activities are being carried out:"
                        }
                    ]
                    },
                    {
                    "type": "bulletList",
                    "content": [
                        {
                        "type": "listItem",
                        "content": [
                            {
                            "type": "paragraph",
                            "content": [
                                {
                                "type": "text",
                                "text": "Major upgrade (from PostgreSQL 12 to 14)."
                                }
                            ]
                            }
                        ]
                        },
                        {
                        "type": "listItem",
                        "content": [
                            {
                            "type": "paragraph",
                            "content": [
                                {
                                "type": "text",
                                "text": "Schema changes."
                                }
                            ]
                            }
                        ]
                        }
                    ]
                    },
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "At the end of the process we have a fully upgraded pg14+bdr4 cluster with the latest database schema via a rolling upgrade."
                        }
                    ]
                    },
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "We can see from the tests that the objective has been achieved, but we suggest that you carry out the two activities separately:"
                        }
                    ]
                    },
                    {
                    "type": "bulletList",
                    "content": [
                        {
                        "type": "listItem",
                        "content": [
                            {
                            "type": "paragraph",
                            "content": [
                                {
                                "type": "text",
                                "text": "Join PostgreSQL 14 node."
                                }
                            ]
                            }
                        ]
                        },
                        {
                        "type": "listItem",
                        "content": [
                            {
                            "type": "paragraph",
                            "content": [
                                {
                                "type": "text",
                                "text": "Wait for replication on all nodes."
                                }
                            ]
                            }
                        ]
                        },
                        {
                        "type": "listItem",
                        "content": [
                            {
                            "type": "paragraph",
                            "content": [
                                {
                                "type": "text",
                                "text": "Part PostgreSQL 12 node."
                                }
                            ]
                            }
                        ]
                        }
                    ]
                    },
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "Then perform the schema upgrade."
                        }
                    ]
                    },
                    {
                    "type": "paragraph",
                    "content": [
                        {
                        "type": "text",
                        "text": "Regards,"
                        },
                        {
                        "type": "hardBreak"
                        },
                        {
                        "type": "text",
                        "text": "Raphael"
                        }
                    ]
                    }
                ]
                },
                {
                "type": "paragraph",
                "content": [
                    {
                    "type": "text",
                    "text": "See "
                    },
                    {
                    "type": "text",
                    "text": "https://techsupport.enterprisedb.com/company/tickets/39705",
                    "marks": [
                        {
                        "type": "link",
                        "attrs": {
                            "href": "https://techsupport.enterprisedb.com/company/tickets/39705"
                        }
                        }
                    ]
                    }
                ]
                }
            ]
        },
        "comments": [
            {
            "body": {
                "type": "doc",
                "content": [
                {
                    "type": "paragraph",
                    "content": [
                    {
                        "type": "text",
                        "text": "This was already partially done in "
                    },
                    {
                        "type": "text",
                        "text": "https://got-youtrack.agi.appgate.com/issue/SA-24344/Database-migration-should-be-run-with-all-Postgres-BDR-nodes-on-the-same-major-version",
                        "marks": [
                        {
                            "type": "link",
                            "attrs": {
                            "href": "https://got-youtrack.agi.appgate.com/issue/SA-24344/Database-migration-should-be-run-with-all-Postgres-BDR-nodes-on-the-same-major-version"
                            }
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                    {
                        "type": "text",
                        "text": "We now do the DB migration before adding the first new postgres/bdr version node."
                    }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                    {
                        "type": "text",
                        "text": "There are further improvements we can do to our migrations though to minimize downtime and increase flexibility."
                    }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                    {
                        "type": "text",
                        "text": "See advice from EDB:"
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Hi Thomas, >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Thanks for joining the call. It was great to discuss the multiple approaches as well as do a live troubleshooting session with you. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "First of all, we established that you are separating the major upgrade procedure (from BDR 3.7 / PG 12 to PGD 4 / PG 14) from the schema migration procedure, to which you leverage the Liquibase tool. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "The first suggestion we provided to eliminate the conflicts that are happening on the Liquibase tables is to remove them from the replication set, for example: >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> SELECT bdr.replication_set_remove_table('databasechangelog');\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Another idea was to make sure the Liquibase tables are created in a separate schema instead of together with the user tables in the public schema. Apparently it's possible to do this with Liquibase as you can see from the docs. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Then we focused on the schema migration for the entire remainder of the call. First we established that the schema migration looks like this, for example to add a column with a default value and a NOT NULL constraint: "
                        }
                        ]
                    },
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> alter table on_boarded_device add column device_type text;\n> alter table on_boarded_device alter column device_type set default 'Client';\n> update on_boarded_device set device_type = 'Client';\n> alter table on_boarded_device alter column device_type set not null;\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " The challenge here is do this while the table is receiving a lot of write operations on other nodes. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "The problem with this approach, as you reported, is the migration fails because of a Global Lock Timeout. Which is expected given the table is busy on the other nodes, so Raft Consensus fails to acquire a local lock on each table, which is required for the Global Lock. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Disabling the Global Lock by setting bdr.ddl"
                        },
                        {
                            "type": "text",
                            "text": "locking = off, as recommended in our KB article, is not possible in your case either, because then the migration still fails with: "
                        }
                        ]
                    },
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> ERROR:  column \"device_type\" of relation \"on_boarded_device\" contains null values\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " This error happens at the ALTER TABLE ... SET NOT NULL, even after running the UPDATE to set all existing rows to the default value. But there are transactions arriving from the other nodes, so the table content has changed between the UPDATE and the ALTER TABLE ... SET NOT NULL. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "The challenge here is to add a column with NOT NULL in a distributed system having write operations happening on multiple nodes. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "So together we worked on multiple different approaches during the live troubleshooting session. Here I outline the most suitable procedure, which is based on the node by node schema migration strategy, with a few modifications after further discussion with you on the call and further internal analysis. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "1- On node 1, prevent application from doing new connections: "
                        }
                        ]
                    },
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> BEGIN;\n> SET LOCAL bdr.ddl_replication = off;\n> ALTER ROLE role_name SET NOLOGIN;\n> COMMIT;\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " Replacing role"
                        },
                        {
                            "type": "text",
                            "text": "name with the name of the role used by application. >",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "2- Wait until the existing application connections on node 1 have been organically disconnected, or if needed (and safe from your business point of view), cancel them. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "IMPORTANT!!: We need application downtime on the node where you are applying the migration, because otherwise it might be difficult, if possible at all, to acquire the exclusive lock when running the first ALTER TABLE. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "3- From node 1, make sure there is no lag among the nodes: "
                        }
                        ]
                    },
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> SELECT jsonb_pretty(\n> bdr.run_on_all_nodes($$\n> SELECT bdr.wait_slot_confirm_lsn(NULL, NULL);\n> $$)::jsonb\n> );\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " 4- On node 1, disable incoming transactions from the other nodes: {{CODEBLOCK5}} 5- On node 1, run the actual migration with transaction replication disabled: {{CODEBLOCK6}} As the UPDATE and ALTER TABLE ... SET NOT NULL happen in the same transaction, then you shouldn't see the error: {{CODEBLOCK7}} 6- On node 1, enable incoming transactions from the other nodes: {{CODEBLOCK8}}"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Here if transactions from the other nodes start to arrive for this table, they won't have the new column device"
                        },
                        {
                            "type": "text",
                            "text": "type. In this case, a source",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "column"
                        },
                        {
                            "type": "text",
                            "text": "missing conflict will happen on node 1, which has a default conflict resolver of use",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "default"
                        },
                        {
                            "type": "text",
                            "text": "value, which means that the row from the other node will be still applied with the default value for the new column, is what we want. >",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "7- On node 1, finally allow connections from the application: "
                        }
                        ]
                    },
                    {
                        "type": "codeBlock",
                        "attrs": {},
                        "content": [
                        {
                            "type": "text",
                            "text": "> BEGIN;\n> SET LOCAL bdr.ddl_replication = off;\n> ALTER ROLE role_name SET LOGIN;\n> COMMIT;\n> "
                        }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": " Replacing role"
                        },
                        {
                            "type": "text",
                            "text": "name with the name of the role used by application. >",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Applications will start doing transactions on node 1, which now has the new column. These transactions will be replicated to the other nodes, but they still don't have the new column. In this case, a target"
                        },
                        {
                            "type": "text",
                            "text": "column",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "missing conflict will happen, which has a default conflict resolver of ignore"
                        },
                        {
                            "type": "text",
                            "text": "if",
                            "marks": [
                            {
                                "type": "em"
                            }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "null. In this case the value won't ever be NULL because of the NOT NULL constraint, so the conflict can't be ignored and replication from node 1 to the other nodes will break. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Which is again what we want to happen. We need to prevent transactions from nodes with the new column to flow to other nodes until they have the new column too. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "8- Repeat steps 1 to 7 above to the other nodes, one by one. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "We understand it can be challenge to adapt this procedure to your Liquibase setup, but please let us know your thoughts about this procedure and how it goes. >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Warm regards, >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "William >"
                        }
                        ]
                    }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                    {
                        "type": "paragraph",
                        "content": [
                        {
                            "type": "text",
                            "text": "Access your ticket status and details easily on the EDB Support Portal at: "
                        },
                        {
                            "type": "text",
                            "text": "https://techsupport.enterprisedb.com/company/tickets/39705",
                            "marks": [
                            {
                                "type": "link",
                                "attrs": {
                                "href": "https://techsupport.enterprisedb.com/company/tickets/39705"
                                }
                            }
                            ]
                        }
                        ]
                    }
                    ]
                }
                ],
                "version": 1
            },
            "author": "thomas.cellerier",
            "created": 1725431689741
            },
            {
            "body": {
                "type": "doc",
                "content": [
                {
                    "type": "paragraph",
                    "content": [
                    {
                        "type": "text",
                        "text": "This was actually already decoupled in 6.3.4/6.4.0 by moving the database migration before adding the new node. I will close this task as obsolete, we can open a new one if needed."
                    }
                    ]
                }
                ],
                "version": 1
            },
            "author": "thomas.cellerier",
            "created": 1728894910641
            }
        ]
        },
    {
        "key": "SA-24429",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Every time I click download logs this happens"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "WARN [ApplianceWebSocketStore] Appliance 'envy-10-98-151-2_devops' did not respond in time for 'status' method with ID '6'. InterruptedException - null\n192.168.100.99 - CN=3032626534354231a535633963613330,CN=admin,OU=local \"GET /admin/appliances/status?range=0-30 HTTP/1.0\" 200 1650 \""
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-98-151-2.devops:8443/ui/system/appl>"
                        },
                        {
                            "type": "text",
                            "text": "\n{\"id\":\"a082356a-eae4-450b-befa-6259fb9b69fc\",\"timestamp\":\"2024-09-11T12:22:03.988795377Z\",\"version\":21,\"distinguished_name\":\"CN=3032626534354231a535633963613330,CN=admin,OU=local\",\"cl>\n192.168.100.99 - CN=3032626534354231a535633963613330,CN=admin,OU=local \"GET /admin/admin-messages/summarize HTTP/1.0\" 200 387 \""
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-98-151-2.devops:8443/ui/system/appliance>"
                        },
                        {
                            "type": "text",
                            "text": "\n192.168.100.99 - CN=3032626534354231a535633963613330,CN=admin,OU=local \"GET /admin/my-preferences HTTP/1.0\" 200 30 \""
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-98-151-2.devops:8443/ui/system/appliances\""
                        },
                        {
                            "type": "text",
                            "text": " \"Mozilla>\nERROR[PeerWebSocketEndpoint] [/127.0.0.1:0] Error on websocket session.\njava.nio.channels.ClosedChannelException: null\n        at org.eclipse.jetty.websocket.core.internal.WebSocketSessionState.onEof(WebSocketSessionState.java:169)\n        at org.eclipse.jetty.websocket.core.internal.WebSocketCoreSession.onEof(WebSocketCoreSession.java:253)\n        at org.eclipse.jetty.websocket.core.internal.WebSocketConnection.fillAndParse(WebSocketConnection.java:491)\n        at org.eclipse.jetty.websocket.core.internal.WebSocketConnection.onFillable(WebSocketConnection.java:349)\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314)\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100)\n        at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53)\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask(AdaptiveExecutionStrategy.java:421)\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask(AdaptiveExecutionStrategy.java:390)\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce(AdaptiveExecutionStrategy.java:277)\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run(AdaptiveExecutionStrategy.java:199)\n        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:411)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194)\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149)\n        at java.base/java.lang.Thread.run(Thread.java:1583)\nINFO [PeerWebSocketEndpoint] [/127.0.0.1:0] Websocket close. CloseReason[1006,Session Closed]\n{\"id\":\"8187799e-f4b6-4257-a137-e54a0947b40e\",\"timestamp\":\"2024-09-11T12:22:19.385111522Z\",\"version\":21,\"entity_type\":\"Appliance\",\"distinguished_name\":\"CN=3032626534354231a535633963613>\nINFO [ApplianceWebSocketStore] [a5bceda8-3dcb-4cb1-a663-b027c3819449] Appliance is offline. Cancelling the request 'status'.\n192.168.100.99 - CN=3032626534354231a535633963613330,CN=admin,OU=local \"GET /admin/appliances/status?range=0-30 HTTP/1.0\" 200 1648 \""
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-98-151-2.devops:8443/ui/system/appl>"
                        },
                        {
                            "type": "text",
                            "text": "\n - controller-324347bf-e6eb-42b7-824d-6b836ebe38d1-site1 \"POST /peer/files/8339be87-9cdf-4e68-917e-ba5e79f17f72 HTTP/1.1\" 204 0 \"-\" \"Python/3.10 aiohttp/3.8.1\" 134437\n192.168.100.99 - CN=3032626534354231a535633963613330,CN=admin,OU=local \"POST /admin/appliances/a5bceda8-3dcb-4cb1-a663-b027c3819449/logs HTTP/1.0\" 200 452182391 \""
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-98-15>"
                        },
                        {
                            "type": "text",
                            "text": "\n127.0.0.1 - - \"GET /peer/ws HTTP/1.1\" 101 0 \"-\" \"Python/3.10 aiohttp/3.8.1\" 9\nINFO [PeerWebSocketEndpoint] [[/127.0.0.1:0] New websocket connection"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "aha missed this task. Fixed here "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/stratus-controller/pull/3987",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/stratus-controller/pull/3987"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1727870433162
            }
        ]
    },
    {
        "key": "SA-24858",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "After a reboot, controllerd takes at least three minutes to start up and during that time the sign in page appears to be broken."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](Screenshot from 2024-11-29 13-27-00.png)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Would be a nice improvement if we could show an \"Appliance is starting up\" message in this situation."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "New design"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Add the loading dots (same as the ones used in lists)."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Add this text: Appliance is starting up. Please wait. (The font size is Large.)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Link to Figma / SDP Admin UI / Views / Sign-in",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://www.figma.com/design/WRkvteyo1yAmpMV622HJC4/SDP-Admin-UI-%2F-Views?node-id=146-8906"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The Figma file contains specifications for the spacing between the elements."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](startup.png){width=70%}"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Does nginx returns a specific http response code in this scenario "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "natan.abolafya",
                                        "text": "@natan.abolafya",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " ?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1732886795516
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "HTTP 503 or 501 I believe. I think there was a similar issue for showing empty banner (after logged in in that case) but I can't find it."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1732887129963
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "you can trigger it by stopping controller on an env: "
                                },
                                {
                                    "type": "text",
                                    "text": "sudo systemctl stop cz-controllerd",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1732887152058
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Thank you for the command, it looks like we get "
                                },
                                {
                                    "type": "text",
                                    "text": "HTTP502 Bad Gateway",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1732888684294
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "haha close! :D"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1732888916279
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Yes, it's a 502. These lines appear every ten seconds. "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Nov 29 12:29:25 got-kasper2.agi.appgate.com nginx_main[1068]: 2024/11/29 12:29:25 [crit] 1068#1068: *7 connect() to unix://run/cz-controllerd/application.socket failed (2: No such file or directory) while connecting to upstream, client: 127.0.0.1, server: _, request: \"GET /peer/ws HTTP/1.1\", upstream: \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://unix://run/cz-controllerd/application.socket:/peer/ws\""
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " host: \"got-kasper2.agi.appgate.com\"\nNov 29 12:29:25 got-kasper2.agi.appgate.com nginx[1068]: 2024/11/29 12:29:25 [crit] 1068#1068: *7 connect() to unix://run/cz-controllerd/application.socket failed (2: No such file or directory) while connecting to upstream, client: 127.0.0.1, server: _, request: \"GET /peer/ws HTTP/1.1\", upstream: \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://unix://run/cz-controllerd/application.socket:/peer/ws\""
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " host: \"got-kasper2.agi.appgate.com\"\nNov 29 12:29:25 got-kasper2.agi.appgate.com nginx_main[1068]: 127.0.0.1 - - [29/Nov/2024:12:29:25 +0000] \"GET /peer/ws HTTP/1.1\" 502 150 \"-\" \"Python/3.10 aiohttp/3.8.1\"\nNov 29 12:29:25 got-kasper2.agi.appgate.com cz-configd[696]: WARNING [websocket] Failed to connect to got-kasper2.agi.appgate.com, retrying in 10 seconds: 502, message='Invalid response status', url=URL('wss://got-kasper2.agi.appgate.com:443/peer/ws')"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "kasper.gustavsson",
                "created": 1732888988266
            }
        ]
    }
]