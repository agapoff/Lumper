[
    {
        "key": "ZTP-3117",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Creating a resource like this"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "onboarding[\"asset_protection\"] = {\n                        \"location\": \"foobar\",\n                        \"environment\": \"aws\",\n                        \"resources\": [\n                            {\n                                \"name\": \"thing\",\n                                \"host\": \"192.168.100.123\",\n                                \"ports\": [\"443\", \"8443\"],\n                            }\n                        ],\n                    }"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "leads to configuration error on service-deployer"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Traceback (most recent call last):\n  File \"/app/app/tasks/sdp_entities.py\", line 1517, in configure_sdp_entities\n    configured_entity = await create_f(entity)\n                        ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1138, in create_entitlement\n    response = await self._request(\"POST\", \"/entitlements\", entitlement)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 812, in handle_function\n    raise SdpAdminHTTPException(exc.response.text, exc.response.status_code)\n\napp.libraries.sdp_admin.sdp_admin.SdpAdminHTTPException: 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts\",\"message\":\"may not have duplicate names.\"}]}"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "\n[ztp-job-configure-a30b2c75adc7488c96d485a1741a160f-rs8ph] 2024-04-04 08:26:42,570: ERROR    [app.tasks.sdp_entities::configure_sdp_entities] [949a735a-59be-4cbe-9ff8-b0c41a63ce67 - thomas-4571 - Demo-Collective] Invalid entity name='thing' site=UUID('8a4add9e-0e99-4bb1-949c-c9faf9a49ad4') actions=[SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=['443', '8443'], types=[], subtype='tcp_up', monitor=SdpActionMonitor(enabled=False, timeout=30)), SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=['443', '8443'], types=[], subtype='udp_up', monitor=SdpActionMonitor(enabled=False, timeout=30)), SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=[], types=['0-255'], subtype='icmp_up', monitor=SdpActionMonitor(enabled=False, timeout=30))] condition_logic='and' conditions=[UUID('ee7b7e6f-e904-4b4f-a5ec-b3bef040643e')] app_shortcuts=[SdpAppShortcut(name='thing (HTTPS)', description=None, url='"
                        },
                        {
                            "type": "text",
                            "text": "https://192.168.100.123'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " color_code=1), SdpAppShortcut(name='thing (HTTPS)', description=None, url='"
                        },
                        {
                            "type": "text",
                            "text": "https://192.168.100.123'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " color_code=1)] app_shortcut_scripts=[] notes='' tags=['ztp', 'agaas', 'customer'] disabled=False id=None. 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts\",\"message\":\"may not have duplicate names.\"}]}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This is due to management trying to create two app shortcuts with the same name for both 443 and 8443 ports."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "[ztp-job-configure-a30b2c75adc7488c96d485a1741a160f-rs8ph] 2024-04-04 08:26:42,570: ERROR    [app.tasks.sdp_entities::configure_sdp_entities] [949a735a-59be-4cbe-9ff8-b0c41a63ce67 - thomas-4571 - Demo-Collective] Invalid entity name='thing' site=UUID('8a4add9e-0e99-4bb1-949c-c9faf9a49ad4') actions=[SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=['443', '8443'], types=[], subtype='tcp_up', monitor=SdpActionMonitor(enabled=False, timeout=30)), SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=['443', '8443'], types=[], subtype='udp_up', monitor=SdpActionMonitor(enabled=False, timeout=30)), SdpAction(id=None, type='IpAccess', action='allow', hosts=['192.168.100.123'], ports=[], types=['0-255'], subtype='icmp_up', monitor=SdpActionMonitor(enabled=False, timeout=30))] condition_logic='and' conditions=[UUID('ee7b7e6f-e904-4b4f-a5ec-b3bef040643e')] app_shortcuts=[SdpAppShortcut(name='thing (HTTPS)', description=None, url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://192.168.100.123'"
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " color_code=1), SdpAppShortcut(name='thing (HTTPS)', description=None, url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://192.168.100.123'"
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " color_code=1)] app_shortcut_scripts=[] notes='' tags=['ztp', 'agaas', 'customer'] disabled=False id=None. 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts\",\"message\":\"may not have duplicate names.\"}]}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1712219318854
            }
        ]
    },
    {
        "key": "ZTP-967",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The /notify endpoint was changed and now requires a token, which means that the email notification for servicio provisioning are not working anymore."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "ERROR:app.tasks.common:Cannot notify URL. Error: Client error '401 Unauthorized' for url '"
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service/notify'"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-288",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "This token shouldnt be stored in the BD "
                                        }
                                    ]
                                },
                                {
                                    "type": "codeBlock",
                                    "attrs": {},
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": " \nRegisterResponse {\n        \"access_token\": Token with claim having the collective id + With NO expiration + collective_id\n        \"access_url\": "
                                        },
                                        {
                                            "type": "text",
                                            "text": "http://management_url/api/register/available-services"
                                        },
                                        {
                                            "type": "text",
                                            "text": "\n    }"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "/api/sdp/register/collective",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "arturo.garcia",
                "created": 1644538857038
            }
        ]
    },
    {
        "key": "ZTP-2605",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "rule"
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Note: All of this, ONLY APPLIES TO CLOUD CONSOLE."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "rule"
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Users who complete the Wizard and transition to the Cloud Console retain the "
                        },
                        {
                            "type": "text",
                            "text": "demo",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " account"
                        },
                        {
                            "type": "text",
                            "text": "type. The Cloud Console,  places specific restrictions on actions that these \"demo\" account users can take.",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Objective"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Implement middleware restrictions to prevent \"demo\" account users from accessing certain critical pages directly via the browser's address bar."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Restrictions"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Users with the "
                        },
                        {
                            "type": "text",
                            "text": "demoaccount_type",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " should not be allowed to:"
                        }
                    ]
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Create a self-hosted collective."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Create a ZTP-hosted collective."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Deprovision their only ZTP-hosted collective."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "rule"
                },
                {
                    "type": "blockquote",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Note: We currently display alert pop-ups when a \"demo\" account user tries accessing these pages via menu options. Despite these alerts, users can navigate directly to these pages using their URL. Implementing middleware restrictions will ensure they can't bypass these restrictions."
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "rule"
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Affected Pages"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "1)\\"
                        },
                        {
                            "type": "text",
                            "text": "\\",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " Create New ZTP-Hosted Collective\\"
                        },
                        {
                            "type": "text",
                            "text": "\\",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "http://ian-test.ztp.test.local/sdp-collectives/ztp-hosted/new"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png){width=70%}"
                        }
                    ]
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Create New Self-Hosted Collective"
                                        }
                                    ]
                                },
                                {
                                    "type": "codeBlock",
                                    "attrs": {},
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "http://ian-test.ztp.test.local/sdp-collectives/self-hosted/new"
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "![](image1.png){width=70%}"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Deprovision ZTP-Hosted Collective"
                                        }
                                    ]
                                },
                                {
                                    "type": "codeBlock",
                                    "attrs": {},
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "http://ian-test.ztp.test.local/sdp-collectives/[id]/delete"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of Done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Users with \"demo\" account type cannot access the "
                                        },
                                        {
                                            "type": "text",
                                            "text": "sdp-collectives/ztp-hosted/new",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " page via the browser address bar."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Users with \"demo\" account type cannot access the "
                                        },
                                        {
                                            "type": "text",
                                            "text": "sdp-collectives/self-hosted/new",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " page via the browser address bar."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Users with \"demo\" account type cannot access the "
                                        },
                                        {
                                            "type": "text",
                                            "text": "/sdp-collectives/[id]/delete",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " page via the browser address bar."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "BLOCKED: need to discuss with team"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "ian.izaguirre",
                "created": 1697840849262
            }
        ]
    },
    {
        "key": "ZTP-175",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "curl -X 'POST' \\\n  '"
                        },
                        {
                            "type": "text",
                            "text": "http://172.22.147.119:8008/api/account'"
                        },
                        {
                            "type": "text",
                            "text": " \\\n  -H 'accept: application/json' \\\n  -H 'x-api-key: secret_api_key' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"is_active\": true,\n  \"description\": \"Acme Company\",\n  \"name\": \"acme\",\n  \"users\": [\n    {\n      \"email\": \"bob@acme.com\",\n      \"first_name\": \"Bob\",\n      \"last_name\": \"User\",\n      \"is_active\": true,\n      \"temp_password\": \"pass\",\n      \"username\": \"bob\"\n    }\n  ],\n  \"applications\": [\n    {\n      \"details\": {\n        \"controllers\": 1,\n        \"log_forwarders\": 0,\n        \"log_servers\": 0,\n        \"portals\": 0\n      },\n      \"is_active\": true,\n      \"name\": \"SDPTest\",\n      \"description\": \"SDP Test Env\",\n      \"application_type\": \"sdp\"\n    }\n  ]\n}'"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": " The POST response only include the account details and application, not users! (but the user is created) {{CODEBLOCK1}}"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2800",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Example triggered by sending an entitlement without actions: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[ztp-job-configure-e6ec6b53fad740fab2a3e76772965734-pqvkp] 2023-12-11 09:42:58,832: INFO    [httpx::_send_single_request] HTTP Request: GET "
                        },
                        {
                            "type": "text",
                            "text": "https://adm.letsgo.thomas.ztp.donottrust.dev.appgate.com:8443/admin/entitlements"
                        },
                        {
                            "type": "text",
                            "text": " \"HTTP/1.1 200 OK\"\n[ztp-job-configure-e6ec6b53fad740fab2a3e76772965734-pqvkp] 2023-12-11 09:42:58,977: INFO    [httpx::_send_single_request] HTTP Request: POST "
                        },
                        {
                            "type": "text",
                            "text": "https://adm.letsgo.thomas.ztp.donottrust.dev.appgate.com:8443/admin/entitlements"
                        },
                        {
                            "type": "text",
                            "text": " \"HTTP/1.1 422 \"\n[ztp-job-configure-e6ec6b53fad740fab2a3e76772965734-pqvkp] 2023-12-11 09:42:58,978: ERROR    [app.tasks.sdp_entities::upsert_sdp_entities] [ce902841-8ee5-4e55-b7c5-b597c51eab15 - thomas - letsgo] Invalid entity name='foo' site=UUID('8a4add9e-0e99-4bb1-949c-c9faf9a49ad4') actions=[] condition_logic='and' conditions=[UUID('ee7b7e6f-e904-4b4f-a5ec-b3bef040643e')] app_shortcuts=[] app_shortcut_scripts=[] notes='' tags=['ztp', 'agaas', 'customer'] disabled=False id=None. 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"actions\",\"message\":\"must not be empty\"}]}\n[ztp-job-configure-e6ec6b53fad740fab2a3e76772965734-pqvkp] 2023-12-11 09:42:58,979: ERROR    [app.tasks.sdp::configure]Error when configuring collective: Traceback (most recent call last):\n File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 769, in handle_function\n return await func(*args, **kwargs)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1057, in _request\n response.raise_for_status()\n File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 749, in raise_for_status\n raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '422 ' for url '"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.letsgo.thomas.ztp.donottrust.dev.appgate.com:8443/admin/entitlements'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422"
                        },
                        {
                            "type": "text",
                            "text": "\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n File \"/app/app/tasks/sdp.py\", line 964, in configure\n await configure_sdp_collective(\n File \"/app/app/tasks/wizard.py\", line 207, in configure_sdp_collective\n wizard_entitlement_ids = await upsert_wizard_entitlements(\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/app/app/tasks/wizard.py\", line 366, in upsert_wizard_entitlements\n upserted_entities = await upsert_sdp_entities(\n ^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/app/app/tasks/sdp_entities.py\", line 1480, in upsert_sdp_entities\n upserted_entity = await create_f(entity)\n ^^^^^^^^^^^^^^^^^^^^^^\n File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1092, in create_entitlement\n response = await self._request(\"POST\", \"/entitlements\", entitlement)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 771, in handle_function\n raise SdpAdminHTTPException(\napp.libraries.sdp_admin.sdp_admin.SdpAdminHTTPException: 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"actions\",\"message\":\"must not be empty\"}]}\n[ztp-job-configure-e6ec6b53fad740fab2a3e76772965734-pqvkp] 2023-12-11 09:42:58,982: INFO    [app.libraries.queue_client::publish_status] [e6ec6b53-fad7-40fa-b2a3-e76772965734] Publishing JsonRpc status job.e6ec6b53-fad7-40fa-b2a3-e76772965734.status with topic sdp_configure_result"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-1956",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "  name\": \"/app/app/tasks/sdp.py\"}\n  {\"asctime\": \"2023-06-13 15:08:48,671\", \"levelname\": \"INFO\", \"correlation_id\": \"\", \"name\": \"httpx\", \"funcName\": \"_send_single_request\", \"lineno\": 1729, \"message\": \"HTTP Request: GET "
                        },
                        {
                            "type": "text",
                            "text": "https://adm.hiru.aitor.ztp.don"
                        },
                        {
                            "type": "text",
                            "text": "  ottrust.dev.appgate.com:8443/admin/global-settings \\\"HTTP/1.1 200 OK\\\"\", \"pathname\": \"/usr/local/lib/python3.11/site-packages/httpx/_client.py\"}\n  {\"asctime\": \"2023-06-13 15:08:48,671\", \"levelname\": \"INFO\", \"correlation_id\": \"\", \"name\": \"app.tasks.sdp\", \"funcName\": \"provision\", \"lineno\": 701, \"message\": \"Updating collective name\", \"pathname\": \"/app/app/tas  ks/sdp.py\"}\n  /app/app/tasks/sdp.py:702: RuntimeWarning: coroutine 'SdpAdmin.update_global_settings' was never awaited\n    await update_sdp_global_settings(\n  RuntimeWarning: Enable tracemalloc to get the object allocation traceback"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-3013",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "See the logs we got from jeremy: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Feb 23 15:58:31 ip-10-0-0-10.eu-central-1.compute.internal systemd[1]: Starting ztp-service.service - ZTP containerized service...\nFeb 23 15:58:35 ip-10-0-0-10.eu-central-1.compute.internal sh[1827]: Error response from daemon: login attempt to "
                        },
                        {
                            "type": "text",
                            "text": "https://194335033129.dkr.ecr.us-west-2.amazonaws.com/v2/"
                        },
                        {
                            "type": "text",
                            "text": " failed with status: 400 Bad Request\nFeb 23 15:58:35 ip-10-0-0-10.eu-central-1.compute.internal systemd[1]: ztp-service.service: Control process exited, code=exited, status=1/FAILURE\nFeb 23 15:58:35 ip-10-0-0-10.eu-central-1.compute.internal systemd[1]: ztp-service.service: Failed with result 'exit-code'.\nFeb 23 15:58:35 ip-10-0-0-10.eu-central-1.compute.internal systemd[1]: Failed to start ztp-service.service - ZTP containerized service.\nFeb 23 15:58:35 ip-10-0-0-10.eu-central-1.compute.internal systemd[1]: ztp-service.service: Consumed 1.069s CPU time.\n "
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I was able to reproduce it myself: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "$ aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin ${ZTP_SERVICE_IMAGE%%/*}\nError response from daemon: login attempt to "
                        },
                        {
                            "type": "text",
                            "text": "https://194335033129.dkr.ecr.us-west-2.amazonaws.com/v2/"
                        },
                        {
                            "type": "text",
                            "text": " failed with status: 400 Bad Request"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Changing the region to match the ECR region fixes it: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "$ aws ecr get-login-password --region us-west-2 | docker login --username AWS --password-stdin ${ZTP_SERVICE_IMAGE%%/*}\nWARNING! Your password will be stored unencrypted in /home/thomas/.docker/config.json.\nConfigure a credential helper to remove this warning. See\n"
                        },
                        {
                            "type": "text",
                            "text": "https://docs.docker.com/engine/reference/commandline/login/#credentials-store"
                        },
                        {
                            "type": "text",
                            "text": "\n\nLogin Succeeded"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-327",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "For the cloud hosted one, the registration token should have an special claim to identify it as a cloud one. In the deployment process of the collective the registration workflow in SDP should be triggered via an API call:"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "https://got-teamcity.agi.appgate.com/repository/download/StratusController_Build/642448:id/api_specs.html#tag/ASC/paths/~1asc/put"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-827",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Check the new major upgrade from 3 to 4"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "react-query                      3.39.1  3.39.1 4.0.0  cloud-console     dependencies           "
                        },
                        {
                            "type": "text",
                            "text": "https://tanstack.com/query"
                        },
                        {
                            "type": "text",
                            "text": "                                   \nreact-query                      3.39.2  3.39.2 4.0.0  operator-console  dependencies           "
                        },
                        {
                            "type": "text",
                            "text": "https://tanstack.com/query"
                        },
                        {
                            "type": "text",
                            "text": "                                   \nreact-query                      3.39.2  3.39.2 4.0.0  @ztp/common       devDependencies        "
                        },
                        {
                            "type": "text",
                            "text": "https://tanstack.com/query"
                        },
                        {
                            "type": "text",
                            "text": " "
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2529",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Task description"
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The page should be structured as other Remove/Delete pages, with text and checkbox"
                                }
                            ]
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Link to the design",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://www.figma.com/file/HhkfHmiiFIcxD3gqt77Jis/ZTP-Cloud-%2F-Views?type=design&node-id=121-4292&mode=dev"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Location"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "collectives - remove"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Testing requirements before opening a Pull Request"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] Unit tests covering the new feature"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-238",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Ops have sent an updated TF plan to deploy SDP collectives. We should use it: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "@Arturo Garc\u00eda I do not have access to branch/update your repo. A new version of the terraform plan is ready, key changes:\nroot_hosted_zone variable to allow you to easily change 'tunneltrophy.net'\ncertificate_arn variable to allow you to use a pre-existing certificate\nLogServer/Forwarder appliance was removed (will restore after sdp-logging architecture has been planned)\nBreaking Change: the config file previously used "
                        },
                        {
                            "type": "text",
                            "text": "https://adm.customer.your_hosted_zone:8443/admin"
                        },
                        {
                            "type": "text",
                            "text": " now it must be "
                        },
                        {
                            "type": "text",
                            "text": "https://ctrl1.customer.your_hosted_zone:8443/admin"
                        },
                        {
                            "type": "text",
                            "text": "\nTerraform will wait until all appliances are active before completing\n\n\n\n\n\n1:22\nAlso AWS has been a little slow provisioning the second controller today so you may see the following error when the API cannot activate the controller role on an appliance that hasnt started yet\n Error: 412 Precondition Failed\n\u2502\n\u2502   with module.appgate_second_controller.appgatesdp_appliance_controller_activation.activate_second_controller[0],\n\u2502   on modules/appgate_additional_appliance/main.tf line 172, in resource \"appgatesdp_appliance_controller_activation\" \"activate_second_controller\":\n\u2502  172: resource \"appgatesdp_appliance_controller_activation\" \"activate_second_controller\" {\nIn this scenario you can re-run the terraform apply command, you do not need to destroy\n1:22\n"
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/appgate-infrastructure/sre-asc-sdp-deployer/tree/main/plans"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-122",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The exception is thrown but it seems to be empty (?) No info or error related can be extracted from it..."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "    try:\n\u00a0 \u00a0 \u00a0 \u00a0 shadmin = SecurityHubAdmin(\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 server_url=\""
                        },
                        {
                            "type": "text",
                            "text": "http://nonexistenthost\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 api_key=\"myapikey\",\n\u00a0 \u00a0 \u00a0 \u00a0 )\n\u00a0 \u00a0 \u00a0 \u00a0 tenant = await shadmin.create_tenant(\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 SecurityHubTenant(\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 is_active=True,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 name=\"Tenant1\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 saml_config=SAMLConfig(\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 audience=\"a\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 metadata=\"b\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 )\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 )\n\u00a0 \u00a0 \u00a0 \u00a0 )\n\u00a0 \u00a0 except SecurityHubException as e:\n\u00a0 \u00a0 \u00a0 \u00a0 logger.error(\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Error when trying to provision a new Security HUB tenant. Error: {e}\"\n\u00a0 \u00a0 \u00a0 \u00a0 )"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Also: I'm moving this class to the Service Deployment repo, so please push the fix to that repo."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://github.com/appgate-sdp-int/asc-service-deployment",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/appgate-sdp-int/asc-service-deployment"
                                    }
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "btw I just did some test with right SecurityHub server url and api key values but I'm still getting an exception with no info. So, it seems like it is always generating the empty exception."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "arturo.garcia",
                "created": 1637102220342
            }
        ]
    },
    {
        "key": "ZTP-1614",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Task description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the \"IDP Name\" label into \"Audience\" on the SAML & OIDC IDP Forms."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the label on the overview page from \"Name\"  into \"Audience\" ."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the column heading on the Table list page from \"Name\"  into \"Audience\"."
                                        }
                                    ]
                                },
                                {
                                    "type": "blockquote",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Note: The backend is not being renamed, so do not update the API call."
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Location"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "SAML/OIDC IDP Form"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "SAML/OIDC Overview page"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "IDP Table"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png){width=70%}"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"IDP Name\" label is renamed on the SAML Form."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"IDP Name\" label is renamed on the OIDC Form."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Name\" label is renamed on the SAML Overview page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Name\" label is renamed on the OIDC Overview page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Name\" column heading is renamed on the IDP Table list page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] If needed, refactor the current unit tests and/or MSW tests to reflect this name change."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2655",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Actions and Preconditions"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Create a demo account with account name having space in it"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Go through the wizard"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "After \"Generate Seed\", it gets stuck"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Collective is stuck in configuring state"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Observation (with screenshots if applicable)"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "In cloudwatch, you can see this"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "`[821a228c-f2ae-4e56-96c7-1d3e36648f03 - demo-00004 - Demo-Collective] Invalid entity name='Appgate Resources' site=UUID('8a4add9e-0e99-4bb1-949c-c9faf9a49ad4') actions=[SdpAction(id=None, type='IpAccess', action='exclude', hosts=['sdphelp.appgate.com'], ports=['443'], types=[], subtype='tcp_up', monitor=SdpActionMonitor(enabled=False, timeout=30))] condition_logic='and' conditions=[UUID('ee7b7e6f-e904-4b4f-a5ec-b3bef040643e')] app_shortcuts=[SdpAppShortcut(name='Cloud Console', description='Appgate ZTP administration interface. Used to manage our Appgate account and services.', url='"
                        },
                        {
                            "type": "text",
                            "text": "https://Appgate"
                        },
                        {
                            "type": "text",
                            "text": " Test.ztp.tunneltrophy.net', color_code=15), SdpAppShortcut(name='SDP User Documentation', description='Documentation on how to use the SDP client as an end user.', url='"
                        },
                        {
                            "type": "text",
                            "text": "https://sdphelp.appgate.com/userguide'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " color_code=15), SdpAppShortcut(name='SDP Administration Documentation', description='Documentation on how to configure and maintain a SDP collective.', url='"
                        },
                        {
                            "type": "text",
                            "text": "https://sdphelp.appgate.com/adminguide'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " color_code=15), SdpAppShortcut(name='Appgate SDP', description='Appgate SDP administration interface. Used to configure and manage secure access policy.', url='"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.demo-collective.demo-00004.ztp.tunneltrophy.net:8443/ui?idp=ZTP%20Provider&login=true'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " color_code=15)] app_shortcut_scripts=[] notes='' tags=['ztp', 'agaas', 'customer'] disabled=False id=None. 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts[0].url\",\"message\":\"must be a valid URL\"}]}"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Logs and/or testrail/slack links"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/C03KGL4LL0Y/p1698581096988199?thread",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/C03KGL4LL0Y/p1698581096988199?thread"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "ts=1698399965.533349&cid=C03KGL4LL0Y",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Repeatability: Probably always"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-3104",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Actions and Preconditions"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Create a demo account"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rush through the wizard and initiate seed creation"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Observation (with screenshots if applicable)"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "When the provisioning is done the request is made directly. This fails after a while with an exception in ztp-jobs. Retrying with the same GW address succeed."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Expected"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Initial seed creation request to succeed"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Logs and/or testrail/slack links"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Logs and discussion: "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/C03R2NZK20K/p1711478137697839",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/C03R2NZK20K/p1711478137697839"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Repeatability:"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "3/3"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Comment"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "There has been a change where the management query the collective status from the service deployer more often. Not sure if that might affect this."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "in service deployer: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "httpx.ReadTimeout\n\n\n  File \"/app/app/tasks/sdp.py\", line 1139, in configure\n\n    await configure_sdp_collective(\n\n...\n\n\n\n  File \"/app/app/tasks/wizard.py\", line 240, in configure_sdp_collective\n\n    await configure_wizard_policies(\n\n  File \"/app/app/tasks/wizard.py\", line 356, in configure_wizard_policies\n\n    await configure_sdp_entities(\n\n  File \"/app/app/tasks/sdp_entities.py\", line 1471, in configure_sdp_entities\n\n    all_entities = await list_f()"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "in the controller: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2024-03-26T18:31:47.176130+0000 nginx_admin[2293]: 2024/03/26 18:31:47 [info] 2293#2293: *2 epoll_wait() reported that client prematurely closed connection, so upstream connection is closed too while sending request to upstream, client: 10.0.0.48, server: _, request: \"GET /admin/policies HTTP/1.1\", upstream: \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://unix://run/cz-controllerd/application.socket:/admin/policies\""
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " host: \"adm.demo-collective.dc50.ztp.donottrust.dev.appgate.com:8443\"\n2024-03-26T18:31:47.176179+0000 nginx_admin[2293]: 10.0.0.48 - - [26/Mar/2024:18:31:47 +0000] \"GET /admin/policies HTTP/1.1\" 499 0 \"-\" \"python-httpx/0.26.0\""
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "So it seems like we should increase the http read timeout in service deployer's SDP admin class, as the initial API call to a controller can be slower."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1711542216938
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "See "
                                },
                                {
                                    "type": "text",
                                    "text": "https://www.python-httpx.org/advanced/timeouts/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://www.python-httpx.org/advanced/timeouts/"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Another approach could be doing retries here."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1711542477906
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "20 seconds to read policies? "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2024-03-26T18:31:57.665448+0000 cz-controllerd[1849]: 10.0.0.48 - CN=e8305cb3321747e1b9e5b123a0a54f03,CN=admin,OU=local [26/Mar/2024:18:31:57 +0000] \"GET /admin/policies HTTP/1.0\" 200 0 \"-\" \"python-httpx/0.26.0\" 20489"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1711543378881
            }
        ]
    },
    {
        "key": "ZTP-1773",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "When viewing an account in the operator console and it has no collectives, if you click the 'Add' button, rather than navigating to the page to create a collective, it navigates to the collective details page for a collective that doesn't exist. "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Current link: "
                        },
                        {
                            "type": "text",
                            "text": "https://operator.REGION.ztp.DOMAIN/accounts/ACCOUNT-ID/sdp-collectives/new"
                        },
                        {
                            "type": "text",
                            "text": "\nIt should be: "
                        },
                        {
                            "type": "text",
                            "text": "https://operator.REGION.ztp.DOMAIN/accounts/ACCOUNT-ID/sdp-collectives/ztp-hosted/new"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": " ![](image1.png) ![](image.png){width=70%}"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-1725",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "AFter the latest renovate major update "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/appgate-sdp-int/beacon-frontend/pull/992",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/appgate-sdp-int/beacon-frontend/pull/992"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " Storybook is broken "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "beacon-frontend$ yarn run storybook:design-system\nyarn run v1.22.19\n$ yarn workspace design-system run storybook\n$ start-storybook -p 6006\n/bin/sh: 1: start-storybook: not found\nerror Command failed with exit code 127.\ninfo Visit "
                        },
                        {
                            "type": "text",
                            "text": "https://yarnpkg.com/en/docs/cli/run"
                        },
                        {
                            "type": "text",
                            "text": " for documentation about this command.\nerror Command failed.\nExit code: 127\nCommand: /home/hadrien/.nvm/versions/node/v16.17.0/bin/node\nArguments: /usr/share/yarn/lib/cli.js run storybook\nDirectory: /home/hadrien/git/beacon-frontend/packages/design-system\nOutput:\n\ninfo Visit "
                        },
                        {
                            "type": "text",
                            "text": "https://yarnpkg.com/en/docs/cli/workspace"
                        },
                        {
                            "type": "text",
                            "text": " for documentation about this command.\nerror Command failed with exit code 127.\ninfo Visit "
                        },
                        {
                            "type": "text",
                            "text": "https://yarnpkg.com/en/docs/cli/run"
                        },
                        {
                            "type": "text",
                            "text": " for documentation about this command."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": " We should probably use Storybook 7 so we should try to find the cause for it. But we can also revert to 6.5 if it requires some other packages update that are not available"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Also I thought there was some github action checks making sure that storybook was running but I think I'm confusing it with SDP We should discuss a way to ensure that storybook runs without issues"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Storybook is running again for CC"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " The migration to storybook 7 is pretty involved. I'm going to downgrade us, add this to the renovate ignore. If design wants to use 7, they can make the request and we can budget it in at that time."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1682354697925
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": "  I lied. Downgrading is even more of a pain, so I'm just doing the upgrade."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1682356657378
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I fixed it for the cloud console. There needs to be a followup task to fix the design system and the operator console. They have an error I don't understand around SCSS files."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1682360897612
            }
        ]
    },
    {
        "key": "ZTP-2797",
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Steps to reproduce :"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "In the advisor:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "aitorbot build shell"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "and then"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "make test"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "then you get:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "=== RUN   TestLogReceive\n--- PASS: TestLogReceive (0.01s)\n=== RUN   TestLogRejected\n--- PASS: TestLogRejected (0.00s)\n=== RUN   TestLogRetention\n\n**********************************************************************************************\nRyuk has been disabled for the current execution. This can cause unexpected behavior in your environment.\nMore on this: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://golang.testcontainers.org/features/garbage_collector/"
                                },
                                {
                                    "type": "text",
                                    "text": "\n**********************************************************************************************\n    loghandler_test.go:118: Could not start mongo database: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?: failed to create container\n--- FAIL: TestLogRetention (0.00s)\nFAIL\nFAIL\tgithub.com/appgate-sdp-int/ztp-advisor/internal/loghandler\t0.063s\n?   \tgithub.com/appgate-sdp-int/ztp-advisor/internal/users\t[no test files]\n?   \tgithub.com/appgate-sdp-int/ztp-advisor/internal/utils\t[no test files]\n?   \tgithub.com/appgate-sdp-int/ztp-advisor/internal/xsync\t[no test files]\n=== RUN   TestLook"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1702024497319
            }
        ]
    },
    {
        "key": "ZTP-3040",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This concerns at least the following service deployer states: error, deprovisioned. The logic should be the same as for collective deprovisioning."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "With error state: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[ztp-management-internal-5f7698995d-cjmmk] 2024-03-05 10:12:29,355: ERROR    [app.logic.account_logic::deprovision_account]Error when trying to delete account.: Traceback (most recent call last):\n File \"/src/app/libraries/http_json_client.py\", line 35, in handle_function\n return await func(*args, **kwargs)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/http_json_client.py\", line 160, in _request\n response.raise_for_status()\n File \"/home/ztp/.local/lib/python3.11/site-packages/httpx/_models.py\", line 761, in raise_for_status\n raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '400 Bad Request' for url '"
                        },
                        {
                            "type": "text",
                            "text": "http://ztp-service-deployer/api/v1/account/fb1c1e92-b067-45de-b144-b912aa405809'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400"
                        },
                        {
                            "type": "text",
                            "text": "\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n File \"/src/app/logic/account_logic.py\", line 411, in deprovision_account\n deployment_response = await service_deployment_account_client.delete_account(\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/utils.py\", line 196, in handle_function\n result = await func(*args, **kwargs)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/service_deployment/service_deployment_account.py\", line 63, in delete_account\n return await self._request(\n ^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/http_json_client.py\", line 40, in handle_function\n raise ErrorMessageException(\napp.request_error_message_exception.ErrorMessageException: Error: {\"detail\":\"Can not delete an account with status error without force flag\"}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "With deprovisioned state (after force deprovisioning via servicectl). "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[ztp-management-internal-5f7698995d-4p6ct] 2024-03-05 10:14:01,490: ERROR    [app.logic.account_logic::deprovision_account]Error when trying to delete account.: Traceback (most recent call last):\n File \"/src/app/libraries/http_json_client.py\", line 35, in handle_function\n return await func(*args, **kwargs)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/http_json_client.py\", line 160, in _request\n response.raise_for_status()\n File \"/home/ztp/.local/lib/python3.11/site-packages/httpx/_models.py\", line 761, in raise_for_status\n raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '400 Bad Request' for url '"
                        },
                        {
                            "type": "text",
                            "text": "http://ztp-service-deployer/api/v1/account/fb1c1e92-b067-45de-b144-b912aa405809'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400"
                        },
                        {
                            "type": "text",
                            "text": "\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n File \"/src/app/logic/account_logic.py\", line 411, in deprovision_account\n deployment_response = await service_deployment_account_client.delete_account(\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/utils.py\", line 196, in handle_function\n result = await func(*args, **kwargs)\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/service_deployment/service_deployment_account.py\", line 63, in delete_account\n return await self._request(\n ^^^^^^^^^^^^^^^^^^^^\n File \"/src/app/libraries/http_json_client.py\", line 40, in handle_function\n raise ErrorMessageException(\napp.request_error_message_exception.ErrorMessageException: Error: {\"detail\":\"Deployment was already deprovisioned\"}"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I'm suspecting \"provisioning"
                                },
                                {
                                    "type": "text",
                                    "text": "error\" is also concerned by this.",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1709634026279
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Since I see this is in progress, I have two accounts stuck in that state if you want to test it: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/145bb871-bfc0-4efc-9170-6b429bf03cd2",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/145bb871-bfc0-4efc-9170-6b429bf03cd2"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " "
                                },
                                {
                                    "type": "text",
                                    "text": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/fb1c1e92-b067-45de-b144-b912aa405809",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/fb1c1e92-b067-45de-b144-b912aa405809"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1710161223766
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "FYI I still can't deprovision this account: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/fb1c1e92-b067-45de-b144-b912aa405809",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://operator.usw2.ztp.donottrust.dev.appgate.com/accounts/fb1c1e92-b067-45de-b144-b912aa405809"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is the error in service deployer: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2024-03-12T14:07:01.187950770Z {\"asctime\": \"2024-03-12 14:07:01,187\", \"levelname\": \"WARNING\", \"correlation_id\": \"681d6f5e-614c-4198-9e91-e376c3481e1a\", \"name\": \"app.routers.deployment\", \"funcName\": \"validate_delete\", \"lineno\": 1575, \"message\": \"Deployment cannot be deleted. Deployment was already deprovisioned\", \"pathname\": \"/app/app/routers/deployment.py\"}\n2024-03-12T14:07:01.197737954Z INFO:     127.0.0.6:50059 - \"DELETE /api/v1/account/fb1c1e92-b067-45de-b144-b912aa405809 HTTP/1.1\" 400 Bad Request"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1710252502556
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Solved in "
                                },
                                {
                                    "type": "text",
                                    "text": "https://got-youtrack.agi.appgate.com/issue/ZTP-2871/Investigate-and-if-possible-refactor-logic-to-make-service-deployer-the-source-of-truth-for-account-status",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://got-youtrack.agi.appgate.com/issue/ZTP-2871/Investigate-and-if-possible-refactor-logic-to-make-service-deployer-the-source-of-truth-for-account-status"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1710427896648
            }
        ]
    },
    {
        "key": "ZTP-337",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "For internal UI console access we might want to have the API endpoints restricted so they can only be accessed when connected through Appgate SDP. Currently we use the same API endpoints for both internal and account owners management, so we need to define there what to do."
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Separate API apps"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Separate API paths"
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Some comments from "
                                        },
                                        {
                                            "type": "mention",
                                            "attrs": {
                                                "id": "abraham.french",
                                                "text": "@abraham.french",
                                                "accessLevel": ""
                                            }
                                        },
                                        {
                                            "type": "text",
                                            "text": " :"
                                        }
                                    ]
                                },
                                {
                                    "type": "blockquote",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "We need some clarity on the way we need to build out the ASC Management APIs as well as the \"Version Checking\" service APIs ASC Rest API options: 1. Single set up Rest APIs, certain functionality restricted by user being in the internal Appgate Account (Keycloak Master Realm) 2. Single set of Rest APIs with a subset of routes prefixed with "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "/internal",
                                                    "marks": [
                                                        {
                                                            "type": "code"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "text",
                                                    "text": " that the user must be in the internal Appgate Account (Keycloak Master Realm) 3. Single set of Rest APIs with a subset of routes prefixed with "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "/internal",
                                                    "marks": [
                                                        {
                                                            "type": "code"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "text",
                                                    "text": " that the ingress of Kubernetes uses the caller's Port Number to route access to the functionality. 4. Two sets of Rest APIs that are running on two different apps that share the same code base, but have different environmental variables that change the Endpoints that are exposed that the ingress of Kubernetes uses the caller's Port Number to route to 5. Two sets of Rest APIs from two different apps that call into a common set of libraries that the ingress of Kubernetes uses the caller's Port Number to route to >"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "gokhan.berberoglu",
                                        "text": "@gokhan.berberoglu",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": "  10:29 no need to create two process / deployments.. I've never seen it done like that prefixing backoffice/ops related api's with /internal is good enough we can deny all /internal on 443 and serve /internal on 8443 in the ingress controller and seperating the port will allow us to enforce ip restrictions for example, back office will be only available to employees if they're connected via appgate sdp"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "abraham.french",
                                        "text": "@abraham.french",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": "  10:31 So, you prefer option 3? Or, option 4?"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "gokhan.berberoglu",
                                        "text": "@gokhan.berberoglu",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " 10:33 3 that is how we do it in sdp appliances also"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1645634172787
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This one is the same as: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://got-youtrack.agi.appgate.com/issue/ASC-399",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://got-youtrack.agi.appgate.com/issue/ASC-399"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " so marking this as duplicate"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "arturo.garcia",
                "created": 1646882613524
            }
        ]
    },
    {
        "key": "ZTP-328",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "In the RegisterResponse we should return more info about the account so it can be showed/used in the SDP Admin UI."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The console"
                        },
                        {
                            "type": "text",
                            "text": "url should be generated dinamically using the ACCOUNT",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "DOMAIN config param (this param is being added in ZTP-299)"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n\"access_token\": \"blabla\",\n\"access_url\":\""
                        },
                        {
                            "type": "text",
                            "text": "http://url-tosend-token\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n\"account_id\":uuid,\n\"account_name\": \"myaccount\",\n\"console_url\":\""
                        },
                        {
                            "type": "text",
                            "text": "https://myaccount.asc.appgate.net\""
                        },
                        {
                            "type": "text",
                            "text": "\n}"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-518",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The service deployment service is sending back a wrong object after provisioning an account."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n   \"account_name\":\"emailcompany\",\n   \"notify_url\":\""
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt-int.asc.donottrust.dev.appgate.com/api/internal/account/notify\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n   \"service_name\":null,\n   \"id\":\"211a1f85-5589-4a64-a4ef-b2cb88b0f52b\",\n   \"service_type\":\"account\",\n   \"status\":\"finished\",\n   \"created_at\":\"2022-04-19T22:16:36.495257\",\n   \"last_update\":\"2022-04-19T22:16:36.658027\",\n   \"status_detail\":\"DNS domain record emailcompany.asc.donottrust.dev.appgate.com was provisioned succesfully\",\n   \"details\":{\n      \"auth_config\":null,\n      \"collective_id\":null,\n      \"access_url\":null,\n      \"admin_password_encrypted\":null,\n      \"asc_registration_token\":null,\n      \"collective_status\":null\n   }\n}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": " The details objects which is used in the account provisioning to send the email notification is encoded as an SDPDeployment object instead of AccountDeployment"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-3257",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "A problem is happening in ztp-email service at the moment of loading message coming from SQS in a EMailEvent sturcture:"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "File \"/src/app/tasks/email_events.py\", line 27, in process_message\u00a0\u00a0\u00a0\u00a0email_event = EMailEvent(event)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0^^^^^^^^^^^^^^^^^^^File \"/venv/lib/python3.12/site-packages/pydantic/main.py\", line 176, in init\u00a0\u00a0\u00a0\u00a0self.pydantic_validator.validate_python(data, self_instance=self)pydantic_core._pydantic_core.ValidationError: 1 validation error for EMailEventto.0Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]\u00a0\u00a0\u00a0\u00a0For further information visit "
                        },
                        {
                            "type": "text",
                            "text": "https://errors.pydantic.dev/2.7/v/string_type"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-4277",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "1. Handle Next.js 16 Breaking Changes"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename "
                                        },
                                        {
                                            "type": "text",
                                            "text": "middleware.ts",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " \u2192 "
                                        },
                                        {
                                            "type": "text",
                                            "text": "proxy.ts",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " where applicable."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Update file locations and routing conventions per Next.js 16 requirements."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Verify middleware matchers continue to work correctly after migration."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "References:"
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "https://nextjs.org/blog/next-16-beta#deprecations",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://nextjs.org/blog/next-16-beta#deprecations"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "https://nextjs.org/docs/app/guides/upgrading/version-16",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://nextjs.org/docs/app/guides/upgrading/version-16"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "2. Upgrade Framework"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Update both applications to Next.js 16 once compatibility issues are resolved."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "This upgrade will enable Turbopack by default in development, improving HMR and local performance."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "3. [Optional, only if simple] Enable Typed Routes ("
                        },
                        {
                            "type": "text",
                            "text": "typedRoutes: true",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": ")"
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "next.js.config"
                                }
                            ]
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "In both operator console and cloud console, add "
                                        },
                                        {
                                            "type": "text",
                                            "text": "typedRoutes: true,",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " to and fix any errors that show when running "
                                        },
                                        {
                                            "type": "text",
                                            "text": "yarn build",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " so our types are improved. ("
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/blog/next-15-5?utm",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/blog/next-15-5?utm"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "source=chatgpt.com#typed-routes-stable) .... ",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/docs/app/api-reference/config/typescript#statically-typed-links",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                },
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/docs/app/api-reference/config/typescript#statically-typed-links"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Also run the following command in both projects to see what errors show "
                                        },
                                        {
                                            "type": "text",
                                            "text": "npx next typegen && tsc --noEmit",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " ("
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/blog/next-15-5?utm",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/blog/next-15-5?utm"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "source=chatgpt.com#next-typegen)",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-1710",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Once we have the secret, IAM role and SDP resources set up we can create the actual autoscaling group and its related resources:"
                        }
                    ]
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Security Group"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Launch template (adding the user data)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Autoscaling group"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Load balancer configuration"
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Once this is done, we have working autoscaling hosted gateways."
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "See "
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://got-youtrack.agi.appgate.com/issue/ZTP-1607/Investigate-provisioning-of-Hosted-Gateways",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://got-youtrack.agi.appgate.com/issue/ZTP-1607/Investigate-provisioning-of-Hosted-Gateways"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "See POC "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/ztp-1607-hosted-gateways/app/app/resources/tfplan-ops/autoscaling",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/ztp-1607-hosted-gateways/app/app/resources/tfplan-ops/autoscaling"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "gateways/autoscale",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "gateways.py"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1681290918334
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is the userdata we are using for now, it would be nice if we can manage to do this without installing the AWS CLI: \\"
                                },
                                {
                                    "type": "text",
                                    "text": "\\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "\\"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1681458873618
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "See e.g. what "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "daniel.nilsson",
                                        "text": "@daniel.nilsson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " did here "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/stratus-logging/pull/493/files#diff-a88d8757b460880816e896613eebb02df0550d4e16972691b7533db7691a7b19R29-R36",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/stratus-logging/pull/493/files#diff-a88d8757b460880816e896613eebb02df0550d4e16972691b7533db7691a7b19R29-R36"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "# "
                                },
                                {
                                    "type": "text",
                                    "text": "https://docs.aws.amazon.com/pdfs/AmazonECRPublic/latest/APIReference/ecr-public-api.pdf#API_GetAuthorizationToken"
                                },
                                {
                                    "type": "text",
                                    "text": "\ntoken=$(curl -X POST --data {} \\\n-H \"X-Amz-Target: SpencerFrontendService.GetAuthorizationToken\" \\\n-H \"Content-Type: application/x-amz-json-1.1\" \\\n--aws-sigv4 \"aws:amz:us-east-1:ecr-public\" \\\n--user \"${AWS_ACCESS_KEY_ID}:${AWS_SECRET_ACCESS_KEY}\" \\\n"
                                },
                                {
                                    "type": "text",
                                    "text": "https://api.ecr-public.us-east-1.amazonaws.com"
                                },
                                {
                                    "type": "text",
                                    "text": " | jq -r \".authorizationData.authorizationToken\"\n)"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1681458940422
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "run "
                                },
                                {
                                    "type": "text",
                                    "text": "aws secretsmanager get-secret-value --secret-id {secret_arn}  --debug",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " on localhost and inspect the headers, api URL to figure out the correct X-Amz-Target value"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "daniel.nilsson",
                "created": 1681460493005
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "With nimis now in place the question is if we want to use an autoscaling group or provision individual gateways."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It depends if we want the number of gateways to be automatically scalable or configured via service deployer."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1708604670028
            }
        ]
    },
    {
        "key": "ZTP-2764",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "As part of this, also resolve errors/warnings that Snyk finds."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Issues to fix by upgrading:\n\n  Upgrade org.eclipse.parsson:parsson@1.1.2 to org.eclipse.parsson:parsson@1.1.4 to fix\n  \u2717 Improper Input Validation [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-ORGECLIPSEPARSSON-6044728]"
                                },
                                {
                                    "type": "text",
                                    "text": " in org.eclipse.parsson:parsson@1.1.2\n    introduced by org.eclipse.parsson:parsson@1.1.2\n\n\nIssues with no direct upgrade or patch:\n  \u2717 Denial of Service (DoS) [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-ORGGRAALVMSDK-6026490]"
                                },
                                {
                                    "type": "text",
                                    "text": " in org.graalvm.sdk:graal-sdk@23.0.1\n    introduced by org.graalvm.sdk:graal-sdk@23.0.1\n  No upgrade or patch available\n\n\n\nOrganization:      appgate-nondistributed\nPackage manager:   maven\nTarget file:       /opt/keycloak/lib/lib/boot\nProject name:      asc-auth:latest:/opt/keycloak/lib/lib/boot\nDocker image:      asc-auth:latest\nLocal Snyk policy: found\nLicenses:          enabled"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "rafael.soto",
                "created": 1702399893079
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Testing asc-auth:latest...\n\nTested 84 dependencies for known issues, found 1 issue.\n\n\nIssues with no direct upgrade or patch:\n  \u2717 Cross-site Scripting (XSS) [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-IOSMALLRYE-2993220]"
                                },
                                {
                                    "type": "text",
                                    "text": " in io.smallrye:smallrye-health-ui@4.0.4\n    introduced by io.smallrye:smallrye-health-ui@4.0.4\n  No upgrade or patch available\n\n\n\nOrganization:      appgate-nondistributed\nPackage manager:   maven\nTarget file:       /opt/keycloak/lib/lib/deployment\nProject name:      asc-auth:latest:/opt/keycloak/lib/lib/deployment\nDocker image:      asc-auth:latest\nLocal Snyk policy: found\nLicenses:          enabled\n\nSnyk found some vulnerabilities in your image applications (Snyk searches for these vulnerabilities by default). See "
                                },
                                {
                                    "type": "text",
                                    "text": "https://snyk.co/app-vulns"
                                },
                                {
                                    "type": "text",
                                    "text": " for more information."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "rafael.soto",
                "created": 1702399911887
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "\nTesting asc-auth:latest...\n\nTested 315 dependencies for known issues, found 3 issues.\n\n\nIssues to fix by upgrading:\n\n  Upgrade org.apache.santuario:xmlsec@2.2.3 to org.apache.santuario:xmlsec@2.2.6 to fix\n  \u2717 Insertion of Sensitive Information into Log File [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-ORGAPACHESANTUARIO-6017551]"
                                },
                                {
                                    "type": "text",
                                    "text": " in org.apache.santuario:xmlsec@2.2.3\n    introduced by org.apache.santuario:xmlsec@2.2.3\n\n  Upgrade org.keycloak:keycloak-ldap-federation@22.0.5 to org.keycloak:keycloak-ldap-federation@23.0.1 to fix\n  \u2717 LDAP Injection (new) [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-ORGKEYCLOAK-6095075]"
                                },
                                {
                                    "type": "text",
                                    "text": " in org.keycloak:keycloak-ldap-federation@22.0.5\n    introduced by org.keycloak:keycloak-ldap-federation@22.0.5\n\n  Upgrade org.keycloak:keycloak-services@22.0.5 to org.keycloak:keycloak-services@23.0.1 to fix\n  \u2717 LDAP Injection (new) [Medium Severity]["
                                },
                                {
                                    "type": "text",
                                    "text": "https://security.snyk.io/vuln/SNYK-JAVA-ORGKEYCLOAK-6095074]"
                                },
                                {
                                    "type": "text",
                                    "text": " in org.keycloak:keycloak-services@22.0.5\n    introduced by org.keycloak:keycloak-services@22.0.5\n\n\n\nOrganization:      appgate-nondistributed\nPackage manager:   maven\nTarget file:       /opt/keycloak/lib/lib/main\nProject name:      asc-auth:latest:/opt/keycloak/lib/lib/main\nDocker image:      asc-auth:latest\nLocal Snyk policy: found\nLicenses:          enabled"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "rafael.soto",
                "created": 1702399953172
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Initial snyk scan on the auth repo found 6 issues"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "rafael.soto",
                "created": 1702399981043
            }
        ]
    },
    {
        "key": "ZTP-4276",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "1. Handle Next.js 16 Breaking Changes"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename "
                                        },
                                        {
                                            "type": "text",
                                            "text": "middleware.ts",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " \u2192 "
                                        },
                                        {
                                            "type": "text",
                                            "text": "proxy.ts",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " where applicable."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Update file locations and routing conventions per Next.js 16 requirements."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Verify middleware matchers continue to work correctly after migration."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "References:"
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "https://nextjs.org/blog/next-16-beta#deprecations",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://nextjs.org/blog/next-16-beta#deprecations"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "https://nextjs.org/docs/app/guides/upgrading/version-16",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://nextjs.org/docs/app/guides/upgrading/version-16"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "2. Upgrade Framework"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Update both applications to Next.js 16 once compatibility issues are resolved."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "This upgrade will enable Turbopack by default in development, improving HMR and local performance."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "3. [Optional, only if simple] Enable Typed Routes ("
                        },
                        {
                            "type": "text",
                            "text": "typedRoutes: true",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": ")"
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "next.js.config"
                                }
                            ]
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "In both operator console and cloud console, add "
                                        },
                                        {
                                            "type": "text",
                                            "text": "typedRoutes: true,",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " to and fix any errors that show when running "
                                        },
                                        {
                                            "type": "text",
                                            "text": "yarn build",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " so our types are improved. ("
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/blog/next-15-5?utm",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/blog/next-15-5?utm"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "source=chatgpt.com#typed-routes-stable) .... ",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/docs/app/api-reference/config/typescript#statically-typed-links",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                },
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/docs/app/api-reference/config/typescript#statically-typed-links"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Also run the following command in both projects to see what errors show "
                                        },
                                        {
                                            "type": "text",
                                            "text": "npx next typegen && tsc --noEmit",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " ("
                                        },
                                        {
                                            "type": "text",
                                            "text": "https://nextjs.org/blog/next-15-5?utm",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://nextjs.org/blog/next-15-5?utm"
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "source=chatgpt.com#next-typegen)",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-4190",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "User should be able to use the change password screen on both 2FA and non-2FA enabled accounts."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "NOTE: The new property being added to the payload we send when changing the password that will handle the one-time-password is called "
                        },
                        {
                            "type": "text",
                            "text": "totp",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " and it is required for STANDARD users but a DEMO user should never have the option for it since they do not have that auth setup."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Additionally, an E2E test should be added that tests the change password screen on a 2FA enabled account."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The request should look like the appended request.txt. The UI page should look like the existing one but with an additional \"OTP\" field in addition to the existing password fields. This could change if a different design is preferred. Regarding the design, one question is if we want to style it like the OTP login dialogue rather than as an additional field on the existing form."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image1.png){width=70%}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png){width=70%}"
                        },
                        {
                            "type": "text",
                            "text": "request.txt",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "request.txt"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Testing requirements before opening a Pull Request"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[ ] Unit tests covering the new feature"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[ ] Integration tests that make sure the new feature is called / used"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[ ] Storybook is updated"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "carina.olsson",
                                        "text": "@carina.olsson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " we would like design's feedback on this. Specifically on if the one time value should just be passed as an additional field or not."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "torger.miller",
                "created": 1757451016600
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " for the next sprint/design review. Minimal effort. As torger says, there are changes to how the OTP field is going to be presented to the user in keycloak so that it resembles the admin UI's inputs."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Within the application is new territory though. For this page, the user is attempting to change their password from within the cloud console while already logged in, but for the request to work, the user must also input an OTP code."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I have a couple thoughts on this:"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Easy path: We just treat it like any other form field, and probably add an info message below saying to use the same OTP code they use to log in normally"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Fancy path:"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Form stays the same as it is now. When the user presses submit, a modal pops up with a stylized OTP entry form, request proceeds upon entry. We wait for the response, if the error is with the OTP, allow the user to reenter from the modal, if it's with the form, close the modal and fix the form error."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1757453279504
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Just realized "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " asked about this ticket a while ago. (EDIT: Or realizing, Hadrien reminded us, but "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "torger.miller",
                                        "text": "@torger.miller",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " asked first :) )"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is the design:"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "![](Screenshot 2025-09-22 at 08.44.36.png)"
                                }
                            ]
                        },
                        {
                            "type": "bulletList",
                            "content": [
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "When clicking Save, an modal is displayed \u2013 horizontally centered in the viewport, but not vertically centered (We have other modals in ZTP, right? In that case vertical position should be the same for all.)"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "When clicking Continue in this new modal, the changes are saved and a toast confirming the changes appears."
                                                }
                                            ]
                                        },
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "This is the suggested text for copypasting (suggestions on how to improve the text are always appreciated):"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "blockquote",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Further Authentication Required To update the password, provide a one-time password from your authenticator app."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "carina.olsson",
                "created": 1758524054603
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "One additional note. We should only request the 2FA value on standard accounts. 2FA will not be enabled on demo accounts."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "torger.miller",
                "created": 1758556344534
            }
        ]
    },
    {
        "key": "ZTP-3586",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "When trying to reach a discovered app that doesn't exists controller returns HTTP500 instead of HTTP404"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "To reproduce"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "With discovered app setup (see the steps in the story)"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "go to "
                                        },
                                        {
                                            "type": "text",
                                            "text": "/ui/usage/discovered-apps/view/potato",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Current"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "http 500 with "
                        },
                        {
                            "type": "text",
                            "text": "Internal server error. ZTP Advisor connection failed.",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Expected"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "http 404"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Looking at code and the logs, it appears that ZTP is not returning us a 404 for ids not being found."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Controller:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2024-10-29T12:36:25.006269+0000 cz-controllerd[2417]: WARN [OperationExceptionMapper] Handled operation error: ZTP Advisor connection failed.\n2024-10-29T12:36:25.016717+0000 cz-controllerd[2417]: 192.168.100.231 - CN=3964313964624832a136626365306431,CN=admin,OU=local \"GET /admin/discovered-apps/bla HTTP/1.0\" 500 96 \""
                                },
                                {
                                    "type": "text",
                                    "text": "https://envy-10-98-158-2.devops:8443/ui/usage/discovered-apps\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:131.0) Gecko/20100101 Firefox/131.0\" 785"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "ZTP Advisor:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "ERROR [d3ecccb2-9a8c-49d6-8a5c-737ab9c85418][getDetails][resthandler] Failed to get details for: bla mongo: no documents in result"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I suspect that (using Mongo) app ids are stored as UUIDs or ObjectIds and might be failing due to a malformed ID. If that's the case a more accurate result from the Advisor would be a 400 for malformed data or to quick return a 404 knowing that a malformed ID will never be found in the DB."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christopher.cox",
                "created": 1730206980984
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "blockquote",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": " due to a malformed ID"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Just a note on this one, I can see the same behavior with a \"normal\" ID (ex: "
                                },
                                {
                                    "type": "text",
                                    "text": "c13a62aa88527faf",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " instead of  "
                                },
                                {
                                    "type": "text",
                                    "text": "c13a62aa88527caf",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": ")"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1730211738329
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Ok, I will take another look."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christopher.cox",
                "created": 1730219454664
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "per.leino",
                                        "text": "@per.leino",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " - Looks like the error is still the same in the advisor when the app id is missing."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1730221582967
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "why are you requesting a none exiting appID?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1730273758186
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "And is it getDetails that is used for the request?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1730273851545
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "To make sure that the system isn't behaving badly if that happens for some reason."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Yes."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1730274184715
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Ok.. i think this will take care it: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/ztp-advisor/pull/211",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/ztp-advisor/pull/211"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " then you will get a 404 instead"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.leino",
                "created": 1730284152945
            }
        ]
    },
    {
        "key": "ZTP-2317",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Reported by Ian:"
                        }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Also I think I found\u00a0 a bug... when I submitted the hostname like 5 minutes ago, after polling for like 20 seconds, I got a gateway"
                                },
                                {
                                    "type": "text",
                                    "text": "seed value ..... but then right after that I clicked the \"previous\" step and submitted the same hostname and now the polling never returns a value for gateway",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "seed ...... not sure if its a bug because of me doing it too fast or if its a backend logic bug?"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "blockquote",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "STEPS I TAKE TO REPRODUCE IT:"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Click \"Save\" on hostname/IP form with a value of \"lorem.ipsum\", now I am on the \"gateway"
                                        },
                                        {
                                            "type": "text",
                                            "text": "seeding\" step.",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Polling starts,\u00a0until \"gateway"
                                        },
                                        {
                                            "type": "text",
                                            "text": "seed\" returns a value\u00a0 --- polling takes around 20 seconds",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Once \"gateway"
                                        },
                                        {
                                            "type": "text",
                                            "text": "seed\" has a value, Click \"PREVIOUS\" button, to navigate to the \"gateway",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "setup\" step."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Click \"Save\" on hostname/IP form with the same value of \"lorem.ipsum\", now I am on the \"gateway"
                                        },
                                        {
                                            "type": "text",
                                            "text": "seeding\" step.",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Bug.........\u00a0Polling starts\u00a0\\-------- polling is at the minute mark and still \"gateway"
                                        },
                                        {
                                            "type": "text",
                                            "text": "seed\" has no value. (So I press the Previous button to stop polling infinity since no value is ever returned)",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "blockquote",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "The Bug only happens when I do those steps one after the other....\u00a0 most of the time.... sometimes it does not happen, and i have no idea why. (edited)"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Long term the proper fix is probably "
                                },
                                {
                                    "type": "text",
                                    "text": "https://got-youtrack.agi.appgate.com/issue/ZTP-2325/Service-deployer-should-keep-track-of-k8s-jobs",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://got-youtrack.agi.appgate.com/issue/ZTP-2325/Service-deployer-should-keep-track-of-k8s-jobs"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1693312271259
            }
        ]
    },
    {
        "key": "ZTP-4007",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Use script from Per Leino (see below) to stress app disco and verify the rate limiter kicks in. Additionally, attempt to measure how many requests can be handled with 10 and 20 pods? I'm looking to get an understanding of the workloads that we can handle with those 2 number of pods. The script should be altered to work on the new EUC1 env, not west2. \\"
                        },
                        {
                            "type": "text",
                            "text": "\\",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "\\"
                        },
                        {
                            "type": "text",
                            "text": " import json import random import time import datetime import ipaddress import argparse import requests from collections import deque REMOTE\\_URL = \"",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "https://logpusher.usw2.ztp.donottrust.dev.appgate.com/logs\"",
                            "marks": [
                                {
                                    "type": "code"
                                },
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://logpusher.usw2.ztp.donottrust.dev.appgate.com/logs\""
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " def random\\_private\\_ip(): return str(random.choice([ ipaddress.IPv4Network('10.0.0.0/8'), ipaddress.IPv4Network('172.16.0.0/12'), ipaddress.IPv4Network('192.168.0.0/16') ]).network\\_address + random.randint(1, 254)) def generate\\_log\\_entry(): num\\_hits = random.randint(1, 10) hits\\_to\\_dn = {} for \\_ in range(num\\_hits): hit\\_count = str(random.randint(1, 5)) if hit\\_count not in hits\\_to\\_dn: hits\\_to\\_dn[hit\\_count] = [] hits\\_to\\_dn[hit\\_count].append( f\"CN={random.getrandbits(64):x},CN=test{random.randint(1, 100)}",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "mention",
                            "attrs": {
                                "id": "appgate.com",
                                "text": "@appgate.com",
                                "accessLevel": ""
                            }
                        },
                        {
                            "type": "text",
                            "text": ",OU=Appgate Azure AD OIDC\" ) now = datetime.datetime.utcnow() log\\_entry = { \"hits\\_to\\_dn\": hits\\_to\\_dn, \"destination\\_ip\": random\\_private\\_ip(), \"destination\\_port\": 0, \"protocol\": \"TCP\", \"action\": \"allow\", \"rule\\_subnet\": \"10.97.2.153/32\", \"time\": now.isoformat() + \"Z\", \"date\": now.strftime(\"%Y-%m-%d\"), \"direction\": \"up\", \"rule\\_name\": \"Test1\", \"hits\\_to\\_log\\_sources\": { \"1\": [\"purple1.appgate.com\"] }, \"parallel\\_compute\\_identifier\": random.randint(1, 99) } return log\\_entry def run\\_generator(bearer\\_token, messages\\_per\\_second=10): headers = { \"Authorization\": bearer\\_token, \"Content-Type\": \"application/json\" } interval = 1.0 / messages\\_per\\_second sent\\_messages = 0 sent\\_bytes = 0 stats\\_window = deque(maxlen=10) last\\_stat\\_time = time.time() try: while True: start = time.time() entry = generate\\_log\\_entry() json\\_data = json.dumps(entry) try: response = requests.post(REMOTE\\_URL, data=json\\_data, headers=headers, timeout=5) response.raise\\_for\\_status() except requests.RequestException as e: print(f\"Request failed: {e}\", flush=True) size\\_bytes = len(json\\_data.encode('utf-8')) sent\\_messages += 1 sent\\_bytes += size\\_bytes #Stats once per sec now = time.time() if now - last\\_stat\\_time >= 1: stats\\_window.append((sent\\_messages, sent\\_bytes)) avg\\_msgs = sum(x[0] for x in stats\\_window) / len(stats\\_window) avg\\_bytes = sum(x[1] for x in stats\\_window) / len(stats\\_window) print(f\"--- Rate: {avg\\_msgs:.2f} msg/s | {avg\\_bytes:.2f} B/s ---\", flush=True) sent\\_messages = 0 sent\\_bytes = 0 last\\_stat\\_time = now elapsed = time.time() - start time.sleep(max(0, interval - elapsed)) except KeyboardInterrupt: print(\"Done.\") if \\_\\_name\\_\\_ == \"\\_\\_main\\_\\_\": parser = argparse.ArgumentParser(description=\"Load generator for REST service.\") parser.add\\_argument(\"--bearer\", required=True, help=\"Bearer token for Authorization header.\") parser.add\\_argument(\"--rate\", type=int, default=10, help=\"Messages per second (default: 10)\") args = parser.parse\\_args() run\\_generator(args.bearer, messages\\_per\\_second=args.rate) \\",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "\\"
                        },
                        {
                            "type": "text",
                            "text": "\\",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " \\"
                        },
                        {
                            "type": "text",
                            "text": "python3 log\\_generator.py --bearer \"Bearer \\",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "![](image.png){width=70%}"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "10 pods use a lot of CPU, but they can handle 1000 requests/second"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "raven.creighton",
                "created": 1751311631653
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Updated script for load testing:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "import asyncio\nimport json\nimport random\nimport time\nimport datetime\nimport ipaddress\nimport argparse\nimport httpx\nfrom collections import deque\n\nREMOTE_URL = \""
                                },
                                {
                                    "type": "text",
                                    "text": "https://logpusher.euc1.ztp.dev.ztlab.dev/logs\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n\ndef random_private_ip():\n    return str(random.choice([\n        ipaddress.IPv4Network('10.0.0.0/8'),\n        ipaddress.IPv4Network('172.16.0.0/12'),\n        ipaddress.IPv4Network('192.168.0.0/16')\n    ]).network_address + random.randint(1, 254))\n\ndef generate_log_entry():\n    num_hits = random.randint(1, 10)\n    hits_to_dn = {}\n    for _ in range(num_hits):\n        hit_count = str(random.randint(1, 5))\n        if hit_count not in hits_to_dn:\n            hits_to_dn[hit_count] = []\n        hits_to_dn[hit_count].append(\n            f\"CN={random.getrandbits(64):x},CN=test{random.randint(1, 100)}@appgate.com,OU=Appgate Azure AD OIDC\"\n        )\n\n    now = datetime.datetime.utcnow()\n    log_entry = {\n        \"log\": {\n\n        \"event_type\": \"test\",\n        },\n        \"hits_to_dn\": hits_to_dn,\n        \"destination_ip\": random_private_ip(),\n        \"destination_port\": 0,\n        \"protocol\": \"TCP\",\n        \"action\": \"allow\",\n        \"rule_subnet\": \"10.97.2.153/32\",\n        \"time\": now.isoformat() + \"Z\",\n        \"date\": now.strftime(\"%Y-%m-%d\"),\n        \"direction\": \"up\",\n        \"rule_name\": \"Test1\",\n        \"hits_to_log_sources\": {\n            \"1\": [\"purple1.appgate.com\"]\n        },\n        \"parallel_compute_identifier\": random.randint(1, 99)\n    }\n\n    return log_entry\n\nasync def async_generator(bearer_token: str, message_per_second: int):\n    headers = {\n        \"Authorization\": f\"Bearer {bearer_token}\",\n        \"Content-Type\": \"application/json\"\n    }\n    result_queue = asyncio.Queue()\n    for x in range(message_per_second):\n        asyncio.create_task(request_worker(result_queue, headers))\n\n    stats_window = deque(maxlen=10)\n    while True:\n        sent_messages = 0\n        sent_bytes = 0\n        while not result_queue.empty():\n            try:\n                result = result_queue.get_nowait()\n                sent_bytes += result\n                sent_messages += 1\n            except asyncio.QueueEmpty:\n                break\n\n        stats_window.append((sent_messages, sent_bytes))\n        avg_msgs = sum(x[0] for x in stats_window) / len(stats_window)\n        avg_bytes = sum(x[1] for x in stats_window) / len(stats_window)\n        print(f\"--- Rate: {avg_msgs:.2f} msg/s | {avg_bytes:.2f} B/s ---\", flush=True)\n        await asyncio.sleep(1)\n\nasync def request_worker(result_queue: asyncio.Queue, headers: dict):\n    # Do 1 request per second\n    client = httpx.AsyncClient()\n    while True:\n        start = time.time()\n        try:\n            payload = generate_log_entry()\n            response = await client.post(REMOTE_URL, json=payload, headers=headers)\n            response.raise_for_status()\n        except Exception as exc:\n            print(f\"Request failed: {exc}\", flush=True)\n        sent_bytes = len(json.dumps(payload).encode('utf-8'))\n        await result_queue.put(sent_bytes)\n        elapsed = time.time()\n        await asyncio.sleep(1 - (elapsed - start))\n\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser(description=\"Load generator for REST service.\")\n    parser.add_argument(\"--bearer\", required=True, help=\"Bearer token for Authorization header.\")\n    parser.add_argument(\"--rate\", type=int, default=10, help=\"Messages per second (default: 10)\")\n    args = parser.parse_args()\n\n    asyncio.run(async_generator(args.bearer, message_per_second=args.rate))"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "raven.creighton",
                "created": 1751311815341
            }
        ]
    },
    {
        "key": "ZTP-2129",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I don't have much more info atm. Could be that the database is corrupted for one of the collectives on dev."
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "ascdep@ztp-service-deployer-75c479974b-5dcch:/app$ curl --header \"x-api-key: ******\" "
                        },
                        {
                            "type": "text",
                            "text": "http://localhost:8080/api/v1/collective"
                        },
                        {
                            "type": "text",
                            "text": "\nInternal Server Error"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "masaya.ando",
                                        "text": "@masaya.ando",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " this is fixed, right?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1691052060205
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Seems to be working, at least not 500 us returrned"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aitor.iturri",
                "created": 1692003488347
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "yeah, Masaya fixed it but didn't update the task."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1692004508800
            }
        ]
    },
    {
        "key": "ZTP-3352",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "First version of this task is "
                        },
                        {
                            "type": "text",
                            "text": "https://got-youtrack.agi.appgate.com/issue/ZTP-3260/Event-logs-tab-Improve-event-logs-tab-by-adding-a-switch-button-to-toggle-views-text-JSON-and-a-Refresh-button",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://got-youtrack.agi.appgate.com/issue/ZTP-3260/Event-logs-tab-Improve-event-logs-tab-by-adding-a-switch-button-to-toggle-views-text-JSON-and-a-Refresh-button"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We want to be able to switch from the JSON view to an inline log view displayed as text with the values that will be like: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "2024-07-18T14:43:06.269342 nimis-provision[v1] status=init resource_id='hadrien-test-temporaryenv-alb - Admin access' resource_type=SecurityGroupIngressRule\n2024-07-18T14:43:06.310201 nimis-provision[v1] status=init resource_id=collective-load-balancer resource_type=LoadBalancer\n2024-07-18T14:43:06.361567 nimis-provision[v1] status=init resource_id=adm.temporaryenv.hadrien-test.ztp.donottrust.dev.appgate.com resource_type=LoadBalancerDNSName provisioned_id=adm.temporaryenv.hadrien-test.ztp.donottrust.dev.appgate.com\n2024-07-18T14:43:06.408868 nimis-provision[v1] status=init resource_id=adm.temporaryenv.hadrien-test.ztp.donottrust.dev.appgate.com resource_type=LoadBalancerCertificate\n2024-07-18T14:43:06.475642 nimis-provision[v1] status=init resource_id=collective-admin-listener resource_type=Listener\n2024-07-18T14:43:06.532991 nimis-provision[v1] status=init resource_id=controller1 resource_type=ApplianceConfigurationResource\n"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "To get this value, the idea is to update the "
                        },
                        {
                            "type": "text",
                            "text": "Accept",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " header (which is the value type we are receiving) and not the "
                        },
                        {
                            "type": "text",
                            "text": "Content-type",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " header (which is the value type we are sending) to be "
                        },
                        {
                            "type": "text",
                            "text": "Accept: plain/text",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " (I think we only tried to update the "
                        },
                        {
                            "type": "text",
                            "text": "Content-type",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " the first time)"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Request example (that is working if the "
                        },
                        {
                            "type": "text",
                            "text": "Authorization",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " header is updated) "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "curl '"
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt-int.usw2.ztp.donottrust.dev.appgate.com/api/internal/collective/hosted/eb49058c-df05-4439-ae35-52b77585214d/job-events'"
                        },
                        {
                            "type": "text",
                            "text": " -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0' -H 'Accept: plain/text' -H 'Accept-Language: fr-FR,en-US;q=0.7,en;q=0.3' -H 'Accept-Encoding: gzip, deflate, br, zstd' -H 'Referer: "
                        },
                        {
                            "type": "text",
                            "text": "https://operator.usw2.ztp.donottrust.dev.appgate.com/'"
                        },
                        {
                            "type": "text",
                            "text": " -H 'Origin: "
                        },
                        {
                            "type": "text",
                            "text": "https://operator.usw2.ztp.donottrust.dev.appgate.com'"
                        },
                        {
                            "type": "text",
                            "text": " -H 'DNT: 1' -H 'Connection: keep-alive' -H 'Sec-Fetch-Dest: empty' -H 'Sec-Fetch-Mode: no-cors' -H 'Sec-Fetch-Site: same-site' -H 'TE: trailers' -H 'Authorization: Bearer 123' -H 'Priority: u=4' -H 'Pragma: no-cache' -H 'Cache-Control: no-cache'"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Natan noticed that the "
                        },
                        {
                            "type": "text",
                            "text": "Content-type",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " is undefined when we fetch the job-event data so we should probably fix it with this PR See slack thread "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/C02LFT049HB/p1721219249509559",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/C02LFT049HB/p1721219249509559"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of Done"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "We should keep the improved JSON display (from the original task)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "We should keep the refresh button (from the original task)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Replace the plain JSON display with the new \"inline logs\" value"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "We don't request the job-events with "
                                        },
                                        {
                                            "type": "text",
                                            "text": "Content-Type: undefined",
                                            "marks": [
                                                {
                                                    "type": "code"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2349",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Below is the access log from the cluster load balancer, found in s3."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "response time:  24.869 seconds ironically, it was a 200 response, not a 503 like in the past"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "There might be at least 1 other in Prod in the past week. It might be worth looking if there are similar cases in the test environment (connected to Purple) for the sake of looking at additional examples. "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "https 2023-08-28T16:44:57.216997Z app/k8s-ztpopeni-ztploadb-c60f58ef5d/ea0319c662551ce7 78.136.22.236:59600 10.4.3.73:8443 0.000 24.869 0.000 200 200 1935 675 \"POST "
                        },
                        {
                            "type": "text",
                            "text": "https://riskengine.use1.appgate.net:443/api/sdp/risk-level"
                        },
                        {
                            "type": "text",
                            "text": " HTTP/1.1\" \"Appgate SDP Controller\" TLS_AES_128_GCM_SHA256 TLSv1.3 arn:aws:elasticloadbalancing:us-east-1:367828242727:targetgroup/k8s-ztpopeni-istioing-90f211931a/7e8594f7163c926b \"Root=1-64eccef0-0545c5dc2507cca75222a05e\" \"riskengine.use1.appgate.net\" \"session-reused\" 1 2023-08-28T16:44:32.347000Z \"forward\" \"-\" \"-\" \"10.4.3.73:8443\" \"200\" \"-\" \"-\""
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This was caused by the hanging issue we observed when the risk-rule POST and PUT endpoints are called."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "raven.creighton",
                "created": 1695662131371
            }
        ]
    },
    {
        "key": "ZTP-2469",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Reported by "
                        },
                        {
                            "type": "mention",
                            "attrs": {
                                "id": "ian.izaguirre",
                                "text": "@ian.izaguirre",
                                "accessLevel": ""
                            }
                        },
                        {
                            "type": "text",
                            "text": " who is working on the wizard. When we send configure requests in quick succession, the collective gets stuck in CONFIGURE status because the task is unable to notify management."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We get the following log in the task:"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "ztp-service-deployer-tasks {\"asctime\": \"2023-09-27 19:54:43,480\", \"levelname\": \"INFO\", \"correlation_id\": \"\", \"name\": \"app.libraries.task_result_handler\", \"funcName\": \"process_messages\", \"lineno\": 21\n, \"message\": \"Result we got: method='sdp_configure_result' params={'deployment_result': {'deployment_id': '3b3202d5-b349-487e-a4aa-6ea322193196', 'service_type': 'sdp', 'original_status': 'configuri\nng', 'status': 'provisioning_error', 'status_detail': 'Job pod exited successfully but no data was sent via queue.', 'details': {'collective_id': 'be0ba50d-3548-4527-b60b-3f23d204bd64', 'access_url'\n: '"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.ian-test-8.ian-test.ztp.donottrust.dev.appgate.com:8443/'"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " 'asc_registration_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTU3NDM3NzEsInR5cGUiOiJyZWdpc3Rlcl90b2tlbiIsImlh\ndCI6MTY5NTc0MDE3MSwic3ViIjoiYWNjZDM2ZGMtNjdhNy00ZmM1LWJiZDYtYjhjZWIzY2MzYTBhIiwiYXVkIjoiYjgxMmRkOTktYTBlYy00YWRjLWFjMzctZGRiZDlhZDExNjExIiwiYWxnIjoiSFMyNTYiLCJzZXJ2aWNlX2lkIjoiZjkzM2MwZTQtZDNhOS00YT\nkzLThmYTEtNmYxOWE5MDY2M2ZjIiwicmVnaXN0ZXJfdXJsIjoiaHR0cHM6Ly9tZ210LnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2FwaS9zZHAvcmVnaXN0ZXIvY29sbGVjdGl2ZSIsImRlcGxveW1lbnRfdHlwZSI6IlNlcnZpY2VEZXBsb3lt\nZW50VHlwZUVudW0uenRwaG9zdGVkIn0.L73zy7UdFh9ye7zDccT8mowgi_2b0V0QQ-CRikKPtM4', 'appliances': None, 'tf_workspace_name': 'f933c0e4d3a94a938fa16f19a90663fc', 'admin_password_encrypted': 'gAAAAABlEvELfh\ndpUdORg0yTnGLkkVNWfCECaA6RmFhTpRemq-GU3F67V5nkp1fqYmm86Q_iSXL1O-h3PDKIf7HbnS2SrFziVTXnMzORBEM04TMGz-8kqng=', 'auth_config': {'metadata': 'PG1kOkVudGl0eURlc2NyaXB0b3IgeG1sbnM9InVybjpvYXNpczpuYW1lczp0\nYzpTQU1MOjIuMDptZXRhZGF0YSIgeG1sbnM6bWQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDptZXRhZGF0YSIgeG1sbnM6c2FtbD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiIgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLz\nIwMDAvMDkveG1sZHNpZyMiIGVudGl0eUlEPSJodHRwczovL2F1dGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvaWFuLXRlc3QiPjxtZDpJRFBTU09EZXNjcmlwdG9yIFdhbnRBdXRoblJlcXVlc3RzU2lnbmVkPSJ0cnVl\nIiBwcm90b2NvbFN1cHBvcnRFbnVtZXJhdGlvbj0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb3RvY29sIj48bWQ6S2V5RGVzY3JpcHRvciB1c2U9InNpZ25pbmciPjxkczpLZXlJbmZvPjxkczpLZXlOYW1lPk1ManJ3b1kwaTB4Y2E1azM5dm5tVDhWS0\nR3b2t0cmt4ZzZ2NGtvQzRLM0E8L2RzOktleU5hbWU+PGRzOlg1MDlEYXRhPjxkczpYNTA5Q2VydGlmaWNhdGU+TUlJQ256Q0NBWWNDQmdHRkYyVGtPekFOQmdrcWhraUc5dzBCQVFzRkFEQVRNUkV3RHdZRFZRUUREQWhwWVc0dGRHVnpkREFlRncweU1qRXlNVFV5\nTURBME1qWmFGdzB6TWpFeU1UVXlNREEyTURaYU1CTXhFVEFQQmdOVkJBTU1DR2xoYmkxMFpYTjBNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQWhNMjcxMTg1ZFZhM1ZCR2U5WSthdjZuVXlTemRIY1M5QU0xOTUvR2g4TTRkRmNrdk\nhUMkk2Qk84eVk4U0MvRGpKbXdhMktuQzBTRGZSbHBlaVNraFJ6SHFicFpoNEY3bFE3TnVBTFVzUExOaDVjb3poWEt3aVdrQ0IrVCtQYmt1T1M3c3pienVUVWt5dW9IeHRFR0hhcS84bGNYcEl0b3IzdkNnMDJpZURhaXBtamhSNnpZNUtFaVRNbThibjAwcFJOZ0Vr\naTN1cmlJenF6WENOYUpndGpTcGFNVFNrNDN0U0VzL3FvWE03TVZtQTBsWFFKQzYrcmVtSzNpUXV5TWJrY1B5c1ROSFo4YWtmUHlYc0ZnbUNXbDJ5T25DUkhBOWNRa0VOV2ZHWGUwSm9FcjVmM1d4RFNkWkRpMWpyQUIydHdkMlhOS2RDSG1obUJxcDhQNUdad0lEQV\nFBQk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkxDU0dnM2VHQkd0cEF3S01HbEE2MDFCSld4L1M3RHdSVFZIYmJGbnFXMk1INkRVYTI1eEwzRlJPOHA1aG1hTnpUdVgrR0tYQTFJb09jaEJQQXg0SEFoTkd3VjlaOVYxa25KallaTlN3bzBzejlZTExKUzBXV3h2\nNGhTbEEvbDJndFJuZ2JTMGZ5MVFVdUtTellGc1Q0M1V4WmRYZ1dlRjlNZFRrcVNrY3l4WlRYTFZ0d3JuUGs2bk96Tk5PODdmZmV4TUNuT3orTGNUdldxbmV0ZkFWeHZ2UU83TEVsWGMzbm1uVzZHRU9qTGZEWEpRcDhYTjBZancvWERnK201V1VhRmZKWGVpVzhWSH\nVLaGxIQXRSMG5sOGdNeEExMWVtSW1yenZPNk1UbzJNUmExWUdwSWdCNXU5YU4yTm9MVEtMNDE5aGJlT3E2blVTRWVpeDh1WEg2PC9kczpYNTA5Q2VydGlmaWNhdGU+PC9kczpYNTA5RGF0YT48L2RzOktleUluZm8+PC9tZDpLZXlEZXNjcmlwdG9yPjxtZDpBcnRp\nZmFjdFJlc29sdXRpb25TZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpiaW5kaW5nczpTT0FQIiBMb2NhdGlvbj0iaHR0cHM6Ly9hdXRoLnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG1zL2lhbi\n10ZXN0L3Byb3RvY29sL3NhbWwvcmVzb2x2ZSIgaW5kZXg9IjAiPjwvbWQ6QXJ0aWZhY3RSZXNvbHV0aW9uU2VydmljZT48bWQ6U2luZ2xlTG9nb3V0U2VydmljZSBCaW5kaW5nPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YmluZGluZ3M6SFRUUC1QT1NU\nIiBMb2NhdGlvbj0iaHR0cHM6Ly9hdXRoLnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG1zL2lhbi10ZXN0L3Byb3RvY29sL3NhbWwiPjwvbWQ6U2luZ2xlTG9nb3V0U2VydmljZT48bWQ6U2luZ2xlTG9nb3V0U2VydmljZSBCaW\n5kaW5nPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YmluZGluZ3M6SFRUUC1SZWRpcmVjdCIgTG9jYXRpb249Imh0dHBzOi8vYXV0aC51c3cyLnp0cC5kb25vdHRydXN0LmRldi5hcHBnYXRlLmNvbS9hdXRoL3JlYWxtcy9pYW4tdGVzdC9wcm90b2NvbC9z\nYW1sIj48L21kOlNpbmdsZUxvZ291dFNlcnZpY2U+PG1kOlNpbmdsZUxvZ291dFNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmJpbmRpbmdzOkhUVFAtQXJ0aWZhY3QiIExvY2F0aW9uPSJodHRwczovL2F1dGgudXN3Mi56dHAuZG\n9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvaWFuLXRlc3QvcHJvdG9jb2wvc2FtbCI+PC9tZDpTaW5nbGVMb2dvdXRTZXJ2aWNlPjxtZDpOYW1lSURGb3JtYXQ+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOm5hbWVpZC1mb3JtYXQ6cGVy\nc2lzdGVudDwvbWQ6TmFtZUlERm9ybWF0PjxtZDpOYW1lSURGb3JtYXQ+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOm5hbWVpZC1mb3JtYXQ6dHJhbnNpZW50PC9tZDpOYW1lSURGb3JtYXQ+PG1kOk5hbWVJREZvcm1hdD51cm46b2FzaXM6bmFtZXM6dGM6U0\nFNTDoxLjE6bmFtZWlkLWZvcm1hdDp1bnNwZWNpZmllZDwvbWQ6TmFtZUlERm9ybWF0PjxtZDpOYW1lSURGb3JtYXQ+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6ZW1haWxBZGRyZXNzPC9tZDpOYW1lSURGb3JtYXQ+PG1kOlNpbmds\nZVNpZ25PblNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmJpbmRpbmdzOkhUVFAtUE9TVCIgTG9jYXRpb249Imh0dHBzOi8vYXV0aC51c3cyLnp0cC5kb25vdHRydXN0LmRldi5hcHBnYXRlLmNvbS9hdXRoL3JlYWxtcy9pYW4tdG\nVzdC9wcm90b2NvbC9zYW1sIj48L21kOlNpbmdsZVNpZ25PblNlcnZpY2U+PG1kOlNpbmdsZVNpZ25PblNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmJpbmRpbmdzOkhUVFAtUmVkaXJlY3QiIExvY2F0aW9uPSJodHRwczovL2F1\ndGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvaWFuLXRlc3QvcHJvdG9jb2wvc2FtbCI+PC9tZDpTaW5nbGVTaWduT25TZXJ2aWNlPjxtZDpTaW5nbGVTaWduT25TZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lcz\np0YzpTQU1MOjIuMDpiaW5kaW5nczpTT0FQIiBMb2NhdGlvbj0iaHR0cHM6Ly9hdXRoLnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG1zL2lhbi10ZXN0L3Byb3RvY29sL3NhbWwiPjwvbWQ6U2luZ2xlU2lnbk9uU2VydmljZT48\nbWQ6U2luZ2xlU2lnbk9uU2VydmljZSBCaW5kaW5nPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YmluZGluZ3M6SFRUUC1BcnRpZmFjdCIgTG9jYXRpb249Imh0dHBzOi8vYXV0aC51c3cyLnp0cC5kb25vdHRydXN0LmRldi5hcHBnYXRlLmNvbS9hdXRoL3\nJlYWxtcy9pYW4tdGVzdC9wcm90b2NvbC9zYW1sIj48L21kOlNpbmdsZVNpZ25PblNlcnZpY2U+PC9tZDpJRFBTU09EZXNjcmlwdG9yPjwvbWQ6RW50aXR5RGVzY3JpcHRvcj4=', 'audience': 'sdp-f933c0e4-d3a9-4a93-8fa1-6f19a90663fc'}, 'int\nernal_auth_config': {'metadata': 'PG1kOkVudGl0eURlc2NyaXB0b3IgeG1sbnM9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDptZXRhZGF0YSIgeG1sbnM6bWQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDptZXRhZGF0YSIgeG1sbnM6c2Ft\nbD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiIgeG1sbnM6ZHM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiIGVudGl0eUlEPSJodHRwczovL2F1dGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYX\nV0aC9yZWFsbXMvbWFzdGVyIj48bWQ6SURQU1NPRGVzY3JpcHRvciBXYW50QXV0aG5SZXF1ZXN0c1NpZ25lZD0idHJ1ZSIgcHJvdG9jb2xTdXBwb3J0RW51bWVyYXRpb249InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpwcm90b2NvbCI+PG1kOktleURlc2Ny\naXB0b3IgdXNlPSJzaWduaW5nIj48ZHM6S2V5SW5mbz48ZHM6S2V5TmFtZT5vTmxWakxzOFJUZG1Lb3FtZnVlbDVoYXNLUGRiMHdWd1QwWGxkejRfUlZBPC9kczpLZXlOYW1lPjxkczpYNTA5RGF0YT48ZHM6WDUwOUNlcnRpZmljYXRlPk1JSUNtekNDQVlNQ0JnR0\nVySWJDa2pBTkJna3Foa2lHOXcwQkFRc0ZBREFSTVE4d0RRWURWUVFEREFadFlYTjBaWEl3SGhjTk1qSXhNVEkxTURJd01qQXpXaGNOTXpJeE1USTFNREl3TXpReldqQVJNUTh3RFFZRFZRUUREQVp0WVhOMFpYSXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElC\nRHdBd2dnRUtBb0lCQVFDN0lSMlVTWElTWlVFN1p4WjB4Yjk1ZTJacEFzQndiZFZlaTZFNEM0L2hhUmdLblVQUkNzZTRoMjlxN2RQeVI4Z1p2VG5qMWI1eFp4cU9nMnhQUVRxQUhyOGNnV1NDbHlYZDRZUXc1RXdSZzR1VUdiV2wrN3BSM21RY092ak9qK2c4SXBwVW\npiSHEyZktWMFpySjNtM0VMa1VpTmx1SnJZaFY0VEJvR2dIcWl5WWJUTXNQalJhcGVweUprN1E0ZTEzTTJUT3g4NENXOHlvUnpqK0cvNTA0RlFsc1doRC9LOEM5anBIMU8zZEVFMnUzcW9zRXE5aEI0WmpIQVg2L1FOam0rNG5ldCsvUXlnenNieHdiekl2L0p0Q3o1\nU1ppQkhWZndsVmRLbFJXMDJhMVF4SDI5YzVjRGV4UkViNlJqM0FNelduSWVsYTJMY2xBbDRsblZZU3RBZ01CQUFFd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFLOWZTUFdTZTFGV3djdklqM25XVGk5VlF4eS9tSGJqRytHei8rbk9RNHFXeVBRckxLczAvWkNTOE\n1LWnVkNkRGRVhoSEVHdW1QWjFJbzhDa2JoRVQ1b2NtRk9BZlc4Y0lDNzlNaWFiYm9Ebms4Q3BKeVBEM2F3S0pZbXp4L0xVTERUdTB3VHRJOFA0K2dUWHpObDhFTjlUcDMrd2R6SGFjNGN1Zy9EWFNFOVZlODczQTcrR0ZiWjlkUTJWUGRGeHo0bnNkQXhRYlJySzZz\nME1TQmYrd0pZMVBQaC9SNEJ0b3dlVVdFTHhLaWpFVC8wdVp0NHNyT2tuMjFoVnhydGxXY1Y3aDhYRXM5SWhkcHRQR2xLYzM5aVBvRzJkdW9ueWxkSDFsQmdnVFFDNDVkby9rV3FYb2gzbjdaVGcwWWdWQnNQLzVzS3M1UFZjTDJ3eVRIaWZYOXM9PC9kczpYNTA5Q2\nVydGlmaWNhdGU+PC9kczpYNTA5RGF0YT48L2RzOktleUluZm8+PC9tZDpLZXlEZXNjcmlwdG9yPjxtZDpBcnRpZmFjdFJlc29sdXRpb25TZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpiaW5kaW5nczpTT0FQIiBMb2NhdGlvbj0i\naHR0cHM6Ly9hdXRoLnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG1zL21hc3Rlci9wcm90b2NvbC9zYW1sL3Jlc29sdmUiIGluZGV4PSIwIj48L21kOkFydGlmYWN0UmVzb2x1dGlvblNlcnZpY2U+PG1kOlNpbmdsZUxvZ291dF\nNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmJpbmRpbmdzOkhUVFAtUE9TVCIgTG9jYXRpb249Imh0dHBzOi8vYXV0aC51c3cyLnp0cC5kb25vdHRydXN0LmRldi5hcHBnYXRlLmNvbS9hdXRoL3JlYWxtcy9tYXN0ZXIvcHJvdG9j\nb2wvc2FtbCI+PC9tZDpTaW5nbGVMb2dvdXRTZXJ2aWNlPjxtZDpTaW5nbGVMb2dvdXRTZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpiaW5kaW5nczpIVFRQLVJlZGlyZWN0IiBMb2NhdGlvbj0iaHR0cHM6Ly9hdXRoLnVzdzIuen\nRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG1zL21hc3Rlci9wcm90b2NvbC9zYW1sIj48L21kOlNpbmdsZUxvZ291dFNlcnZpY2U+PG1kOlNpbmdsZUxvZ291dFNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4w\nOmJpbmRpbmdzOkhUVFAtQXJ0aWZhY3QiIExvY2F0aW9uPSJodHRwczovL2F1dGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvbWFzdGVyL3Byb3RvY29sL3NhbWwiPjwvbWQ6U2luZ2xlTG9nb3V0U2VydmljZT48bWQ6Tm\nFtZUlERm9ybWF0PnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OnBlcnNpc3RlbnQ8L21kOk5hbWVJREZvcm1hdD48bWQ6TmFtZUlERm9ybWF0PnVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpuYW1laWQtZm9ybWF0OnRyYW5zaWVu\ndDwvbWQ6TmFtZUlERm9ybWF0PjxtZDpOYW1lSURGb3JtYXQ+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6dW5zcGVjaWZpZWQ8L21kOk5hbWVJREZvcm1hdD48bWQ6TmFtZUlERm9ybWF0PnVybjpvYXNpczpuYW1lczp0YzpTQU1MOj\nEuMTpuYW1laWQtZm9ybWF0OmVtYWlsQWRkcmVzczwvbWQ6TmFtZUlERm9ybWF0PjxtZDpTaW5nbGVTaWduT25TZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpiaW5kaW5nczpIVFRQLVBPU1QiIExvY2F0aW9uPSJodHRwczovL2F1\ndGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvbWFzdGVyL3Byb3RvY29sL3NhbWwiPjwvbWQ6U2luZ2xlU2lnbk9uU2VydmljZT48bWQ6U2luZ2xlU2lnbk9uU2VydmljZSBCaW5kaW5nPSJ1cm46b2FzaXM6bmFtZXM6dG\nM6U0FNTDoyLjA6YmluZGluZ3M6SFRUUC1SZWRpcmVjdCIgTG9jYXRpb249Imh0dHBzOi8vYXV0aC51c3cyLnp0cC5kb25vdHRydXN0LmRldi5hcHBnYXRlLmNvbS9hdXRoL3JlYWxtcy9tYXN0ZXIvcHJvdG9jb2wvc2FtbCI+PC9tZDpTaW5nbGVTaWduT25TZXJ2\naWNlPjxtZDpTaW5nbGVTaWduT25TZXJ2aWNlIEJpbmRpbmc9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpiaW5kaW5nczpTT0FQIiBMb2NhdGlvbj0iaHR0cHM6Ly9hdXRoLnVzdzIuenRwLmRvbm90dHJ1c3QuZGV2LmFwcGdhdGUuY29tL2F1dGgvcmVhbG\n1zL21hc3Rlci9wcm90b2NvbC9zYW1sIj48L21kOlNpbmdsZVNpZ25PblNlcnZpY2U+PG1kOlNpbmdsZVNpZ25PblNlcnZpY2UgQmluZGluZz0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmJpbmRpbmdzOkhUVFAtQXJ0aWZhY3QiIExvY2F0aW9uPSJodHRw\nczovL2F1dGgudXN3Mi56dHAuZG9ub3R0cnVzdC5kZXYuYXBwZ2F0ZS5jb20vYXV0aC9yZWFsbXMvbWFzdGVyL3Byb3RvY29sL3NhbWwiPjwvbWQ6U2luZ2xlU2lnbk9uU2VydmljZT48L21kOklEUFNTT0Rlc2NyaXB0b3I+PC9tZDpFbnRpdHlEZXNjcmlwdG9yPg\n==', 'audience': 'sdp-f933c0e4-d3a9-4a93-8fa1-6f19a90663fc'}}, 'notify_url': None}} jsonrpc='2.0'\", \"pathname\": \"/app/app/libraries/task_result_handler.py\"} "
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This was fixed as part of "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "aitor.iturri",
                                        "text": "@aitor.iturri",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " 's work on adding jobs tracking to service deployer. See "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/587",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/587"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1698148073990
            }
        ]
    },
    {
        "key": "ZTP-1798",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "ProdPad"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://app.prodpad.com/ideas/457/canvas",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://app.prodpad.com/ideas/457/canvas"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Design"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204-8&t=GRcjaXYZ8iCoiqUC-0",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204-8&t=GRcjaXYZ8iCoiqUC-0"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "IMPORTANT:"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "This "
                                        },
                                        {
                                            "type": "text",
                                            "text": "Idea",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": " is just one of several \"slices\" of capabilities required of the SDP demo wizard."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The phrase \"demo wizard\" refers to a concept rather than a specific implementation approach."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Recall that provision a "
                                        },
                                        {
                                            "type": "text",
                                            "text": "hosted",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "\u00a0demo SDP Collective will have already begun when the demo ZTP Account was initially provisioned."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Refer back to the Demo Accelerator "
                                        },
                                        {
                                            "type": "text",
                                            "text": "Initiative",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "text",
                                            "text": "\u00a0for additional context."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Introduction"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The first time a user logs into their \"demo\" ZTP Account they must be presented with the SDP demo wizard. The demo wizard should welcome the user - giving them a sense of the effort / time necessary and the benefits of SDP. \u00a0The mockup below illustrates the concept, though not necessarily the desired implementation."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Step 1"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The demo wizard must also gather the minimum information necessary to configure elements of the \"demo\" Collective's control plane. The next two mockups suggest a minimum set data points the user would need to provide:"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Location name - The value entered here would be used to (re)name the demo Collective's default site."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Environment - This field allows the user to tell the demo wizard what kind of environment hosts the resources the user wants to protect. We intend to restrict the options to AWS, Azure, GCP, On-prem. This version of the demo wizard will use this information to setup a Gateway appliance definition in the demo Collective."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Resources - This field will be optional. If used, it would effectively tell the demo wizard information necessary to configure one or more Entitlements in the demo Collective."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Step 2"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Local users - this field will allow the user to indicate whether additional end users should be added to the demo Collective. The demo wizard should show the current user in the list if only to make clear that they'll get access to resources SDP will protect. The values entered here shall be used to provision additional users within the demo Collective."
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "IMPORTANT: The demo wizard should NOT\u00a0limit how many additional users are entered, even though the default license is limited to two. We anticipate that in most scenarios the demo user will not add more names here - meaning there's little chance someone will add more than two names anyhow. We're willing to take the risk that someone adds more than two users here and attempts to let three or more users use the demo Collective early on. We anticipate having sufficient reporting and monitoring of demo accounts that will give us the opportunity to notice if our hypotheses are incorrect; and we'll respond at that time as needed."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Step 3 & 4"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The demo wizard must inform the user of the two additional steps they (the user) are required to perform. This includes:"
                        },
                        {
                            "type": "orderedList",
                            "content": [
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "installing the Gateway appliance\u00a0"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "installing the Appgate Client."
                                                }
                                            ]
                                        },
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "IMPORTANT: For this "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "Idea",
                                                    "marks": [
                                                        {
                                                            "type": "em"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "\u00a0ticket, the demo wizard is not required to verify that either the Gateway or Client are successfully installed."
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Final notes"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The demo wizard shall use the information gathered above to configure multiple resources within the demo Collective. Of course, this may require the demo wizard to monitor the demo Collective's provisioning status. When the wizard has completed its job, the following control plane resources will have been setup:"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "User identity in local IdP"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Access Policy"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Gateway appliance"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Cloud resolver (when applicable)"
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "IMPORTANT: The user must not be permitted to navigate to other ZTP areas unless / until the user has completed the demo wizard."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-1775",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This is the error, see the attached logs: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "ERROR:root:[None] STDERR:\n2023-05-09T23:36:24.845687540Z ERROR:root:[None]\n2023-05-09T23:36:24.845690520Z Error: No response from controller Post \""
                        },
                        {
                            "type": "text",
                            "text": "https://ctrl1.justworksdp.dbailey.ztp.donottrust.dev.appgate.com:8443/admin/login\""
                        },
                        {
                            "type": "text",
                            "text": ":"
                        },
                        {
                            "type": "text",
                            "text": " dial tcp 54.202.247.184:8443: i/o timeout\n2023-05-09T23:36:24.845693770Z\n2023-05-09T23:36:24.845696250Z   with module.appgate_second_controller.data.appgatesdp_site.default_site,\n2023-05-09T23:36:24.845699100Z   on modules/appgate_additional_appliance/data.tf line 27, in data \"appgatesdp_site\" \"default_site\":\n2023-05-09T23:36:24.845704011Z   27: data \"appgatesdp_site\" \"default_site\" {\n2023-05-09T23:36:24.845707200Z\n2023-05-09T23:36:24.845709681Z"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "It looks like we validate the collective at the very end , when we should be doing some validation between the second controller deployment and calling the SDP provider see "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/master/app/app/resources/tfplan-ops/main.tf#L134-L162",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/master/app/app/resources/tfplan-ops/main.tf#L134-L162"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " and the validation at the very end "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/master/app/app/resources/tfplan-ops/main.tf#L357-L371",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/appgate-sdp-int/asc-service-deployment/blob/master/app/app/resources/tfplan-ops/main.tf#L357-L371"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The relevant slack thread "
                        },
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/C02780T59QB/p1683676236584099",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/C02780T59QB/p1683676236584099"
                                    }
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The proper fix would be to decouple the deployment of controllers from the configuration."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1683810507884
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "thomas.cellerier",
                                        "text": "@thomas.cellerier",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": "   , I don't know if you have discussed internally how you want to solve this, but One cheesy approach would be to increase the timeout value. This operation has hardcoded retry for 5 minutes "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate/terraform-provider-appgatesdp/blob/v1.4.0/appgate/config.go#L264",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate/terraform-provider-appgatesdp/blob/v1.4.0/appgate/config.go#L264"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "  We could map this to a config value and let the user set a custom value here."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "of course, I've heard rumors that you are going to split this out all together. Just wanted to mentioned this as a Option if this is a big blocker."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "daniel.nilsson",
                "created": 1685536005460
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Yes that would be a nice shorter term improvement here. Maybe something you can coach "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "masaya.ando",
                                        "text": "@masaya.ando",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " on implementing and releasing in the terraform provider?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1685536116438
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Seem that the problem (at least in my case) is that there is some lambda that is stopping instances at some specific times so controller is stopped and not reachable"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aitor.iturri",
                "created": 1686728919177
            }
        ]
    },
    {
        "key": "ZTP-2639",
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "With an initial focus on the upgrade prepare job."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700579138179
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Here is the example events output of an upgrade prepare command: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "$ nc -lU foobar\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:48+01:00\",\"COMMAND\":\"sdpctl appliance upgrade prepare\",\"SDPCTL_VERSION\":\"2023.11.07\",\"message\":\"\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:48+01:00\",\"message\":\"version check already done today\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"primary controller\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"current_version\":\"6.2.5+35280\",\"message\":\"upgrade information\",\"skipping\":\"\",\"target_version\":\"6.3.0-master+35329\",\"upgrading\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1, gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"file\":\"appgate-6.3.0-35329-master.img.zip\",\"message\":\"checking file status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"file\":\"appgate-6.3.0-35329-master.img.zip\",\"message\":\"got file status\",\"status\":\"\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"message\":\"Remote file path for the Controller "
                                },
                                {
                                    "type": "text",
                                    "text": "https://lhr-artifacts.agi.appgate.com/project/7/StratusImage_Build/master/artifact/appgate-6.3.0-35329-master.img.zip?is-build-type-id=true\"}"
                                },
                                {
                                    "type": "text",
                                    "text": "\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:49+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"another version is already prepared on the appliance. cancelling before proceeding\",\"upgrade_status\":\"downloading\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:51+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"idle\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:51+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:51+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"another version is already prepared on the appliance. cancelling before proceeding\",\"upgrade_status\":\"downloading\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"idle\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for the appliance status\",\"want\":[\"healthy\",\"warning\",\"error\",\"n/a\",\"offline\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for the appliance status\",\"want\":[\"healthy\",\"warning\",\"error\",\"n/a\",\"offline\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached the wanted appliance status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached the wanted appliance status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"details\":\"\",\"message\":\"prepare image change\",\"result\":\"success\",\"status\":\"completed\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"verifying\",\"ready\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"details\":\"\",\"message\":\"prepare image change\",\"result\":\"success\",\"status\":\"completed\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:34:53+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"verifying\",\"ready\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:13+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:13+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"ready\",\"success\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:16+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:16+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Polling for upgrade status\",\"want\":[\"ready\",\"success\"]}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:49+01:00\",\"appliance\":\"gateway-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:53+01:00\",\"appliance\":\"controller-46ba6d80-9595-4004-bb3e-b5bb4fc466c0-site1\",\"message\":\"Reached wanted status\"}\n{\"@key\":\"114df2ca-285c-43d8-b973-473854859ba3\",\"@level\":\"info\",\"@time\":\"2023-11-21T16:35:53+01:00\",\"message\":\"prepare complete\"}"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "When running the following command: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "sdpctl appliance upgrade prepare --events-path foobar --image '"
                                },
                                {
                                    "type": "text",
                                    "text": "https://lhr-artifacts.agi.appgate.com/project/7/StratusImage_Build/master/artifact/appgate-6.3.0-35329-master.img.zip?is-build-type-id=true'"
                                },
                                {
                                    "type": "text",
                                    "text": " --dev-keyring --skip-container-bundle --ci-mode --no-interactive"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700580981552
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Related fix "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/701",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/701"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700735333934
            }
        ]
    },
    {
        "key": "ZTP-2193",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "and maybe do a PoC"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://pip.pypa.io/en/stable/topics/vcs-support/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://pip.pypa.io/en/stable/topics/vcs-support/"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1691486620561
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-management/pull/654",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-management/pull/654"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " it's pretty smooth but has currently the challenge of git access in docker container."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1691583204153
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "That looks really neat."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "But if there are issues with access from docker, then the question is if it's not almost as simple to have a "
                                },
                                {
                                    "type": "text",
                                    "text": "pip wheel (or package)",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://realpython.com/python-wheels/"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " being deployed to Nexus on merge using a GH action? Then it would be in line with how we handle testy, aitorbot etc."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1691586662633
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "That has the same issue of having access to nexus plus nexus credentials + all the automation that needs to be added for automatic upload + sdp client + purple. I am hoping passing git credentials the github runner has to docker is smoother than that."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1691588906719
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Ah. Thought the containers already had access to Nexus. Then this sounds much better."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1691643806949
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://appgate.slack.com/archives/C03R2NZK20K/p1692189424070809?thread",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate.slack.com/archives/C03R2NZK20K/p1692189424070809?thread"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "ts=1692189420.212639&cid=C03R2NZK20K",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "When I do pip install requirements.txt in Dockerfile, it fails because it doesn't have the credentials for github. Addressing this is a rabbit hole that I unfortunately jumped into.\n\"Just use the host git\" is not an option directly. Probably obvious to many.\n The common suggested way of doing it is to use SSH to connect to github and something like \"proxy the SSH via host\". "
                                },
                                {
                                    "type": "text",
                                    "text": "https://medium.com/@amimahloof/securely-build-small-python-docker-image-from-private-git-repos-c3e6d5da4626"
                                },
                                {
                                    "type": "text",
                                    "text": " I couldn't make this work on my machine.\nEven if it does, the github runner does not use SSH; it has a temporary token fed into git. So that would need some extra hacks on \"if runner, replace this and that\"\nAnother common suggested way is feeding the Dockerfile with github credentials (whatever way you prefer?) via environment variables.\n It is immediately shot down as \"well, now your docker container includes your secrets. Congratulations.\". That can be addressed by using an intermediate container or sometimes deleting the credential somehow before the container layer is created. But this makes the dockerfiles a tad more complicated\n Each dev will suddenly need to setup an extra env variable that is their github secret. PITA and bad security. Ideally, the solution should not require any extra dev steps.\nAnother alternative is to git clone the shared repo in the build script and refer to it in pip as `MyProject @ git+file://ztp-shared@v1.2.3` (assuming it accepts relative paths).\n The downside is that the devs will need to keep git pulling the shared repo as a separate step to get the right version.\n Not the worst but then maybe might as well use submodule?\nThen there is the original alternative that is using nexus. That has these extra requirements I'm going to lay down for reference:\nFor devs, nexus access is always there anyway, so we're good.\nFor github action runner, we need to inject SDP client with purple credentials. Or just install headless client to the runners? Though that might be obsolete when we replace github action runners with some EKS cluster.\nWe will probably need a new github action which is triggered whenever we release a new version on github:\nInject SDP client again\nLogin to nexus (requires feeding credentials to nexus that needs to be kept secret) and upload the new version."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1692189803384
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "leaving this for now."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1692202542864
            }
        ]
    },
    {
        "key": "ZTP-691",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The list of services returned in the GET /account endpoint is different that the list of service when calling GET /service."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The self-hosted SDP collectives are not returned in the GET /service endpoint."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "An example: GET "
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/account",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://mgmt.asc.donottrust.dev.appgate.com/api/account"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n    \"salesforce_id\": \"12335\",\n    \"is_active\": true,\n    \"description\": \"Demo 30\",\n    \"id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n    \"name\": \"demo30\",\n    \"services\": [\n        {\n            \"is_active\": true,\n            \"name\": \"newsdp\",\n            \"description\": \"New SDP\",\n            \"id\": \"28201ccd-1e48-4ea3-9886-4bf96d1d4387\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"provisioning_error\",\n            \"requested_by\": \"c03f6725-3484-4ece-a503-fe45d71c7eb3\",\n            \"details\": {\n                \"deployment_id\": \"027f5b1d-a69d-4390-b142-c43b445d03b3\",\n                \"access_url\": null,\n                \"controllers\": null,\n                \"collective_id\": null,\n                \"deployment_type\": null,\n                \"collective_status\": null,\n                \"min_version\": null\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"sdpcloud5\",\n            \"description\": \"SDP Cloud 5\",\n            \"id\": \"5e391ebb-f3c9-4833-895e-8c841965325c\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"ready\",\n            \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n            \"details\": {\n                \"deployment_id\": \"c9ee0116-e37e-4d15-b139-f54b885a1e96\",\n                \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud5.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n                \"controllers\": null,\n                \"collective_id\": \"c8ce0aa5-1547-462a-84da-f141b09e8df4\",\n                \"deployment_type\": \"cloud-based\",\n                \"collective_status\": null,\n                \"min_version\": \"6.0.0\"\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"sdpcloud\",\n            \"description\": \"SDP Cloud\",\n            \"id\": \"44ed3de7-1e66-45f0-83b3-7934b2533a03\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"provisioning_error\",\n            \"requested_by\": \"c03f6725-3484-4ece-a503-fe45d71c7eb3\",\n            \"details\": {\n                \"deployment_id\": \"614e47f0-1a12-41c2-8722-8e5f638cec60\",\n                \"access_url\": null,\n                \"controllers\": null,\n                \"collective_id\": null,\n                \"deployment_type\": null,\n                \"collective_status\": null,\n                \"min_version\": null\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"sdpcloud9\",\n            \"description\": \"SDP Cloud 9\",\n            \"id\": \"8484282a-6a0d-4821-aff2-10798ac28134\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"ready\",\n            \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n            \"details\": {\n                \"deployment_id\": \"c801ca84-993f-4652-81bc-281f2d78875d\",\n                \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud9.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n                \"controllers\": null,\n                \"collective_id\": \"ddb9c016-7653-40a1-9a6a-2ecf8fcf3339\",\n                \"deployment_type\": \"cloud-based\",\n                \"collective_status\": null,\n                \"min_version\": \"6.0.0\"\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"envy-sdp\",\n            \"description\": \"\",\n            \"id\": \"77f4ce52-0f1e-4b87-bcbb-720729f5bccd\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"ready\",\n            \"requested_by\": \"7a34322f-5f2f-434b-bb86-ed464aa34a2a\",\n            \"details\": {\n                \"deployment_id\": null,\n                \"access_url\": null,\n                \"controllers\": null,\n                \"collective_id\": \"c2b913ad-d5ba-407e-9775-6f191a00d72f\",\n                \"deployment_type\": \"self-hosted\",\n                \"collective_status\": null,\n                \"min_version\": \"6.0.0\"\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"sdpcloudnew\",\n            \"description\": \"SDP Cloud New\",\n            \"id\": \"c707f596-d8c8-4113-95e7-d98257a36a40\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"ready\",\n            \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n            \"details\": {\n                \"deployment_id\": \"174caf13-f49c-4462-ba44-751dd1ed4133\",\n                \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloudnew.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n                \"controllers\": null,\n                \"collective_id\": \"47d131a3-0c62-4852-a71e-11473e7e738c\",\n                \"deployment_type\": \"cloud-based\",\n                \"collective_status\": null,\n                \"min_version\": \"6.0.0\"\n            }\n        },\n        {\n            \"is_active\": true,\n            \"name\": \"sdpcloud2\",\n            \"description\": \"SDP Cloud 2\",\n            \"id\": \"eb2fa7b4-2e8b-4425-90b1-91c0da714078\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n            \"service_type\": \"sdp\",\n            \"status\": \"ready\",\n            \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n            \"details\": {\n                \"deployment_id\": \"b8eebf80-6c99-4de0-8eb6-8f3e51349574\",\n                \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud2.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n                \"controllers\": null,\n                \"collective_id\": \"d366e33a-277c-4623-a8f5-dcc5f537130c\",\n                \"deployment_type\": \"cloud-based\",\n                \"collective_status\": null,\n                \"min_version\": \"6.0.0\"\n            }\n        }\n    ],\n    \"users\": [\n        {\n            \"username\": \"arturo.garcia\",\n            \"id\": \"7a34322f-5f2f-434b-bb86-ed464aa34a2a\",\n            \"is_active\": true,\n            \"email\": \"arturo.garcia@appgate.com\",\n            \"first_name\": \"Arturo\",\n            \"last_name\": \"Garcia\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\"\n        },\n        {\n            \"username\": \"auth0|61ccf392c5a098006b02bd70\",\n            \"id\": \"e4d61258-00d5-42ab-b605-f9b8aa5807da\",\n            \"is_active\": true,\n            \"email\": \"jhon.doe@appgate.com\",\n            \"first_name\": \"Jhon\",\n            \"last_name\": \"Jhon\",\n            \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\"\n        }\n    ],\n    \"status\": \"ready\",\n    \"requested_by\": \"a53cc8e1-ab8f-4121-ad5b-6e518d611f02\"\n}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "GET "
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "type=sdp "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[\n    {\n        \"is_active\": true,\n        \"name\": \"newsdp\",\n        \"description\": \"New SDP\",\n        \"id\": \"28201ccd-1e48-4ea3-9886-4bf96d1d4387\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"provisioning_error\",\n        \"requested_by\": \"c03f6725-3484-4ece-a503-fe45d71c7eb3\",\n        \"details\": {\n            \"deployment_id\": \"027f5b1d-a69d-4390-b142-c43b445d03b3\",\n            \"access_url\": null,\n            \"controllers\": null,\n            \"collective_id\": null,\n            \"deployment_type\": null,\n            \"collective_status\": null,\n            \"min_version\": null\n        }\n    },\n    {\n        \"is_active\": true,\n        \"name\": \"sdpcloud5\",\n        \"description\": \"SDP Cloud 5\",\n        \"id\": \"5e391ebb-f3c9-4833-895e-8c841965325c\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"ready\",\n        \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n        \"details\": {\n            \"deployment_id\": \"c9ee0116-e37e-4d15-b139-f54b885a1e96\",\n            \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud5.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n            \"controllers\": null,\n            \"collective_id\": \"c8ce0aa5-1547-462a-84da-f141b09e8df4\",\n            \"deployment_type\": \"cloud-based\",\n            \"collective_status\": [\n                {\n                    \"id\": \"3c777adf-657d-48ca-be67-e4abc188ad6b\",\n                    \"name\": \"Controller\",\n                    \"status\": \"healthy\"\n                },\n                {\n                    \"id\": \"796d3f96-b4da-4d26-80d6-fa0a77bf8996\",\n                    \"name\": \"Controller 2\",\n                    \"status\": \"healthy\"\n                }\n            ],\n            \"min_version\": \"6.0.0\"\n        }\n    },\n    {\n        \"is_active\": true,\n        \"name\": \"sdpcloud\",\n        \"description\": \"SDP Cloud\",\n        \"id\": \"44ed3de7-1e66-45f0-83b3-7934b2533a03\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"provisioning_error\",\n        \"requested_by\": \"c03f6725-3484-4ece-a503-fe45d71c7eb3\",\n        \"details\": {\n            \"deployment_id\": \"614e47f0-1a12-41c2-8722-8e5f638cec60\",\n            \"access_url\": null,\n            \"controllers\": null,\n            \"collective_id\": null,\n            \"deployment_type\": null,\n            \"collective_status\": null,\n            \"min_version\": null\n        }\n    },\n    {\n        \"is_active\": true,\n        \"name\": \"sdpcloud9\",\n        \"description\": \"SDP Cloud 9\",\n        \"id\": \"8484282a-6a0d-4821-aff2-10798ac28134\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"ready\",\n        \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n        \"details\": {\n            \"deployment_id\": \"c801ca84-993f-4652-81bc-281f2d78875d\",\n            \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud9.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n            \"controllers\": null,\n            \"collective_id\": \"ddb9c016-7653-40a1-9a6a-2ecf8fcf3339\",\n            \"deployment_type\": \"cloud-based\",\n            \"collective_status\": [\n                {\n                    \"id\": \"142159c5-a14a-408f-9902-d34d1c9a179c\",\n                    \"name\": \"Controller\",\n                    \"status\": \"healthy\"\n                },\n                {\n                    \"id\": \"eab9aa46-fa04-491e-9cfb-078476679f3d\",\n                    \"name\": \"Controller 2\",\n                    \"status\": \"healthy\"\n                }\n            ],\n            \"min_version\": \"6.0.0\"\n        }\n    },\n    {\n        \"is_active\": true,\n        \"name\": \"sdpcloudnew\",\n        \"description\": \"SDP Cloud New\",\n        \"id\": \"c707f596-d8c8-4113-95e7-d98257a36a40\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"ready\",\n        \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n        \"details\": {\n            \"deployment_id\": \"174caf13-f49c-4462-ba44-751dd1ed4133\",\n            \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloudnew.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n            \"controllers\": null,\n            \"collective_id\": \"47d131a3-0c62-4852-a71e-11473e7e738c\",\n            \"deployment_type\": \"cloud-based\",\n            \"collective_status\": [\n                {\n                    \"id\": \"dcce188f-b667-4534-aff3-7c34842a758a\",\n                    \"name\": \"Controller\",\n                    \"status\": \"healthy\"\n                },\n                {\n                    \"id\": \"e33798d9-7c0e-416f-9ed8-ba610ba329ad\",\n                    \"name\": \"Controller 2\",\n                    \"status\": \"healthy\"\n                }\n            ],\n            \"min_version\": \"6.0.0\"\n        }\n    },\n    {\n        \"is_active\": true,\n        \"name\": \"sdpcloud2\",\n        \"description\": \"SDP Cloud 2\",\n        \"id\": \"eb2fa7b4-2e8b-4425-90b1-91c0da714078\",\n        \"account_id\": \"5d4d771a-45a1-4224-a150-e2eed333aa31\",\n        \"service_type\": \"sdp\",\n        \"status\": \"ready\",\n        \"requested_by\": \"43b55e5b-2281-433c-aa22-32b5c8c5c788\",\n        \"details\": {\n            \"deployment_id\": \"b8eebf80-6c99-4de0-8eb6-8f3e51349574\",\n            \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.sdpcloud2.demo30.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n            \"controllers\": null,\n            \"collective_id\": \"d366e33a-277c-4623-a8f5-dcc5f537130c\",\n            \"deployment_type\": \"cloud-based\",\n            \"collective_status\": [\n                {\n                    \"id\": \"65f216aa-84da-4359-bef1-6c2847a1c911\",\n                    \"name\": \"Controller\",\n                    \"status\": \"healthy\"\n                },\n                {\n                    \"id\": \"4738e4ca-7f2f-4cf3-ac51-25b67edbf021\",\n                    \"name\": \"Controller 2\",\n                    \"status\": \"healthy\"\n                }\n            ],\n            \"min_version\": \"6.0.0\"\n        }\n    }\n]"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-1289",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "The email we receive when a collective provision has failed should be updated."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Current"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "SDP collective huehuhue was not provisioned."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Expected"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Something more like "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "This is an automated message from Appgate ZTP. You cannot reply to this message.\n\nSDP collective huehuhue was not provisioned.\n\nFurther assistance is available at "
                        },
                        {
                            "type": "text",
                            "text": "https://support.appgate.com"
                        },
                        {
                            "type": "text",
                            "text": " or by email: support@appgate.com\n\nAppgate ZTP"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Is this a frontend task? We haven't been involved in crafting these emails up until this point."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1668779687578
            }
        ]
    },
    {
        "key": "ZTP-1137",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Task description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We should probably implement it so that we can present different kinds of data in storybook to. Separate the fetching to somewhere else?"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service_type=sdp"
                        },
                        {
                            "type": "text",
                            "text": "."
                        },
                        {
                            "type": "text",
                            "text": " (Reason: CORS header \u2018Access-Control-Allow-Origin\u2019 missing). Status code: 400.\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "
                        },
                        {
                            "type": "text",
                            "text": "https://riskengine.asc.donottrust.dev.appgate.com/api/risk-rule"
                        },
                        {
                            "type": "text",
                            "text": "."
                        },
                        {
                            "type": "text",
                            "text": " (Reason: CORS header \u2018Access-Control-Allow-Origin\u2019 missing). Status code: 400.\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service_type=sdp"
                        },
                        {
                            "type": "text",
                            "text": "."
                        },
                        {
                            "type": "text",
                            "text": " (Reason: CORS request did not succeed). Status code: (null).\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "
                        },
                        {
                            "type": "text",
                            "text": "https://riskengine.asc.donottrust.dev.appgate.com/api/risk-rule"
                        },
                        {
                            "type": "text",
                            "text": "."
                        },
                        {
                            "type": "text",
                            "text": " (Reason: CORS request did not succeed). Status code: (null).\n\nXHROPTIONS"
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service_type=sdp"
                        },
                        {
                            "type": "text",
                            "text": "\nCORS Missing Allow Origin\n\nXHROPTIONS"
                        },
                        {
                            "type": "text",
                            "text": "https://riskengine.asc.donottrust.dev.appgate.com/api/risk-rule"
                        },
                        {
                            "type": "text",
                            "text": "\nCORS Missing Allow Origin\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at "
                        },
                        {
                            "type": "text",
                            "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service?service_type=sdp"
                        },
                        {
                            "type": "text",
                            "text": "."
                        },
                        {
                            "type": "text",
                            "text": " (Reason: CORS header \u2018Access-Control-Allow-Origin\u2019 missing). Status code: 400."
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Location"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Cloud console storybook"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[ ] No errors in the log on the dashboard view in Cloud Console Storybook"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[ ] The components accepts and presents props from storybook to show different numbers in each state."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "filip.dalvag",
                                        "text": "@filip.dalvag",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Since they are data driven components, perhaps it makes more sense to mock the fetch calls in storybook/testing"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1666110519557
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is fixed as part of ZTP-1288"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1669074589129
            }
        ]
    },
    {
        "key": "ZTP-4175",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Integrations & Automations team will be adding the CertificateIssuer needed with their work on the ztp injector service per "
                        },
                        {
                            "type": "text",
                            "text": "this conversation",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/C03R2NZK20K/p1756929833976369"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": ". In the meantime, this ticket is to manually add it in order to continue with ZTP-4176 When provisioning new ZTP collective, issue and install new public cert."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Integrations & Automations team will be adding the CertificateIssuer needed with their work on the ztp injector service. In the meantime, I manually added it in order to continue with ZTP-4176 When provisioning new ZTP collective, issue and install new public cert."
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "content": [
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Create CertificateIssuer yaml"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "apiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-dev\nspec:\n  acme:\n    email: dori.amara@appgate.com\n    server: "
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "https://acme-staging-v02.api.letsencrypt.org/directory"
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "\n    privateKeySecretRef: { name: letsencrypt-dev-account-key }\n    solvers:\n      - dns01:\n          route53:\n            region: eu-central-1"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Apply CertificateIssuer"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "$ kubectl apply -f \"clusterissuers-le.yaml\"\n$ kubectl get clusterissuers\n$ kubectl describe clusterissuer letsencrypt-dev"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Create Certificate yaml"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "apiVersion: v1\nkind: Namespace\nmetadata:\n  name: certs\n---\napiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: test-wildcard\n  namespace: certs\nspec:\n  secretName: test-wildcard-tls\n  dnsNames:\n    - \"*.dori01.dori.ztp.dev.ztlab.dev\"\n  issuerRef:\n    kind: ClusterIssuer\n    name: letsencrypt-dev"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Apply Certificate"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "$ kubectl apply -f \"test-cert.yaml\"\n$ kubectl get certificate -n certs\n$ kubectl describe certificate test-wildcard -n certs"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "dori.amara",
                "created": 1757421054266
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Additionally, I needed to add a Role and RoleBinding to give the pod the needed permissions."
                                }
                            ]
                        },
                        {
                            "type": "orderedList",
                            "content": [
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Create Role and RoleBinding yaml"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: ztp-cert-issuer-role\n  namespace: ztp\nrules:\n  - apiGroups: [\"cert-manager.io\"]\n    resources: [\"certificates\"]\n    verbs: [\"get\",\"list\",\"watch\",\"create\",\"update\",\"patch\",\"delete\"]\n  - apiGroups: [\"\"]\n    resources: [\"secrets\"]\n    verbs: [\"get\",\"list\",\"watch\"]\n\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: ztp-cert-issuer-bind\n  namespace: ztp\nsubjects:\n  - kind: ServiceAccount\n    name: default\n    namespace: ztp\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role\n  name: ztp-cert-issuer-role"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Apply"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "codeBlock",
                                            "attrs": {},
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "$ kubectl apply -f \"rbac-ztp-certs-grant.yaml\"\n$ kubectl get roles -n ztp\n$ kubectl get rolebindings -n ztp"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "dori.amara",
                "created": 1757510459690
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Integrations ticket: ZTP-3919 Add sdp injector install to terraform"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "dori.amara",
                "created": 1758888406921
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "These manually created resources are now deleted in favor of the implementations in the helm and eks repos."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "dori.amara",
                "created": 1761244996760
            }
        ]
    },
    {
        "key": "ZTP-475",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "See ZTP-414, inform design team of correct fields for this form."
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Common:"
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Name: \"acme"
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "idp\"",
                                                            "marks": [
                                                                {
                                                                    "type": "em"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Description: \"ACME, inc IDP\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Type: \"OIDC\", \"SAML\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Email attribute: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress\"",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress\""
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "First Name attribute: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\"",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\""
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Last Name attribute: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\"",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname\""
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Open ID Connect - OIDC:"
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Client ID: \"123c6184-9326-479f-aba7-62b77e1d7952\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Client Secret: \"mysecret\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Authentication URL: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "https://admin",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://admin"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "idp/auth/realms/master/protocol/openid-connect/auth\"",
                                                            "marks": [
                                                                {
                                                                    "type": "em"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Token URL: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "https://admin",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://admin"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "idp/auth/realms/master/protocol/openid-connect/token\"",
                                                            "marks": [
                                                                {
                                                                    "type": "em"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "User Info URL: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "https://admin",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://admin"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "idp/auth/realms/master/protocol/openid-connect/userinfo\"",
                                                            "marks": [
                                                                {
                                                                    "type": "em"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "JWKS URL: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "https://admin",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://admin"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "idp/auth/realms/master/protocol/openid-connect/certs\"",
                                                            "marks": [
                                                                {
                                                                    "type": "em"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "SAML:"
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Issuer: \"api://123c6184-9326-479f-aba7-62b77e1d7952\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "SSO URL: \""
                                                        },
                                                        {
                                                            "type": "text",
                                                            "text": "https://login.microsoftonline.com/4f420178-0428-4b56-a59d-cc41291501b3/saml2\"",
                                                            "marks": [
                                                                {
                                                                    "type": "link",
                                                                    "attrs": {
                                                                        "href": "https://login.microsoftonline.com/4f420178-0428-4b56-a59d-cc41291501b3/saml2\""
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Signing Certificate: \"really.long.string.as.the.token\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "Validate Signature: \"False\""
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "{\n  \"name\": \"string\",\n  \"type\": \"oidc\",\n  \"description\": \"string\",\n  \"account_id\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\n  \"email_attribute\": \"email\",\n  \"first_name_attribute\": \"string\",\n  \"last_name_attribute\": \"string\",\n  \"is_active\": false,\n  \"details\": {\n    \"client_id\": \"string\",\n    \"client_secret\": \"string\",\n    \"auth_url\": \"string\",\n    \"token_url\": \"string\",\n    \"user_info_url\": \"string\",\n    \"jwks_url\": \"string\"\n  }\n}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1649195006153
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://mgmt.asc.donottrust.dev.appgate.com/docs#/identity-provider/create",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://mgmt.asc.donottrust.dev.appgate.com/docs#/identity-provider/create"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "identity",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "provider"
                                },
                                {
                                    "type": "text",
                                    "text": "api",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "identity"
                                },
                                {
                                    "type": "text",
                                    "text": "provider",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "post"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1649195027714
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-management/blob/e503e28fcb4175e9b350c79c247cfd329d2895d8/default.env",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-management/blob/e503e28fcb4175e9b350c79c247cfd329d2895d8/default.env"
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "# Master IDP\n# IDP automatically setup to allow admin access\nMASTER_ACCOUNT_NAME=master\nIDP_NAME=admin-idp\nIDP_DESCRIPTION=admin-idp\nIDP_IS_ACTIVE=true\n\n# OIDC Details\n#OIDC_IDP_CLIENT_ID=admin-cli\n#OIDC_IDP_CLIENT_SECRET=mysecret\n#OIDC_IDP_AUTH_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://admin_idp/auth/realms/master/protocol/openid-connect/auth\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n#OIDC_IDP_TOKEN_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://admin_idp/auth/realms/master/protocol/openid-connect/token\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n#OIDC_IDP_USER_INFO_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://admin_idp/auth/realms/master/protocol/openid-connect/userinfo\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n#OIDC_IDP_JWKS_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://admin_idp/auth/realms/master/protocol/openid-connect/certs\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n\n\n# SAML Details\nSAML_IDP_ISSUER=\"admin-idp\" # This should generally be the same as the IDP_NAME\nSAML_IDP_SSO_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://admin_idp/auth/realms/master/protocol/saml\""
                                },
                                {
                                    "type": "text",
                                    "text": "\nSAML_IDP_CERTIFICATE=mycert"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1649195493638
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-management/blob/master/default.env",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-management/blob/master/default.env"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "# Master IDP\n# IDP automatically setup to allow admin access\nMASTER_ACCOUNT_NAME=master\nIDP_NAME=admin-idp\nIDP_DESCRIPTION=admin-idp\nIDP_IS_ACTIVE=true\nIDP_TYPE='saml'\n\n# SAML Details\nIDP_SAML_ISSUER=\"api://123c6184-9326-479f-aba7-62b77e1d7952\"\nIDP_SAML_SSO_URL=\""
                                },
                                {
                                    "type": "text",
                                    "text": "https://login.microsoftonline.com/4f420178-0428-4b56-a59d-cc41291501b3/saml2\""
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_SAML_SIGNING_CERTIFICATE='MIIDBTCCAe2gAwIBAgIQN33ROaIJ6bJBWDCxtmJEbjANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTIwMTIyMTIwNTAxN1oXDTI1MTIyMDIwNTAxN1owLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKGiy0/YZHEo9rRn2bI27u189Sq7NKhInFz5hLCSjgUB2rmf5ETNR3RJIDiW1M51LKROsTrjkl45cxK6gcVwLuEgr3L1TgmBtr/Rt/riKyxeXbLQ9LGBwaNVaJrSscxfdFbJa5J+qzUIFBiFoL7kE8ZtbkZJWBTxHEyEcNC52JJ8ydOhgvZYykete8AAVa2TZAbg4ECo9+6nMsaGsSBncRHJlRWVycq8Q4HV4faMEZmZ+iyCZRo2fZufXpn7sJwZ7CEBuw4qycHvUl6y153sUUFqsswnZGGjqpKSq7I7sVI9vjB199RarHaSSbDgL2FxjmASiUY4RqxnTjVa2XVHUwUCAwEAAaMhMB8wHQYDVR0OBBYEFI5mN5ftHloEDVNoIa8sQs7kJAeTMA0GCSqGSIb3DQEBCwUAA4IBAQBnaGnojxNgnV4+TCPZ9br4ox1nRn9tzY8b5pwKTW2McJTe0yEvrHyaItK8KbmeKJOBvASf+QwHkp+F2BAXzRiTl4Z+gNFQULPzsQWpmKlz6fIWhc7ksgpTkMK6AaTbwWYTfmpKnQw/KJm/6rboLDWYyKFpQcStu67RZ+aRvQz68Ev2ga5JsXlcOJ3gP/lE5WC1S0rjfabzdMOGP8qZQhXk4wBOgtFBaisDnbjV5pcIrjRPlhoCxvKgC/290nZ9/DLBH3TbHk8xwHXeBAnAjyAqOZij92uksAv7ZLq4MODcnQshVINXwsYshG1pQqOLwMertNaY5WtrubMRku44Dw7R,MIIDBTCCAe2gAwIBAgIQWPB1ofOpA7FFlOBk5iPaNTANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTIxMDIwNzE3MDAzOVoXDTI2MDIwNjE3MDAzOVowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALH7FzF1rjvnZ4i2iBC2tz8qs/WP61n3/wFawgJxUnTx2vP/z5pG7f8qvumd7taOII0aSlp648SIfMw59WdUUtup5CnDYOcX1sUdivAj20m2PIDK6f+KWZ+7YKxJqCzJMH4GGlQvuDIhRKNT9oHfZgnYCCAmjXmJBtWyD052qqrkzOSn0/e9TKbjlTnTNcrIno3XDQ7xG+79vOD2GZMNopsKogWNxUdLFRu44ClKLRb4Xe00eVrANtBkv+mSJFFJS1Gxv611hpdGI2S0v1H+KvB26O7vuzGhZ/AevRemGhXQ5V5vwNEqXnVRVkBRszLKeN/+rxM436xQyVQGJMG+sVECAwEAAaMhMB8wHQYDVR0OBBYEFLlRBSxxgmNPObCFrl+hSsbcvRkcMA0GCSqGSIb3DQEBCwUAA4IBAQB+UQFTNs6BUY3AIGkS2ZRuZgJsNEr/ZEM4aCs2domd2Oqj7+5iWsnPh5CugFnI4nd+ZLgKVHSD6acQ27we+eNY6gxfpQCY1fiN/uKOOsA0If8IbPdBEhtPerRgPJFXLHaYVqD8UYDo5KNCcoB4Kh8nvCWRGPUUHPRqp7AnAcVrcbiXA/bmMCnFWuNNahcaAKiJTxYlKDaDIiPN35yECYbDj0PBWJUxobrvj5I275jbikkp8QSLYnSU/v7dMDUbxSLfZ7zsTuaF2Qx+L62PsYTwLzIFX3M8EMSQ6h68TupFTi5n0M2yIXQgoRoNEDWNJZ/aZMY/gqT02GQGBWrh+/vJ,MIIDBTCCAe2gAwIBAgIQff8yrFO3CINPHUTT76tUsTANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTIxMTAyNDE3NDU1NloXDTI2MTAyNDE3NDU1NlowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMq979bhE6xX09e87zostNcPJzvtbeu3JomS2catiEg3bXvXcPiMQke5T1dsHs3MyEYHFpmIBZ7JNo+ptdB+LSs3KmTNCSfzYoGNvaRYpsZS+/6lzAdT6KxSXZQCr6eUoI0k8C6145K9QKlsG6cxtsmVDTdxhPBr5k3qOMsHkGzQnfsjv2aaM8dCd+MBwRDLmsPmXwlJO5nSirIPhHBOGb9F4JfcD9jKSj8dFfIC2s8XulEPUoczbq7kjp3KS2CTf6EOGin+abTqda7Hw2NiCvX67ZkUyjnUPjBJknYxi//PCEHLwrO46lc+d1yqF0ZVwfLTCBjnIPiAnq+ssXtorSECAwEAAaMhMB8wHQYDVR0OBBYEFDiZG6s5d9RvorpqbVdS2/MD8ZKhMA0GCSqGSIb3DQEBCwUAA4IBAQAQAPuqqKj2AgfC9ayx+qUu0vjzKYdZ6T+3ssJDOGwB1cLMXMTUVgFwj8bsX1ahDUJdzKpWtNj7bno+Ug85IyU7k89U0Ygr55zWU5h4wnnRrCu9QKvudUPnbiXoVuHPwcK8w1fdXZQB5Qq/kKzhNGY57cG1bwj3R/aIdCp+BjgFppOKjJpK7FKS8G2v70eIiCLMapK9lLEeQOxIvzctTsXy9EZ7wtaIiYky4ZSituphToJUkakHaQ6evbn82lTg6WZz1tmSmYnPqRdAff7aiQ1Sw9HpuzlZY/piTVqvd6AfKZqyxu/FhENE0Odv/0hlHzI15jKQWL1Ljc0Nm3y1skut,MIIDBTCCAe2gAwIBAgIQHsetP+i8i6VIAmjmfVGv6jANBgkqhkiG9w0BAQsFADAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MB4XDTIyMDEzMDIzMDYxNFoXDTI3MDEzMDIzMDYxNFowLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALKb0HF1qmKzHL3KkJn0jGJ21AvFNN2HLZ18iyAXtePDs4Qa4HQDpj3zHyYv7VFvC/bL1RqZOahunTdJ+uvXERyqlOdhpxtLZcmF5sxQtYcx1YEM/Xob3uLZSe7sPd+lyFDgDscd19tM3ace4JuMx8eI9mQZV7JAI+lN2naR0DbsFBOpJp4CVkfnXlpRIoDKUbL1FUNjuYdPkUqvFq/8e7ndyuhk7a8wEWps/bpNiF2rSmHZ4+Sa5Noy2Op1rfhrcZQP5fV8CKzpekqmv6ThiKUtNSSncSr6QQvVXUvKFwfuz+ai5LJr+7avkm24jnnNHL1O1j+71Eb9dOFeBYiP6qECAwEAAaMhMB8wHQYDVR0OBBYEFGzVFjAbYpU/2en4ry4LMLUHJ3GjMA0GCSqGSIb3DQEBCwUAA4IBAQBU0YdNVfdByvpwsPfwNdD8m1PLeeCKmLHQnWRI5600yEHuoUvoAJd5dwe1ZU1bHHRRKWN7AktUzofP3yF61xtizhEbyPjHK1tnR+iPEviWxVvK37HtfEPzuh1Vqp08bqY15McYUtf77l2HXTpak+UWYRYJBi++2umIDKY5UMqU+LEZnvaXybLUKN3xG4iy2q1Ab8syGFaUP7J3nCtVrR7ip39BnvSTTZZNo/OC7fYXJ2X4sN1/2ZhR5EtnAgwi2RvlZl0aWPrczArUCxDBCbsKPL/Up/kID1ir1VO4LT09ryfv2nx3y6l0YvuL7ePz4nGYCWHcbMVcUrQUXquZ3XtI,MIIC8TCCAdmgAwIBAgIQYVk/tJ1e4phISvVrAALNKTANBgkqhkiG9w0BAQsFADAjMSEwHwYDVQQDExhsb2dpbi5taWNyb3NvZnRvbmxpbmUudXMwHhcNMjAxMjIxMDAwMDAwWhcNMjUxMjIxMDAwMDAwWjAjMSEwHwYDVQQDExhsb2dpbi5taWNyb3NvZnRvbmxpbmUudXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDWfv6dZIt65ZDMFGVhJtLxGO9a+RB4PtAv185ZoZdtbvdU0YfRiKlmKw8KUW/obPB9YQJNZCnX1YV7+UBKRrn4oRaRBXMJsQxppp84izuELrU/lwaDDt2G5bizt/plgZkTNDgXmscT5g1Fu8PnWqKs83MoeTeeOLXCuHRi1s88h/741sj3xsLAsuH1q9506aoRLNY4YQIQxe/wtIz4H1IqD/hC4G3IHDAhqRO6qjzizBMEznDw92GlZlkO0+AfztbP79aNa+T30CNeXuXylY9AmIo26O39yTc0MWnNosSmmh2FSwgPSm1EDTTx4JTqXxP67HX3BmZv/IGcdxXekVaFAgMBAAGjITAfMB0GA1UdDgQWBBQ2r//lgTPcKughDkzmCtRlw+P9SzANBgkqhkiG9w0BAQsFAAOCAQEAsFdRyczNWh/qpYvcIZbDvWYzlrmFZc6blcUzns9zf7sUWtQZrZPu5DbetV2Gr2r3qtMDKXCUaR+pqoy3I2zxTX3x8bTNhZD9YAgAFlTLNSydTaK5RHyB/5kr6B7ZJeNIk3PRVhRGt6ybCJSjV/VYVkLR5fdLP+5GhvBESobAR/d0ntriTzp7/tLMb/oXx7w5Hu1m3I8rpMocoXfH2SH1GLmMXj6Mx1dtwCDYM6bsb3fhWRz9O9OMR6QNiTnq8q9wn1QzBAnRcswYzT1LKKBPNFSasCvLYOCPOZCL+W8N8jqa9ZRYNYKWXzmiSptgBEM24t3m5FUWzWqoLu9pIcnkPQ==,MIIC8TCCAdmgAwIBAgIQQrXPXIlUE4JMTMkVj+02YTANBgkqhkiG9w0BAQsFADAjMSEwHwYDVQQDExhsb2dpbi5taWNyb3NvZnRvbmxpbmUudXMwHhcNMjEwMzEwMDAwMDAwWhcNMjYwMzEwMDAwMDAwWjAjMSEwHwYDVQQDExhsb2dpbi5taWNyb3NvZnRvbmxpbmUudXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDTWt71rYFRO0210XMs0j5AQdbxeEOIMwNsYyTEdEhhcfjXMFxyxfAf28yLQe7Fcelc7PC1RgrCX3dlHfu2nqWm/CVTUd482Zmkn0P5cC9TvfHTdgqhkR1oUHf1WxXIuKHd+4+/oM8TapP5M0Tdflh0hY4YWtwyRxcuyM74EKripxJ0EfaUGARBS4Pqeqt4tmyD6A/NIOGNVJwhRkaIPwzawrEAOIgejkqVpkjK7fa3wmRq8/2Mzsi1ICPOKDVbbK9VDNRBkD7FmomjaPEHeD9/KB09QcrpQ379yqSt/Gfb5VYfXAyGWb3RKnFMwPgehg5WLPWCAfwYJfZoGJfk7NDpAgMBAAGjITAfMB0GA1UdDgQWBBTECjBRANDPLGrn1p7qtwswtBU7JzANBgkqhkiG9w0BAQsFAAOCAQEAq1Ib4ERvXG5kiVmhfLOpun2ElVOLY+XkvVlyVjq35rZmSIGxgfFc08QOQFVmrWQYrlss0LbboH0cIKiD6+rVoZTMWxGEicOcGNFzrkcG0ulu0cghKYID3GKDTftYKEPkvu2vQmueqa4t2tT3PlYF7Fi2dboR5Y96Ugs8zqNwdBMRm677N/tJBk53CsOf9NnBaxZ1EGArmEHHIb80vODStv35ueLrfMRtCF/HcgkGxy2U8kaCzYmmzHh4zYDkeCwM3Cq2bGkG+Efe9hFYfDHw13DzTR+h9pPqFFiAxnZ3ofT96NrZHdYjwbfmM8cw3ldg0xQzGcwZjtyYmwJ6sDdRvQ=='\nIDP_SAML_VALIDATE_SIGNATURE=False\nIDP_SAML_USERNAME_ATTRIBUTE='"
                                },
                                {
                                    "type": "text",
                                    "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name'"
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_SAML_FIRST_NAME_ATTRIBUTE='"
                                },
                                {
                                    "type": "text",
                                    "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname'"
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_SAML_LAST_NAME_ATTRIBUTE='"
                                },
                                {
                                    "type": "text",
                                    "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname'"
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_SAML_EMAIL_ATTRIBUTE='"
                                },
                                {
                                    "type": "text",
                                    "text": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress'"
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_SAML_GROUPS_ATTRIBUTE_NAME='"
                                },
                                {
                                    "type": "text",
                                    "text": "http://schemas.microsoft.com/ws/2008/06/identity/claims/groups'"
                                },
                                {
                                    "type": "text",
                                    "text": "\nIDP_MAPPER_ADMIN_GROUP_IDS_LIST='[\"881c5599-1d11-4a0e-94a2-116238f77986\",\"f9ac10b7-393e-4806-b99f-439cff24d4eb\"]'\nIDP_MAPPER_CREATE_ACCOUNT_GROUP_IDS_LIST='[\"73945bff-c075-4cf4-9fd0-b7fe92ec1f03\",\"0428d221-0315-4060-81a7-0a31e97de80f\"]'"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1649195717067
            }
        ]
    },
    {
        "key": "ZTP-1622",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Task description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "On Form: Rename the \"Signing Certificate\" label into \"Public Certificate\"."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "On Overview page: Rename the \"Certificate\" label into \"Public Certificate\"."
                                        }
                                    ]
                                },
                                {
                                    "type": "blockquote",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Note: The backend is not being renamed, so do not update the API call."
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Location"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "SAML IDP Overview page & Form"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Note: Does not apply to OIDC"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Public Certificate\" label is on the IDP Form."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Public Certificate\" label is on the IDP Overview page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] If needed, refactor the current unit tests and/or MSW tests to reflect this name change."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2276",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Currently we have 136 instances instead of the max 96 we should have for 24 collectives."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "And a lot of other AWS resources are leaked."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We need to list the actual collectives vs the expected collectives and do a diff."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is really two different things. Note that I'm not considering other kinds of leaks like stuff in keycloak. We can start by using a CLI that uses the management, service deployer and AWS APIs. ### Management <-> Service Deployer cleanup These are so called \"leaked\" collectives. The good thing is we can use the service deployer code to clean those up, possibly with some tweaks. The terraform collectives can be cleaned up by first running "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "aitor.iturri",
                                        "text": "@aitor.iturri",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " 's migration script (which retags). Then for all, for all types of collectives we can run the new provisioner deprovisioning. ### Service Deployer <-> AWS cleanup This is a bit more difficult and ad-hoc. We need to find AWS resources that are not associated to any kind of terraform state or collective. Collectives created with the new provisioner are tagged consistently so that should be easy. For terraform collectives we need to grab all state files, parse all resources (we have the code in the collective migration code), see if they match an actual collective in service deployer/management, and if not cleanup the resources. Some resources won't be listed in any state file, we should probably just delete those if they match some basic filtering + some age criteria."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1693401757974
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The internal API to get the list from management: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "GET "
                                },
                                {
                                    "type": "text",
                                    "text": "https://mgmt-int.usw2.ztp.donottrust.dev.appgate.com/api/internal/service/hosted-collectives"
                                },
                                {
                                    "type": "text",
                                    "text": "\nAccept: application/json\nContent-Type: application/json\nx-api-key: ******"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Returns something like this: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "\n{\n  \"collectives\": [\n    {\n      \"id\": \"f7bed89b-0c5f-4243-a711-c9586674fcf4\",\n      \"status\": \"error\"\n    },\n    {\n      \"id\": \"0fa485b9-6443-4a25-ab6b-2f1f0cc269b6\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"c318991a-a60a-4413-9aac-642c20fc66d6\",\n      \"status\": \"error\"\n    },\n    {\n      \"id\": \"aa5d8add-7fac-4e0c-9363-82510525d9a2\",\n      \"status\": \"provisioning\"\n    },\n    {\n      \"id\": \"c9c12e39-1990-418b-b507-2d9e5735facc\",\n      \"status\": \"provisioning_error\"\n    },\n    {\n      \"id\": \"f8dffa53-4ec0-4b9a-b9ad-d7d533901bc3\",\n      \"status\": \"provisioning_error\"\n    },\n    {\n      \"id\": \"d78641ee-c480-442c-8a54-c73afeee9010\",\n      \"status\": \"upgrade_cancelling\"\n    },\n    {\n      \"id\": \"013ce10f-52e8-4e45-a897-5bbac39516a0\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"7c7e98f8-92a3-4181-b36f-4de73b21782a\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"86d03716-f796-48fb-9f83-bfe6f7c8a607\",\n      \"status\": \"provisioning\"\n    },\n    {\n      \"id\": \"f6fd8512-a13a-4884-a301-7dd0bd49af4d\",\n      \"status\": \"provisioning_error\"\n    },\n    {\n      \"id\": \"80dff468-f24f-4222-bd8d-924acd2489fa\",\n      \"status\": \"error\"\n    },\n    {\n      \"id\": \"096023d2-589e-45b6-aa3c-69c76e3d7338\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"31640707-4a38-44d3-b9a9-3c145dd551ce\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"40ba9377-b939-4b7b-883b-b647df12adaa\",\n      \"status\": \"deprovisioning\"\n    },\n    {\n      \"id\": \"1ec4cb22-8368-4425-99ce-e109e012ca8f\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"f74d8cff-9042-4816-aa6c-1cc9ec64314e\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"d78076b5-509f-450a-beda-37b1b938b714\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"18051b1b-fb88-4128-8e1e-5a926bc4d5e7\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"3b37a02d-a997-47ec-b908-aea1c2d87f08\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"1c62f660-e3e4-4c68-8c90-5a400d143dfd\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"35178e78-899d-4d59-a988-ac6032022ede\",\n      \"status\": \"ready\"\n    },\n    {\n      \"id\": \"8b2bd3e9-8bf7-4bfe-83a5-6333564c3891\",\n      \"status\": \"ready\"\n    }\n  ],\n  \"notify_url\": \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://ztp-management-internal/api/internal/service/notify\""
                                },
                                {
                                    "type": "text",
                                    "text": "\n}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1693401920564
            }
        ]
    },
    {
        "key": "ZTP-2574",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[ztp-jobs] 2023-10-18 14:04:09,311: WARNING: [app.tasks.sdp::configure_sdp_collective] [3b3202d5-b349-487e-a4aa-6ea322193196 - ian-test - ian-test-8] Failed to create a client profile: 409 - Error: {\"id\":\"conflict\",\"message\":\"Client Profile with Id 'c48111d6-1021-432f-a92d-e150ba0bc42f' already exists.\"}\n[ztp-jobs] 2023-10-18 14:04:09,311: ERROR: [app.tasks.sdp::configure] Error when configuring collective: Traceback (most recent call last):\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 727, in handle_function\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1022, in _request\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 749, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '409 Conflict' for url '"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.ian-test-8.ian-test.ztp.donottrust.dev.appgate.com:8443/admin/client-profiles'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409"
                        },
                        {
                            "type": "text",
                            "text": "\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/app/tasks/sdp.py\", line 1291, in configure\n    await configure_sdp_collective(self.ztp_deployment, parameters)\n  File \"/app/app/tasks/sdp.py\", line 782, in configure_sdp_collective\n    await sdp_admin.create_client_profile(\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1201, in create_client_profile\n    response = await self._request(\n               ^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 729, in handle_function\n    raise SdpAdminHTTPException(\napp.libraries.sdp_admin.sdp_admin.SdpAdminHTTPException: 409 - Error: {\"id\":\"conflict\",\"message\":\"Client Profile with Id 'c48111d6-1021-432f-a92d-e150ba0bc42f' already exists.\"}"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "slack discussion "
                                },
                                {
                                    "type": "text",
                                    "text": "https://appgate.slack.com/archives/C03R2NZK20K/p1697638139666659",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate.slack.com/archives/C03R2NZK20K/p1697638139666659"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1697639828335
            }
        ]
    },
    {
        "key": "ZTP-3691",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "us-east-1: ami-0d3bebdc5f3305e93\nus-east-2: ami-02d2c1b8992c97371\nus-west-1: ami-0ccb520ee9d84e384\nus-west-2: ami-08636712342d74c09\neu-central-1: ami-05ee9d249ea3905a6"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "https://appgate-appliance-upgrade-images.s3.eu-central-1.amazonaws.com/appgate-6.4.2-39898-release.img.zip"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2274",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "In my test account, I have 1 collective, it should be shown in the launcher It should also be shown in the collective health as healthy/warning/error"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png){width=70%}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "From the backend I get "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n  \"description\": \"hadrien-test\",\n  \"salesforce_id\": \"ZTP LOCAL DEV\",\n  \"onboarding_data\": {\n    \"current_step\": \"access_control\",\n    \"gateway_seed\": null,\n    \"gateway_setup\": {\n      \"hostname\": \"azer\"\n    },\n    \"access_control\": {\n      \"users\": [\n        {\n          \"email\": \"zaer@azer.fvr\",\n          \"last_name\": \"azer\",\n          \"first_name\": \"aze\"\n        }\n      ]\n    },\n    \"asset_protection\": {\n      \"location\": \"zert\",\n      \"resources\": [\n        {\n          \"host\": \"zert\",\n          \"ports\": [\n            \"1111\"\n          ]\n        }\n      ],\n      \"environment\": \"aws\"\n    },\n    \"controller_status\": \"ready\",\n    \"gateway_connected\": false,\n    \"client_profile_link\": null,\n    \"gateway_seed_expiration\": null\n  },\n  \"is_active\": true,\n  \"id\": \"1009d294-b963-4f8a-8c43-84693f6744ce\",\n  \"name\": \"hadrien-test\",\n  \"services\": [\n    {\n      \"is_active\": true,\n      \"name\": \"u-w-u\",\n      \"description\": \"\ud83e\udd9a\",\n      \"registered_at\": \"2023-08-07T14:53:18.886867\",\n      \"id\": \"c0aff748-7a29-4d3b-8ca9-762c46985b08\",\n      \"account_id\": \"1009d294-b963-4f8a-8c43-84693f6744ce\",\n      \"service_type\": \"sdp\",\n      \"status\": \"upgrade_preparing_error\",\n      \"requested_by\": \"7d26a1ea-2d75-4762-9969-fb636302c4fa\",\n      \"details\": {\n        \"deployment_id\": \"52b96505-ab55-4f9d-8648-4a4107a3e305\",\n        \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.u-w-u.hadrien-test.ztp.donottrust.dev.appgate.com:8443/\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n        \"access_urls\": null,\n        \"registered_from_url\": null,\n        \"removed_by\": null,\n        \"enable_logserver\": true,\n        \"enable_gateway\": false,\n        \"collective_id\": \"2ad278b6-d31b-4d3e-8fd8-f8d3c4f2a361\",\n        \"deployment_type\": \"ztp-hosted\",\n        \"appliances\": [\n          {\n            \"id\": \"1abf7dfe-c373-4563-bde1-e15dd40cfacc\",\n            \"name\": \"Controller01\",\n            \"status\": \"healthy\",\n            \"version\": \"6.2.2-34453-release\",\n            \"function\": \"CTR\"\n          },\n          {\n            \"id\": \"4cdc23f2-fd6f-4a52-b72b-4a05672adec5\",\n            \"name\": \"Controller02\",\n            \"status\": \"healthy\",\n            \"version\": \"6.2.2-34453-release\",\n            \"function\": \"CTR\"\n          },\n          {\n            \"id\": \"a320520e-c266-422a-9d42-ab2c4604e498\",\n            \"name\": \"logserver\",\n            \"status\": \"healthy\",\n            \"version\": \"6.2.2-34453-release\",\n            \"function\": \"LS\"\n          }\n        ],\n        \"min_version\": \"6.2.2-34453-release\"\n      }\n    }\n  ],\n  \"users\": [\n    {\n      \"username\": \"hadrien\",\n      \"id\": \"7d26a1ea-2d75-4762-9969-fb636302c4fa\",\n      \"is_active\": true,\n      \"email\": \"hadrien.luttiau@appgate.com\",\n      \"first_name\": \"Hadrien\",\n      \"last_name\": \"Luttiau\",\n      \"account_id\": \"1009d294-b963-4f8a-8c43-84693f6744ce\",\n      \"is_from_external_idp\": false\n    }\n  ],\n  \"status\": \"ready\",\n  \"requested_by\": \"e6b82c5d-5ff0-41fb-bd6b-e32b83d47fe4\",\n  \"requested_by_email\": null,\n  \"account_type\": \"standard\"\n}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I'll try to add a collective and see what happens"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "DoD"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The dashboard is acting as normal"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Reopening the issue as Colby got the bug again today "
                                },
                                {
                                    "type": "text",
                                    "text": "https://appgate.slack.com/archives/C03KGL4LL0Y/p1696944716150139",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate.slack.com/archives/C03KGL4LL0Y/p1696944716150139"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1696945296889
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is because of the new \"upgrade"
                                },
                                {
                                    "type": "text",
                                    "text": "preparing",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "error\" status. The components don't know about that one yet."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "aaron.case",
                "created": 1698093424995
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "These are all the Status Options a Collective can be in: ![](image1.png){width=70%}"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The reason we are getting this bug is because, this \"widget\" only shows 3 options: \"Healthy, Warning, and Error\"....."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "We are handling these:"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "These are \"Warnings\" "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": " deprovisioning,\nprovisioning\n"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "These are \"Errors\" "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": " 'provisioning_error',\n  'upgrade_preparing_error',\n  'upgrade_error',\n  'configuring_error',\n   'error',"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "These are \"Healthy\" "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "'ready',"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This next list of Values are ALL unhandled which is why sometimes we get all of them showing \"Zero\":What do we classify these as: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "'configuring',\n'upgrade_running',\n'upgrade_cancelling',\n 'upgrading',\n 'upgrade_preparing',\n  'upgrade_prepared',"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "ian.izaguirre",
                "created": 1698354843294
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Oh I see, good catch ! I feel like the status we currently don't handle should be shown as warnings except "
                                },
                                {
                                    "type": "text",
                                    "text": "'upgrade_prepared'",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " that can be healthy."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Does it explain also why the collective wasn't in the launcher widget ?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1698394259236
            }
        ]
    },
    {
        "key": "ZTP-2799",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "License issues:\n\n  \u2717 ZPL-2.1 license [Low Severity]["
                        },
                        {
                            "type": "text",
                            "text": "https://snyk.io/vuln/snyk:lic:pip:zope.interface:ZPL-2.1]"
                        },
                        {
                            "type": "text",
                            "text": " in zope.interface@6.1\n    introduced by gevent@23.9.1 > zope.interface@6.1\n\n  \u2717 ZPL-2.1 license [Low Severity]["
                        },
                        {
                            "type": "text",
                            "text": "https://snyk.io/vuln/snyk:lic:pip:zope.event:ZPL-2.1]"
                        },
                        {
                            "type": "text",
                            "text": " in zope.event@5.0\n    introduced by gevent@23.9.1 > zope.event@5.0"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Either ignore license warnings for test dependencies completely or see if we can replace the library causing these issues (gevent that is a peer dependency of pytest-cov) by replacing pytest-cov with coverage."
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-3097",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Remove sub-step 2 and sub-step 1 in page 3"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Requirements"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Notes from the meeting week 13"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "In 6.3, the controller has a new ability to not need the gateway\u2019s public IP to generate a seed file for that gateway."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "That translates to not needing the Generate Seed step on the Setup Gateway page in the wizard. In other words, Generate Seed can be removed for when the trial user selects a cloud provider."
                                        }
                                    ]
                                },
                                {
                                    "type": "bulletList",
                                    "content": [
                                        {
                                            "type": "listItem",
                                            "content": [
                                                {
                                                    "type": "paragraph",
                                                    "content": [
                                                        {
                                                            "type": "text",
                                                            "text": "If the trial user selects On-prem/Datacenter, and we build support for that in the wizard, we will some form of the Generate Seed functionality. By \u201csome form\u201d, I mean a resemblance, though probably not identical."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Please note that we\u2019ll have to update the content in various spots to account for removing the Generate Seed step, but also to account for SDP 6.3 being released in the marketplaces."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "There is at least one spot that references v6.2 (Azure)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "In the meeting, I asked if we can then also eliminate the first step, Allocate IP (since we don\u2019t need the IP to create the seed anymore). The group said yes, it\u2019s still needed, but I still believe the Allocate IP step can be eliminated and instead be part of the Create Virtual Instance step (#4)."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Notes:"
                        },
                        {
                            "type": "bulletList",
                            "content": [
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "There is currently a wait that polls the controller, waiting for the controller to be ready (provisioned), before allowing the seed to be generated. We\u2019ll need to move that poll to the Download Seed step instead."
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "There is currently a gate preventing trial users from going back (Previous) once they enter the Install Client page. That remains and will be unchanged."
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "The functions in the Download Seed step will also remain the same \u2013 the trial user still can Download and Seed Copy Seed to Clipboard, but we will eliminate the informational note below those buttons (because there won\u2019t be a Generate Seed step anymore)."
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "listItem",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "The polling in step 5 (Launch Instance) will also remain the same."
                                                }
                                            ]
                                        },
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Implementing this into the wizard in time for RSA conference May 6-9) is the goal. Ideally this would be shipped by into production on or before April 18th. That would allow \\~2.5 weeks of usage before RSA, which gives time for last minute adjustments and bug fixes - to ensure that the wizard is ready for RSA. We're expecting a fairly significant increase in demand stemming from the conference"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Design"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204-8&mode=design",
                                            "marks": [
                                                {
                                                    "type": "link",
                                                    "attrs": {
                                                        "href": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204-8&mode=design"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Update from the design team:"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "When downloading seed if the collective/seed is not ready we should inform the user that they need to wait"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "DoD"
                        }
                    ],
                    "attrs": {
                        "level": 3
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The substep is removed"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The substep 1 is updated (see Colby for the new copy)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The fields info texts are updated (see Colby for the new copy)"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "The \"speedrunner\" error message is updated following the design"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is the proposed design after the initial meeting. Please review!"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "![](image.png)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The views are available in a side panel in "
                                },
                                {
                                    "type": "text",
                                    "text": "the handoff file here",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204%3A8&mode=design&t=2IgH4PysVlgGeNdC-1"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "If we agree that this is all along with the tech side of things I will update the main panel in the handoff."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.svensson",
                "created": 1712663858394
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Here is the backend PR that can be used for development: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-management/pull/1004",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-management/pull/1004"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1712671224756
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "per.svensson",
                                        "text": "@per.svensson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " I understood from the first meeting that the 1 sub-step (\"Allocate Public IP\") was supposed to stay but be updated. So only the step 2 was removed but in your new design the sub-step 1 is also gone."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "But maybe you have discussed with Colby and the requirements have changed ?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1712844954410
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "christoffer.karlsson",
                                        "text": "@christoffer.karlsson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " Do we still need the alert message when clicking \"Previous\" to tell the user that they need to regenerate the seed ? OR will it stay the same even when going back ?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "hadrien.luttiau",
                "created": 1712845075296
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " RE the substep 1 (allocate IP) and whether we still need it: I'll post in Slack. Yes, in the meeting Colby said it's still needed, but I don't think it actually is."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "peter.dalbenzio",
                "created": 1712845451167
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " - The host address will stay the same ("
                                },
                                {
                                    "type": "text",
                                    "text": "automatic.hostname.assignment",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "). No need to regenerate the seed."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1712845530127
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "hadrien.luttiau",
                                        "text": "@hadrien.luttiau",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "ian.izaguirre",
                                        "text": "@ian.izaguirre",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "per.svensson",
                                        "text": "@per.svensson",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " w.r.t the \"Allocate IP\" question, we are sticking with Per's design."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "New Step 1: Download Seed (used to be step 3) New Step 2: Original Step 4 plus Original Step 1"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "So New Step 2, \"Launch virtual appliance\", will be the original content plus a new bullet point describing to allocate a public IP"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Please let me know if there's questions"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://appgate.slack.com/archives/C05C1HGEUH4/p1712928937262079?thread",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate.slack.com/archives/C05C1HGEUH4/p1712928937262079?thread"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "ts=1712845579.882669&cid=C05C1HGEUH4",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "peter.dalbenzio",
                "created": 1712929222765
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The "
                                },
                                {
                                    "type": "text",
                                    "text": "handoff file in Figma",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://www.figma.com/file/qGU70BZJSmzEnzKvNNNrwg/ZTP-Consoles-%2F-Handoff?type=design&node-id=204%3A8&mode=design&t=r1eihZ9rp1P90lRI-1"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " is now updated according to the above and filed under Design Ready."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "per.svensson",
                "created": 1713163604844
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Hi all - please linked Word doc for the content changes to support this change "
                                },
                                {
                                    "type": "text",
                                    "text": "https://appgate-my.sharepoint.com/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate-my.sharepoint.com/"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "emoji",
                                    "attrs": {
                                        "shortName": "w"
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": "/p/peter"
                                },
                                {
                                    "type": "text",
                                    "text": "dalbenzio/EaGRr06Rg2xFpcDesJSIaLABcuUpq0o7KIwkMTu2IWa2yQ?e=tZc6nV. These changes support the removal of steps 1 and 2 for the 3 cloud providers. Additionally, for Azure only, changes SDP 6.2 to SDP 6.3.",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Note: In case it wasn't clear or explicit, here's what happening to the steps on the Gateway page in the wizard:"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "old step 1 (generate static IP) goes away"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "old step 2 (enter hostname) goes away"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "old step 3 (seed generation) becomes step 1"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "old step 4 (create customer-hosted gateway) becomes step 2: that's the content changes in this document)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "old step 5 (verify connection to gateway) becomes step 3"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "peter.dalbenzio",
                "created": 1713815448802
            }
        ]
    },
    {
        "key": "ZTP-2727",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "So natan has been reporting a problem several times where various parts of service deployer jobs can't resolve the adm."
                        },
                        {
                            "type": "text",
                            "text": " hostname. It happens at random points, even in sdpctl I added some retries in SdpAdmin as a workaround, but it also fails inside sdpctl",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "From what i can tell its related to coredns and route53 AliasTarget host names. This doens't happen when e.g. running nimis locally."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "I'm thinking maybe one of the coredns instances has cached the result with no addresses while it was still spawning the load balancer. While the other one has the correct result."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "There are some issues that look somewhat related in the coredns issue tracker but I'm not sure if that's the problem or not yet: "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/coredns/coredns/issues/3012",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/coredns/coredns/issues/3012"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/coredns/coredns/pull/3442",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/coredns/coredns/pull/3442"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " "
                        },
                        {
                            "type": "text",
                            "text": "https://github.com/coredns/coredns/issues/4513",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://github.com/coredns/coredns/issues/4513"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Example errors"
                        }
                    ],
                    "attrs": {
                        "level": 1
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "on provisioning "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_core/_sockets.py\", line 189, in connect_tcp\n    |     addr_obj = ip_address(remote_host)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/ipaddress.py\", line 54, in ip_address\n    |     raise ValueError(f'{address!r} does not appear to be an IPv4 or IPv6 address')\n    | ValueError: 'adm.gokhann.natan.ztp.donottrust.dev.appgate.com' does not appear to be an IPv4 or IPv6 address\n    | \n    | During handling of the above exception, another exception occurred:\n    | \n    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/httpcore/_exceptions.py\", line 10, in map_exceptions\n    |     yield\n    |   File \"/usr/local/lib/python3.11/site-packages/httpcore/_backends/anyio.py\", line 114, in connect_tcp\n    |     stream: anyio.abc.ByteStream = await anyio.connect_tcp(\n    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_core/_sockets.py\", line 192, in connect_tcp\n    |     gai_res = await getaddrinfo(\n    |               ^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/concurrent/futures/thread.py\", line 58, in run\n    |     result = self.fn(*self.args, **self.kwargs)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/socket.py\", line 962, in getaddrinfo\n    |     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | socket.gaierror: [Errno -5] No address associated with hostname"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "another provisioning error: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "[ztp-jobs] 2023-11-15 14:49:56,049: ERROR: [app.tasks.sdp::provision] [account=natan collective=gokhan id=9f84f4b3-f6e4-4054-9cd3-94426ea9cd66] Error provisioning SDP collective:   + Exception Group Traceback (most recent call last):\n  |   File \"/app/app/tasks/sdp.py\", line 831, in provision\n  |     await provision_resources(\n  |   File \"/app/app/tasks/resource_graph.py\", line 958, in provision_resources\n  |     await provision(\n  |   File \"/app/app/tasks/resource_graph.py\", line 898, in provision\n  |     async with asyncio.TaskGroup() as tg:\n  |   File \"/usr/local/lib/python3.11/asyncio/taskgroups.py\", line 147, in __aexit__\n  |     raise me from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_core/_sockets.py\", line 189, in connect_tcp\n    |     addr_obj = ip_address(remote_host)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/ipaddress.py\", line 54, in ip_address\n    |     raise ValueError(f'{address!r} does not appear to be an IPv4 or IPv6 address')\n    | ValueError: 'adm.gokhan.natan.ztp.donottrust.dev.appgate.com' does not appear to be an IPv4 or IPv6 address\n    | \n    | During handling of the above exception, another exception occurred:\n    | \n    | Traceback (most recent call last):\n    |   File \"/usr/local/lib/python3.11/site-packages/httpcore/_exceptions.py\", line 10, in map_exceptions\n    |     yield\n    |   File \"/usr/local/lib/python3.11/site-packages/httpcore/_backends/anyio.py\", line 114, in connect_tcp\n    |     stream: anyio.abc.ByteStream = await anyio.connect_tcp(\n    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/site-packages/anyio/_core/_sockets.py\", line 192, in connect_tcp\n    |     gai_res = await getaddrinfo(\n    |               ^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/concurrent/futures/thread.py\", line 58, in run\n    |     result = self.fn(*self.args, **self.kwargs)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/usr/local/lib/python3.11/socket.py\", line 962, in getaddrinfo\n    |     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | socket.gaierror: [Errno -5] No address associated with hostname"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "On deprovisioning, when taking a backup: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "\t* No response Get \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.thtest.thomasdemo2.ztp.donottrust.dev.appgate.com:8443/admin/identity-providers/names\""
                        },
                        {
                            "type": "text",
                            "text": ":"
                        },
                        {
                            "type": "text",
                            "text": " dial tcp: lookup adm.thtest.thomasdemo2.ztp.donottrust.dev.appgate.com on 172.20.0.10:53: no such host"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "coredns version: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "image: 602401143452.dkr.ecr.us-west-2.amazonaws.com/eks/coredns:v1.8.7-eksbuild.2"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": " latest is v1.11.1, note that EKS uses a special EKS related build."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "coredns config: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "\n$ kubectl -n kube-system get configmap coredns -o json | jq -r .data.Corefile\n.:53 {\n    errors\n    health\n    kubernetes cluster.local in-addr.arpa ip6.arpa {\n      pods insecure\n      fallthrough in-addr.arpa ip6.arpa\n    }\n    prometheus :9153\n    forward . /etc/resolv.conf\n    cache 30\n    loop\n    reload\n    loadbalance\n}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700138254891
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "record in route53: ![](image(4).png)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It uses "
                                },
                                {
                                    "type": "text",
                                    "text": "https://docs.aws.amazon.com/Route53/latest/APIReference/API",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://docs.aws.amazon.com/Route53/latest/APIReference/API"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "AliasTarget.html",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "In the nimis resource graph: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "admin_dns_name = LoadBalancerDNSName(\n    load_balancer=load_balancer,\n    hosted_zone=hosted_zone,\n    dns_name_prefix=\"adm\",\n)"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "@property\ndef record_set(self) -> ResourceRecordSetTypeDef:\n    return {\n        \"Name\": self.dns_name,\n        \"Type\": \"A\",\n        \"AliasTarget\": {\n            \"HostedZoneId\": self.load_balancer.state[\"CanonicalHostedZoneId\"],\n            \"DNSName\": self.load_balancer.state[\"DNSName\"],\n            \"EvaluateTargetHealth\": self.evaluate_target_health,\n        },\n    }"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": " evaluate"
                                },
                                {
                                    "type": "text",
                                    "text": "target",
                                    "marks": [
                                        {
                                            "type": "em"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "health is set to False so I don't think this is about health checks."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700138365820
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "For what it's worth I initially suspected the ALB health checks but that shouldn't affect the IPs returning for the hostname and that wouldn't explain why it never happens when running nimis locally. Which is why I think its related to DNS resolution in k8s specifically."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700138666944
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "DNS troubleshooting in k8s "
                                },
                                {
                                    "type": "text",
                                    "text": "https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700138724124
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Flushing the coredns cache works as a workaround: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "ascdep@ztp-job-provision-bed4ace0699244ca942b15c68685a52c-2h8n2:/app$ python3 -c \"import socket; print(socket.gethostbyname('adm.thtest.thomasdemo2.ztp.donottrust.dev.appgate.com'))\"\n35.166.108.40"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": " And by flushing the cache i mean restarting coredns: {{CODEBLOCK1}} Obviously this is not acceptable in production."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700471858094
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Trying to see if I can fix this using coredns configuration."
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Before: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "$ kubectl -n kube-system get configmap coredns -o json| jq -r .data.Corefile\n.:53 {\n    errors\n    health\n    kubernetes cluster.local in-addr.arpa ip6.arpa {\n      pods insecure\n      fallthrough in-addr.arpa ip6.arpa\n    }\n    prometheus :9153\n    forward . /etc/resolv.conf\n    cache 30\n    loop\n    reload\n    loadbalance\n}"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "After: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": ".:53 {\n    errors\n    health\n    kubernetes cluster.local in-addr.arpa ip6.arpa {\n      pods insecure\n      fallthrough in-addr.arpa ip6.arpa\n    }\n    prometheus :9153\n    forward . /etc/resolv.conf\n    cache {\n      success 30\n      denial 0\n    }\n    loop\n    reload\n    loadbalance\n}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700472611758
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It might be related to us not waiting for the LB provisioning to complete, meaning we try to query the dns name too soon. Adding some waiting here "
                                },
                                {
                                    "type": "text",
                                    "text": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/697/commits/f7c266d1313153ebea37ee721e5d20f68a52e447",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://github.com/appgate-sdp-int/asc-service-deployment/pull/697/commits/f7c266d1313153ebea37ee721e5d20f68a52e447"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700475227931
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700485788646
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "By enabling logs we can see that the problem is the nxdomain getting cached: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "2023-11-20T13:14:19.672445399Z [INFO] 10.5.3.250:38909 - 30526 \"A IN adm.thtest.thomasdemo2.ztp.donottrust.dev.appgate.com. udp 82 false 4096\" NXDOMAIN qr,aa,rd,ra 185 0.000132571s"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700486085926
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I couldn't really find a configuration which fixes tihs problem. I'm hoping EKS upgrades or independently coredns version upgrades will fix this issue."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1700579678936
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Per "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "thomas.cellerier",
                                        "text": "@thomas.cellerier",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " , it looks like this ticket, 2727, duplicates 2801. Closing 2801 as a dupe. "
                                },
                                {
                                    "type": "text",
                                    "text": "Slack thread",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "https://appgate.slack.com/archives/C03KGL4LL0Y/p1702365205928979?thread_ts=1702308693.848469&cid=C03KGL4LL0Y"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "peter.dalbenzio",
                "created": 1702395317143
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Found this in another (second) trial collective. First one was demo-l0378817 (documented in ZTP-2801)"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Second one is demo-l0376435. Didn't make a ticket as it would duplicate this ticket; just raising awareness that this more prevalent than a one-off edge case."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "peter.dalbenzio",
                "created": 1702420520454
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Lowering the priority as it hasn't been happening lately."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1706189838095
            }
        ]
    },
    {
        "key": "ZTP-3692",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Description (What?) and Motivation (Why?)"
                        }
                    ],
                    "attrs": {
                        "level": 4
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Some possible changes:"
                        }
                    ]
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "new field called \"user"
                                        },
                                        {
                                            "type": "text",
                                            "text": "path\" which needs to be configured in the welcome step. \"simple\" or \"advanced\".",
                                            "marks": [
                                                {
                                                    "type": "em"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "send email after collective creation: will be done as part of ZTP-3717 instead."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "always provide hosted gateway. When the advanced path is selected, we remove the hosted gateway. We might stop removing the hosted gateway in 6.5 when SDP has 2 Sites in its built-in license."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "sample apps. The list will come from the product management."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "demo accounts should not be able to create new entitlements using hosted gateway. We'll limit what IPs/subnets the hosted gateway can reach."
                                        }
                                    ]
                                },
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "####"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Currently waiting for ZTP-3652."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1738599185143
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Currently waiting for predefined app list."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1740153605613
            }
        ]
    },
    {
        "key": "ZTP-1615",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Blocked until this task has been completed and merged: ZTP-1614"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Task description"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "orderedList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the \"Display Name\" label into \"Name\" on the SAML & OIDC IDP Forms."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the label on the overview page from \"Display Name\" into \"Name\"."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "Rename the column heading on the Table list page from \"Display Name\" into \"Name\"."
                                        }
                                    ]
                                },
                                {
                                    "type": "blockquote",
                                    "content": [
                                        {
                                            "type": "paragraph",
                                            "content": [
                                                {
                                                    "type": "text",
                                                    "text": "Note: The backend is not being renamed, so do not update the API call."
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Location"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "![](image.png){width=70%}"
                        }
                    ]
                },
                {
                    "type": "heading",
                    "content": [
                        {
                            "type": "text",
                            "text": "Definition of done"
                        }
                    ],
                    "attrs": {
                        "level": 2
                    }
                },
                {
                    "type": "bulletList",
                    "content": [
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Display Name\" label is renamed on the SAML/OIDC IDP Form."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Display Name\" label is renamed on the SAML/OIDC IDP Overview page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] \"Display Name\" column heading is renamed on the IDP Table list page."
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "listItem",
                            "content": [
                                {
                                    "type": "paragraph",
                                    "content": [
                                        {
                                            "type": "text",
                                            "text": "[x] If needed, refactor the current unit tests and/or MSW tests to reflect this name change."
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-366",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "We will need this info to be shown in the UI as part of the collective details. \\"
                        },
                        {
                            "type": "text",
                            "text": "\\",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "    \"controller"
                        },
                        {
                            "type": "text",
                            "text": "urls\": [\"",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "http://sdp-access-ui-url/\"",
                            "marks": [
                                {
                                    "type": "em"
                                },
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "http://sdp-access-ui-url/\""
                                    }
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": ",",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": " .. ] ,\\",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "\\"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "New object schema will be:"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n  \"collective_info\": {\n    \"id\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\n    \"controller_urls\": [\n        \""
                        },
                        {
                            "type": "text",
                            "text": "http://sdp-access-ui-url/\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n        \"url2\",\n    ],\n    \"license_info\": {\n      \"request_code\": \"string\",\n      \"licenses\": [\n        {\n          \"id\": \"string\",\n          \"version\": 0,\n          \"type\": 0,\n          \"expiration\": \"string\",\n          \"max_users\": 0,\n          \"max_portal_users\": 0,\n          \"max_connector_groups\": 0,\n          \"max_sites\": 0,\n          \"users_lease_time_hours\": 0,\n          \"portal_users_lease_time_hours\": 0\n        }\n      ],\n      \"entitled\": {\n        \"max_users\": 0,\n        \"max_portal_users\": 0,\n        \"max_connector_groups\": 0,\n        \"max_site\": 0,\n        \"users_lease_time_hours\": 0,\n        \"portal_users_lease_time_hours\": 0\n      },\n      \"usage\": {\n        \"users\": 0,\n        \"portal_users\": 0,\n        \"connector_groups\": 0,\n        \"sites\": 0\n      }\n    },\n    \"name\": \"string\"\n  },\n  \"appliances\": [\n    {\n      \"version\": \"string\",\n      \"function\": \"string\",\n      \"details\": {}\n    },\n    {\n      \"version\": \"string\",\n      \"function\": \"string\",\n      \"details\": {}\n    }\n  ]\n}"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-635",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Since the notification from the service-deployer could be lost, we should improve the GET /service endpoints to proactively check the status in the service-deployer for the \"deleting\" services and either finish the deletion in the management service or rollback depending on the status that we get from service-deployer."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "When trying to delete a service in provisioning"
                                },
                                {
                                    "type": "text",
                                    "text": "error state, the API call fails with a 500 Error. "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "INFO:app.models.service:Delete service deployment: 027f5b1d-a69d-4390-b142-c43b445d03b3\nERROR:app.routers.service:Error when trying to delete service. 'NoneType' object has no attribute 'status'\n172.31.0.84:8841 - \"DELETE /api/service/28201ccd-1e48-4ea3-9886-4bf96d1d4387 HTTP/1.1\" 500"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": " arturo \ue0b0 ~/appgate/asc-service-deployment \ue0b0 \ue0a0 fix-permissions-sdp \ue0b0 curl -X 'DELETE' '"
                                },
                                {
                                    "type": "text",
                                    "text": "https://mgmt.asc.donottrust.dev.appgate.com/api/service/28201ccd-1e48-4ea3-9886-4bf96d1d4387'"
                                },
                                {
                                    "type": "text",
                                    "text": " \\\n  -H 'Accept: */*' \\\n  -H 'Accept-Language: en-US,en;q=0.9,es-US;q=0.8,es;q=0.7' \\\n  -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTU5MzYyMDYsInR5cGUiOiJhY2Nlc3NfdG9rZW4iLCJpYXQiOjE2NTU5MzI2MDYsInN1YiI6IjdhMzQzMjJmLTVmMmYtNDM0Yi1iYjg2LWVkNDY0YWEzNGEyYSIsImF1ZCI6IjVkNGQ3NzFhLTQ1YTEtNDIyNC1hMTUwLWUyZWVkMzMzYWEzMSIsImFsZyI6IkhTMjU2IiwibmFtZSI6IkFydHVybyBHYXJjaWEiLCJ1c2VybmFtZSI6ImFydHVyby5nYXJjaWFAYXBwZ2F0ZS5jb20ifQ.2Z4lqlumk0TFAfU33s4kvUdWXPmBzkBODAf2aF_Zeyc' \\\n  -H 'Cache-Control: no-cache' \\\n  -H 'Connection: keep-alive' \\\n  -H 'Origin: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://demo30.asc.donottrust.dev.appgate.com'"
                                },
                                {
                                    "type": "text",
                                    "text": " \\\n  -H 'Pragma: no-cache' \\\n  -H 'Referer: "
                                },
                                {
                                    "type": "text",
                                    "text": "https://demo30.asc.donottrust.dev.appgate.com/'"
                                },
                                {
                                    "type": "text",
                                    "text": " \\\n  -H 'Sec-Fetch-Dest: empty' \\\n  -H 'Sec-Fetch-Mode: cors' \\\n  -H 'Sec-Fetch-Site: same-site' \\\n  -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36' \\\n  -H 'sec-ch-ua: \" Not A;Brand\";v=\"99\", \"Chromium\";v=\"102\", \"Google Chrome\";v=\"102\"' \\\n  -H 'sec-ch-ua-mobile: ?0' \\\n  -H 'sec-ch-ua-platform: \"Windows\"' \\\n  --compressed\n{\"detail\":\"Error when trying to delete service deployment.\"}%"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "arturo.garcia",
                "created": 1655935096927
            }
        ]
    },
    {
        "key": "ZTP-806",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Transform data to have the function as the key of the dictionary"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "{\n    \"is_active\": true,\n    \"name\": \"newsdpcollective\",\n    \"description\": \"description here\",\n    \"id\": \"0b6ab855-f394-43d7-ad06-938972e327c1\",\n    \"account_id\": \"53c36fad-0e9f-453f-bd04-11674ddf1b72\",\n    \"service_type\": \"sdp\",\n    \"status\": \"ready\",\n    \"requested_by\": \"16721c51-1f2d-46e8-b207-a9f6f348e405\",\n    \"details\": {\n      \"deployment_id\": \"b2693944-40ed-4c70-9a49-cbc4be07423f\",\n      \"access_url\": \""
                        },
                        {
                            "type": "text",
                            "text": "https://adm.newsdpcollective.fernando-salcedo-test.asc.donottrust.dev.appgate.com:8443/ui?idp=ASC%20Provider&login=true\""
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": "\n      \"removed_by\": null,\n      \"collective_id\": \"f1ce962d-410a-4907-bde7-cad80a562c8d\",\n      \"deployment_type\": \"cloud-based\",\n      \"appliances\": [\n        {\n          \"id\": \"a7d7357c-38f9-41b6-85b4-8cba94a15aa1\",\n          \"name\": \"Controller 1\",\n          \"status\": \"healthy\",\n          \"function\": \"controller\",\n          \"version\": \"6.0.1\"\n        },\n        {\n          \"id\": \"aec18e40-81bb-4538-b28d-931eedda8832\",\n          \"name\": \"Controller 2\",\n          \"status\": \"healthy\",\n          \"function\": \"controller\",\n          \"version\": \"6.0.1\"\n        },\n        {\n          \"id\": \"c2b9c7ba-0224-11ed-b939-0242ac120002\",\n          \"name\": \"Gateway 1\",\n          \"status\": \"healthy\",\n          \"function\": \"gateway\",\n          \"version\": \"6.0.1\"\n        }\n      ],\n      \"min_version\": \"6.0.1\"\n    }\n  },\n  // ****** How we need the data ****** \n  \"appliances\": {\n    \"controllers\": [\n      {\n        \"id\": \"a7d7357c-38f9-41b6-85b4-8cba94a15aa1\",\n        \"name\": \"Controller 1\",\n        \"status\": \"healthy\",\n        \"version\": \"6.0.1\"\n      },\n      {\n        \"id\": \"aec18e40-81bb-4538-b28d-931eedda8832\",\n        \"name\": \"Controller 2\",\n        \"status\": \"healthy\",\n        \"version\": \"6.0.1\"\n      }\n    ],\n    \"gateways\": [\n      {\n        \"id\": \"c2b9c7ba-0224-11ed-b939-0242ac120002\",\n        \"name\": \"Gateway 1\",\n        \"status\": \"healthy\",\n        \"version\": \"6.0.1\"\n      }\n    ]\n  }"
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-3938",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Symptoms: "
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "2025-05-08T14:02:55.111897+0000 cz-controllerd[2981]: WARN [AdvisorConnector] Received HTTP 400. Message: HTTP 400 Bad Request, Body: Missing valid app_id in query parameter\n2025-05-08T14:02:55.112814+0000 cz-controllerd[2981]: WARN [OperationExceptionMapper] Handled operation error: ZTP Advisor connection failed.\n\n2025-05-08T14:50:18.677832+0000 cz-controllerd[2981]: DEBUG[AdvisorConnector] Calling advisor URL: "
                        },
                        {
                            "type": "text",
                            "text": "https://advisor.use1.appgate.net/app?app_id=2547b3dfd48de4"
                        },
                        {
                            "type": "text",
                            "text": "\n2025-05-08T14:50:18.687696+0000 cz-controllerd[2981]: WARN [AdvisorConnector] Received HTTP 400. Message: HTTP 400 Bad Request, Body: Missing valid app_id in query parameter"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "https://appgate.slack.com/archives/CU926BAP8/p1746714619169929",
                            "marks": [
                                {
                                    "type": "link",
                                    "attrs": {
                                        "href": "https://appgate.slack.com/archives/CU926BAP8/p1746714619169929"
                                    }
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    },
    {
        "key": "ZTP-2802",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "During 'configure' of a trial collective, there was an error."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "Account Subdomain: l0373216 ZTP Production, us-east-1 job-id: c3531408-479a-46a6-80ca-215b14fdbc85 and 8f86308f-92ec-4ff6-8bbe-eab06165141f"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "date/time: 2023-11-01T14{{COLON"
                        },
                        {
                            "type": "text",
                            "text": "NUM",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "53}}25.393459555Z and 2023-10-31T15{{COLON"
                        },
                        {
                            "type": "text",
                            "text": "NUM",
                            "marks": [
                                {
                                    "type": "em"
                                }
                            ]
                        },
                        {
                            "type": "text",
                            "text": "51}}31.943489446Z"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Traceback (most recent call last):\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 769, in handle_function\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1051, in _request\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 749, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '422 ' for url '"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.demo-collective.demo-l0373216.appgate.net:8443/admin/entitlements'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422"
                        },
                        {
                            "type": "text",
                            "text": "\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/app/app/tasks/sdp.py\", line 954, in configure\n    await configure_sdp_collective(self.ztp_deployment, parameters)\n  File \"/app/app/tasks/wizard.py\", line 78, in configure_sdp_collective\n    wizard_entitlement_ids = await upsert_wizard_entitlements(\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/tasks/wizard.py\", line 216, in upsert_wizard_entitlements\n    upserted_entities = await upsert_sdp_entities(\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/tasks/sdp_entities.py\", line 1474, in upsert_sdp_entities\n    upserted_entity = await create_f(entity)\n                      ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1086, in create_entitlement\n    response = await self._request(\"POST\", \"/entitlements\", entitlement)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 771, in handle_function\n    raise SdpAdminHTTPException(\napp.libraries.sdp_admin.sdp_admin.SdpAdminHTTPException: 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts[0].url\",\"message\":\"must be a valid URL\"}]}"
                        }
                    ]
                },
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Traceback (most recent call last):\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 769, in handle_function\n    return await func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1051, in _request\n    response.raise_for_status()\n  File \"/usr/local/lib/python3.11/site-packages/httpx/_models.py\", line 749, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '422 ' for url '"
                        },
                        {
                            "type": "text",
                            "text": "https://adm.demo-collective.demo-l0373216.appgate.net:8443/admin/entitlements'"
                        },
                        {
                            "type": "text",
                            "text": "\nFor more information check: "
                        },
                        {
                            "type": "text",
                            "text": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422"
                        },
                        {
                            "type": "text",
                            "text": "\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/app/app/tasks/sdp.py\", line 954, in configure\n    await configure_sdp_collective(self.ztp_deployment, parameters)\n  File \"/app/app/tasks/wizard.py\", line 78, in configure_sdp_collective\n    wizard_entitlement_ids = await upsert_wizard_entitlements(\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/tasks/wizard.py\", line 216, in upsert_wizard_entitlements\n    upserted_entities = await upsert_sdp_entities(\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/tasks/sdp_entities.py\", line 1474, in upsert_sdp_entities\n    upserted_entity = await create_f(entity)\n                      ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 1086, in create_entitlement\n    response = await self._request(\"POST\", \"/entitlements\", entitlement)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/app/libraries/sdp_admin/sdp_admin.py\", line 771, in handle_function\n    raise SdpAdminHTTPException(\napp.libraries.sdp_admin.sdp_admin.SdpAdminHTTPException: 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts[0].url\",\"message\":\"must be a valid URL\"}]}"
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "That looks like missing validation in the management service "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "natan.abolafya",
                                        "text": "@natan.abolafya",
                                        "accessLevel": ""
                                    }
                                },
                                {
                                    "type": "text",
                                    "text": " "
                                },
                                {
                                    "type": "mention",
                                    "attrs": {
                                        "id": "christoffer.karlsson",
                                        "text": "@christoffer.karlsson",
                                        "accessLevel": ""
                                    }
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "SdpAdminHTTPException: 422 - Error: {\"id\":\"unprocessable entity\",\"message\":\"Validation failed.\",\"errors\":[{\"field\":\"appShortcuts[0].url\",\"message\":\"must be a valid URL\"}]}"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1705565054535
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Is there a chance to get to know what the URL was in that case?"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The scenario I can see where we have a logic bug is if they set a network and then a port that we try to combine into a url. I'll create a task to fix that at least."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1705565910298
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The URLs are in the error here: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "14:53:25,390\",\"levelname\":\"ERROR\",\"correlation_id\":\"\",\"name\":\"app.tasks.sdp_entities\",\"funcName\":\"upsert_sdp_entities\",\"lineno\":1484,\"message\":\"[a4163bf7-8abe-498a-bcca-7027bb734d38 - demo-l0373216 - Demo-Collective] Invalid entity name='Appgate Resources' site=UUID('8a4add9e-0e99-4bb1-949c-c9faf9a49ad4') actions=[SdpAction(id=None, type='IpAccess', action='exclude', hosts=['sdphelp.appgate.com'], ports=['443'], types=[], subtype='tcp_up', monitor=SdpActionMonitor(enabled=False, timeout=30))] condition_logic='and' conditions=[UUID('ee7b7e6f-e904-4b4f-a5ec-b3bef040643e')] app_shortcuts=[SdpAppShortcut(name='Cloud Console', description='Appgate ZTP administration interface. Used to manage our Appgate account and services.', url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://Grupo"
                                },
                                {
                                    "type": "text",
                                    "text": " Radical.appgate.net', color_code=15), SdpAppShortcut(name='SDP User Documentation', description='Documentation on how to use the SDP client as an end user.', url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://sdphelp.appgate.com/userguide'"
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " color_code=15), SdpAppShortcut(name='SDP Administration Documentation', description='Documentation on how to configure and maintain a SDP collective.', url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://sdphelp.appgate.com/adminguide'"
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " color_code=15), SdpAppShortcut(name='Appgate SDP', description='Appgate SDP administration interface. Used to configure and manage secure access policy.', url='"
                                },
                                {
                                    "type": "text",
                                    "text": "https://adm.demo-collective.demo-l0373216.appgate.net:8443/ui?idp=ZTP%20Provider&login=true'"
                                },
                                {
                                    "type": "text",
                                    "text": ","
                                },
                                {
                                    "type": "text",
                                    "text": " color_code=15)] app_shortcut_scripts=[] notes='' tags=['ztp', 'agaas', 'customer'] disabled=False id=None. 422 - Error: {\\\"id\\\":\\\"unprocessable entity\\\",\\\"message\\\":\\\"Validation failed.\\\",\\\"errors\\\":[{\\\"field\\\":\\\"appShortcuts[0].url\\\",\\\"message\\\":\\\"must be a valid URL\\\"}]}"
                                }
                            ]
                        },
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I would suspect the spaces here: "
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "https://Grupo"
                                },
                                {
                                    "type": "text",
                                    "text": " Radical.appgate.net"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1705568033041
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "ah, is that the collective name?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1705569560902
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Ah is it using the account name instead of the domain here too?"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1705570200005
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "It's the account subdomain."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1705570215067
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The subdomain is l0373216 according to peter in the task description."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "thomas.cellerier",
                "created": 1705570233194
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Gaaaaah"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1705570249118
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "yeah, you can't have a subdomain with space :)"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "natan.abolafya",
                "created": 1705570414329
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "This is an old bug (ZTP-2655) that is already fixed."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "christoffer.karlsson",
                "created": 1705570943729
            }
        ]
    },
    {
        "key": "ZTP-653",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "When a user refreshes a page, they are either rerouted to the landing page or shown an Ngnx error."
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "So far, I am working in the Docker Container with Ngnx."
                        }
                    ]
                }
            ],
            "version": 1
        },
        "comments": [
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "The dynamic routing of "
                                },
                                {
                                    "type": "text",
                                    "text": "/accounts/{accountId}/",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " is having problems between Ngnx and NextJs server side navigation."
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652966451321
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "172.18.0.1 - - [19/May/2022:13:28:06 +0000] \"GET /accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/ HTTP/1.1\" 200 1543 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:28:06 +0000] \"GET /_next/static/atXYPFZzUkqB85irSellU/_buildManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:28:06 +0000] \"GET /_next/static/atXYPFZzUkqB85irSellU/_ssgManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:28:06 +0000] \"GET /_next/static/atXYPFZzUkqB85irSellU/_middlewareManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\""
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652967906656
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " is getting a \"200\" reponse, but then is routed to "
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "http://localhost/accounts"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652968120750
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "My local testing is with "
                                },
                                {
                                    "type": "text",
                                    "text": "trailingSlash: true,",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": " in the next.config.js"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652968202173
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I did a hard refresh of "
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "  but the logs showed this:"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "172.18.0.1 - - [19/May/2022:13:55:54 +0000] \"GET /accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/ HTTP/1.1\" 304 0 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:55:54 +0000] \"GET /_next/static/510xKIYiomHTRf_ArfFf4/_buildManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:55:54 +0000] \"GET /_next/static/510xKIYiomHTRf_ArfFf4/_ssgManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:13:55:54 +0000] \"GET /_next/static/510xKIYiomHTRf_ArfFf4/_middlewareManifest.js HTTP/1.1\" 304 0 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\""
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652968674242
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Still routed me to "
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts",
                                    "marks": [
                                        {
                                            "type": "link",
                                            "attrs": {
                                                "href": "http://localhost/accounts"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652968704907
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "![](image.png)"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652969502510
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "![](image1.png)"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652972886009
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Another example where every call get a 200 response"
                                }
                            ]
                        },
                        {
                            "type": "codeBlock",
                            "attrs": {},
                            "content": [
                                {
                                    "type": "text",
                                    "text": "172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/ HTTP/1.1\" 200 1543 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/css/d2813a418e5bb227.css HTTP/1.1\" 200 18539 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/webpack-69bfa6990bb9e155.js HTTP/1.1\" 200 1469 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/framework-d4c7fbe780b853ea.js HTTP/1.1\" 200 140753 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/main-998854702adab39f.js HTTP/1.1\" 200 105259 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/pages/_app-46ad3ea65bda1eb8.js HTTP/1.1\" 200 48250 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/225-dd5d7570fab09c3d.js HTTP/1.1\" 200 24855 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/pages/index-66351054dc53f863.js HTTP/1.1\" 200 5101 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/xmkJ7p16KAPGCPosQkxMc/_buildManifest.js HTTP/1.1\" 200 1278 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/xmkJ7p16KAPGCPosQkxMc/_ssgManifest.js HTTP/1.1\" 200 77 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/xmkJ7p16KAPGCPosQkxMc/_middlewareManifest.js HTTP/1.1\" 200 92 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/media/roboto-latin-400.1e2d4d3a.woff2 HTTP/1.1\" 200 15736 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/_next/static/css/d2813a418e5bb227.css\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/250-860e0c45d630ec3d.js HTTP/1.1\" 200 7410 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/627-364de66432e24f44.js HTTP/1.1\" 200 22910 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/756-1fe7702eded68795.js HTTP/1.1\" 200 8534 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:36 +0000] \"GET /_next/static/chunks/pages/accounts-32d691fd6026cd6c.js HTTP/1.1\" 200 5288 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/7ee38ffa-0bd1-4b68-8c9d-1b7b31ada5f6/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:37 +0000] \"GET /favicon.ico HTTP/1.1\" 200 25931 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:37 +0000] \"GET /_next/static/media/roboto-latin-700.12893bfc.woff2 HTTP/1.1\" 200 15816 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/_next/static/css/d2813a418e5bb227.css\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:37 +0000] \"GET /_next/static/media/roboto-latin-500.1dfbc3db.woff2 HTTP/1.1\" 200 15872 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/_next/static/css/d2813a418e5bb227.css\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:37 +0000] \"GET /_next/static/chunks/pages/accounts/new-72bcccc51d8ffc8a.js HTTP/1.1\" 200 15046 \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\"\n172.18.0.1 - - [19/May/2022:16:17:37 +0000] \"GET /_next/static/chunks/pages/accounts/new-72bcccc51d8ffc8a.js HTTP/1.1\" 200 15046 \""
                                },
                                {
                                    "type": "text",
                                    "text": "http://localhost/accounts/\""
                                },
                                {
                                    "type": "text",
                                    "text": " \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.64 Safari/537.36\" \"-\""
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652977449383
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "I am not sure why this call is failing: \\"
                                },
                                {
                                    "type": "text",
                                    "text": "\\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "\\"
                                },
                                {
                                    "type": "text",
                                    "text": " react\\_devtools\\_backend.js:4026 TypeError: Failed to fetch at /\\_next/static/chunks/756-1fe7702eded68795.js:1:6353 at l (/\\_next/static/chunks/main-998854702adab39f.js:1:95076) at Generator.\\_invoke (/\\_next/static/chunks/main-998854702adab39f.js:1:94864) at Generator.P.forEach.e. [as next] (/\\_next/static/chunks/main-998854702adab39f.js:1:95499) at u (/\\_next/static/chunks/756-1fe7702eded68795.js:1:4824) at c (/\\_next/static/chunks/756-1fe7702eded68795.js:1:5027) at /\\_next/static/chunks/756-1fe7702eded68795.js:1:5086 at new Promise () at /\\_next/static/chunks/756-1fe7702eded68795.js:1:4967 at /\\_next/static/chunks/756-1fe7702eded68795.js:1:6691 \\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "\\"
                                },
                                {
                                    "type": "text",
                                    "text": "\\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652977779507
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "Deploying the Trailing Slashes and Nginx updates to the Dev Env only fixed the fully named routes, not the Dynamic Routes"
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1652993930218
            },
            {
                "body": {
                    "type": "doc",
                    "content": [
                        {
                            "type": "paragraph",
                            "content": [
                                {
                                    "type": "text",
                                    "text": "When I run with no trailing slashes, I get this error: \\"
                                },
                                {
                                    "type": "text",
                                    "text": "\\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "\\"
                                },
                                {
                                    "type": "text",
                                    "text": " \u200b TypeError: Failed to fetch at 756-1fe7702eded68795.js:1:6353 at l (main-5fca9d6e0dcc3f6e.js:1:95007) at Generator.\\_invoke (main-5fca9d6e0dcc3f6e.js:1:94795) at Generator.P.forEach.e. [as next] (main-5fca9d6e0dcc3f6e.js:1:95430) at u (756-1fe7702eded68795.js:1:4824) at c (756-1fe7702eded68795.js:1:5027) at 756-1fe7702eded68795.js:1:5086 at new Promise () at 756-1fe7702eded68795.js:1:4967 at 756-1fe7702eded68795.js:1:6691 \\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                },
                                {
                                    "type": "text",
                                    "text": "\\"
                                },
                                {
                                    "type": "text",
                                    "text": "\\",
                                    "marks": [
                                        {
                                            "type": "code"
                                        }
                                    ]
                                }
                            ]
                        }
                    ],
                    "version": 1
                },
                "author": "abraham.french",
                "created": 1653053312276
            }
        ]
    },
    {
        "key": "ZTP-527",
        "description": {
            "type": "doc",
            "content": [
                {
                    "type": "codeBlock",
                    "attrs": {},
                    "content": [
                        {
                            "type": "text",
                            "text": "Collective Info Response: {'license_info': {'request_code': '1806225544c_v2', 'licenses': [{'id': '47902560-2246-4fae-acea-473b711f0c52', 'version': 2, 'type': 4, 'expiration': '2099-01-01T00:00:00Z', 'max_users': 2, 'max_portal_users': 0, 'max_connector_groups': 0, 'max_service_users': 1, 'max_sites': 1, 'users_lease_time_hours': 720, 'portal_users_lease_time_hours': 720, 'service_users_lease_time_hours': 720}], 'entitled': {'max_users': 2, 'max_portal_users': 0, 'max_connector_groups': 0, 'max_sites': 1, 'max_service_users': 1, 'users_lease_time_hours': 720, 'portal_users_lease_time_hours': 720, 'service_users_lease_time_hours': 720}, 'usage': {'users': 0, 'portal_users': 0, 'service_users': 0, 'connector_groups': 0, 'sites': 1}}, 'controller_urls': ['"
                        },
                        {
                            "type": "text",
                            "text": "https://envy-10-97-140-2.devops:8443']"
                        },
                        {
                            "type": "text",
                            "text": ","
                        },
                        {
                            "type": "text",
                            "text": " 'id': '3ceebd74-249f-4946-a1e7-cfa1cdadc4bc', 'name': '3ceebd74'}"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "This is making the management service to return an empty version for SDP collectives:"
                        }
                    ]
                },
                {
                    "type": "paragraph",
                    "content": [
                        {
                            "type": "text",
                            "text": "INFO:app.routers.service:Collective Info from Version Checking: collective_info=None",
                            "marks": [
                                {
                                    "type": "code"
                                }
                            ]
                        }
                    ]
                }
            ],
            "version": 1
        }
    }
]